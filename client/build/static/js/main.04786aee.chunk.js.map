{"version":3,"sources":["constants.js","apiHelper.js","editor/song/Track.js","editor/song/Block.js","editor/song/Song.js","editor/song/EditableSong.js","editor/InstrEdit.js","editor/blockEdit/Tile.js","editor/blockEdit/Line.js","editor/blockEdit/BlockEdit.js","editor/time/Block.js","editor/time/Track.js","editor/time/Time.js","editor/Editor.js","SongRating.js","SongPlayer.js","SongList.js","Home.js","Login.js","layout/TextInput.js","Register.js","Profile.js","assignment_pages/FrameworksPage.js","assignment_pages/SongPlayer.js","assignment_pages/TopSongs.js","assignment_pages/TutorialPage.js","assignment_pages/ConclusionPage.js","assignment_pages/InstallationPage.js","assignment_pages/CreditsPage.js","MenuDropdown.js","Logout.js","App.js","serviceWorker.js","index.js"],"names":["constant","ROOT_PATH","getResponse","xhr","getResponseHeader","includes","JSON","parse","response","makeApiRequest","method","route","body","arguments","length","undefined","Promise","resolve","reject","XMLHttpRequest","open","token","Cookies","setRequestHeader","onload","this","status","request","onerror","stringify","send","apiHelper","getCaptcha","then","catch","err","register","inputData","captchaKey","req","captcha","answer","key","login","user","pass","username","password","res","name","toLowerCase","expires","refreshSecret","logout","createSongDirty","song","console","log","id","createSong","songData","updateSong","getSongsDirty","userId","url","getSongs","popular","delimiterId","params","str","encodeURIComponent","serializeParams","getSong","format","songPromise","onreadystatechange","readyState","rateSong","rating","fetchUser","isLoggedIn","getCurrentUser","e","Track","track","Object","classCallCheck","blocks","settings","typeId","metadata","types","dataValues","off","on","start","end","mid","convertFromData","data","block","i","dataLine","line","j","value","push","type","clickF","startF","endF","midF","Block","storedBlock","months","getFormattedDate","date","currentDate","Date","getDate","getMonth","getFullYear","totMin","Math","floor","hours","minutes","hourString","minuteString","Song","songMeta","tracks","bpm","blockLength","createDate","updateDate","author","ratings","setKey","loaded","progressListeners","freq","keyType","step","Tone","Frequency","transpose","synth","releaseAll","instruments","activeBlock","_this","Transport","cancel","PolySynth","Synth","toMaster","count","loop","Loop","time","triggerAttackRelease","triggerAttack","triggerRelease","initialized","init","loopEnd","progressTickEvent","scheduleRepeat","pct","seconds","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","keys","Symbol","iterator","next","done","return","bind","pauseTime","stop","clear","_this2","APIHelper","getSendableSong","promise","json","sendableSong","map","convertToData","abs","context","listener","EditableSong","possibleConstructorReturn","getPrototypeOf","call","selectedTrack","InstrEdit","react_default","a","createElement","Component","Tile","props","state","tile","event","dragger","active","forceUpdate","class","onMouseDown","onMouseUp","onMouseMove","Line","tiles","blockEdit_Tile","lineNum","BlockEdit","lines","blockEdit_Line","Template","remove","className","onClick","time_Block","Time","time_Track","removeTrack","assertThisInitialized","offset","copy","slice","setState","me","filter","addTrack","Editor","playing","error","keysArray","keyOptions","ready","songId","match","load","parsed","errComp","notificationTask","clearTimeout","setTimeout","saveBtn","pause","play","evt","_this3","preventDefault","scheduleButtonReset","save","newState","val","target","setName","setBPM","_this4","style","margin-top","role","handleToggle","onChange","onSubmit","onSave","required","placeholder","minWidth","disabled","editor_InstrEdit","blockEdit_BlockEdit","time_Time","SongRating","hover","userValue","currentUserRating","average","pos","changeable","stars","classes","ceil","onMouseEnter","onMouseLeave","setRating","SongPlayer","redirect","to","playBtn","addProgressListener","progress","loading","onPlayPause","Redirect","background","onEdit","href","constants","width","src_SongRating","getFormattedCreate","hasBeenUpdated","getFormattedUpdate","SongList","songs","loadMore","hasOwnProperty","src_SongPlayer","Home","slide1","backgroundImage","slide2","slide3","data-ride","data-target","data-slide-to","data-slide","aria-hidden","src_SongList","Login","fieldErrors","refs","message","charAt","toUpperCase","substring","errors","input","ref","hideError","margin","Link","TextInput","Register","dangerouslySetInnerHTML","__html","image","ensureErrorCorrection","getValue","clientError","loginRequest","captchaError","layout_TextInput","Profile","FrameworksPage","TopSongs","songPlayers","assignment_pages_SongPlayer","marginTop","TutorialPage","exampleSong","dist_default","theme","color","marginRight","ConclusionPage","InstallationPage","src","alt","CreditsPage","title","scrollArea_default","horizontal","speed","MenuDropdown","toggleOpen","data-toggle","item","items","listItem","path","Logout","App","menu","userOnly","navBarItems","menuItem","src_MenuDropdown","window","location","pathname","BrowserRouter","basename","aria-controls","aria-expanded","aria-label","Route","component","aria-haspopup","aria-labelledby","exact","Boolean","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.04786aee.chunk.js","sourcesContent":["const constant = {\r\n    ROOT_PATH: \"/\" \r\n}\r\n\r\nexport default constant;\r\n","import * as Cookies from 'js-cookie';\r\nimport constant from './constants.js';\r\n\r\nconst in30Minutes = 1/48;\r\n\r\nconst getResponse = (xhr) => {\r\n\tconst contentType = xhr.getResponseHeader(\"Content-Type\");\r\n\tif (contentType.includes(\"application/json\")) {\r\n\t\treturn JSON.parse(xhr.response);\r\n\t} else {\r\n\t\treturn xhr.response;\r\n\t}\r\n};\r\nconst makeApiRequest = (method, route, body = null) => {\r\n\treturn new Promise(function (resolve, reject) {\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.open(method, constant.ROOT_PATH + \"api/\" + route);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\txhr.setRequestHeader(\"Authorization\", token);\r\n\t\txhr.onload = function () {\r\n\t\t\tif (this.status >= 200 && this.status < 300) {\r\n\t\t\t\tresolve(xhr);\r\n\t\t\t} else {\r\n\t\t\t\treject({\r\n\t\t\t\t\tstatus: this.status,\r\n\t\t\t\t\trequest: xhr\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.onerror = function () {\r\n\t\t\treject({\r\n\t\t\t\tstatus: this.status,\r\n\t\t\t\trequest: xhr\r\n\t\t\t});\r\n\t\t};\r\n\t\tif (body != null && typeof body !== 'undefined') {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\tif (typeof body === 'object')\r\n\t\t\t\tbody = JSON.stringify(body);\r\n\t\t\txhr.send(body);\r\n\t\t} else\r\n\t\t\txhr.send();\r\n\t});\r\n};\r\nconst serializeParams = function(params) {\r\n\tlet str = \"\";\r\n\tfor (const key in params) {\r\n\t\tif (str !== \"\")\r\n\t\t\tstr += \"&\";\r\n\t\tstr += key + \"=\" + encodeURIComponent(params[key]);\r\n\t}\r\n\treturn str.length > 0 ? '?'+str : '';\r\n};\r\n\r\nconst apiHelper = {\r\n\tgetCaptcha: function() {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'user/register')\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tregister: function(inputData, captchaKey) {\r\n\t\tconst req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/register\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\tif (inputData.captcha) {\r\n\t\t\tinputData.captcha = {\r\n\t\t\t\tanswer: inputData.captcha,\r\n\t\t\t\tkey: captchaKey\r\n\t\t\t}\r\n\t\t}\r\n\t\treq.send(JSON.stringify(inputData));\r\n\t\treturn req;\r\n\t},\r\n\tlogin: function(user, pass) {\r\n\t\tconst req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/login\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\treq.send(JSON.stringify({\r\n\t\t\tusername: user,\r\n\t\t\tpassword: pass\r\n\t\t}));\r\n\t\tif (req.status === 200) {\r\n\t\t\tvar res = JSON.parse(req.response);\r\n\t\t\tCookies.set('user', JSON.stringify({name: res.name, username: user.toLowerCase()}) || \"unknown\", {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('token', res.token, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('secret', res.refreshSecret, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn req;\r\n\t},\r\n\tlogout: function() {\r\n\t\tCookies.remove('user');\r\n\t\tCookies.remove('token');\r\n\t\tCookies.remove('secret');\r\n\t},\r\n\tcreateSongDirty: function(song) {\r\n\t\tvar token = Cookies.get('token');\r\n\t\tif(!(token === undefined)) { // try !(!(!(!(!(!(!(!(token !== undefined)))))))) - alex\r\n\t\t\tvar req = new XMLHttpRequest();\r\n\t\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/songs/create\", false);\r\n\t\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\t\treq.send(JSON.stringify(song));\r\n\t\t\tconsole.log(req.response);\r\n\t\t\tif (req.status === 200) {\r\n\t\t\t\treturn req.response.id;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(\"not logged in!\");\r\n\t\t}\r\n\t},\r\n\tcreateSong: function(songData) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tmakeApiRequest('POST', 'songs/create', songData)\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch(reject);\r\n\t\t});\r\n\t},\r\n\tupdateSong: function(id, songData) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tmakeApiRequest('POST', 'songs/update/'+id, songData)\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch(reject);\r\n\t\t});\r\n\t},\r\n\tgetSongsDirty: function(userId) {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\tvar url;\r\n\t\tif(userId === undefined) {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs\";\r\n\t\t} else {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs/get?userId=\" + userId;\r\n\t\t}\r\n\t\treq.open(\"GET\", url, false);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\treq.send();\r\n\t\tif (req.status === 200) {\r\n\t\t\treturn JSON.parse(req.response);\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t},\r\n\tgetSongs: function(userId = null, popular = false, delimiterId = null) {\r\n\t\tconst params = {};\r\n\t\tif (userId) params.userId = userId;\r\n\t\tif (popular) params.popular = 1;\r\n\t\tif (delimiterId) params.delimiterId = delimiterId;\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'songs'+serializeParams(params))\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tgetSong: function(id, format = \"full\") {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\treq.open(\"GET\", constant.ROOT_PATH + \"api/songs/\" + id + \"/\" + format, true);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token && format === \"full\")\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\tvar songPromise = new Promise((resolve, reject) => {\r\n\t\t\treq.onreadystatechange = () => {\r\n\t\t\t\t// Done\r\n\t\t\t\tif (req.readyState === 4) {\r\n\t\t\t\t\t// Success\r\n\t\t\t\t\tif (req.status === 200) {\r\n\t\t\t\t\t\tresolve(req.response);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(req.response);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treq.send();\r\n\t\treturn songPromise;\r\n\t},\r\n\trateSong: function(id, rating = null) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('POST', 'songs/rate/'+id+(rating ? '/'+rating : ''))\r\n\t\t\t\t.then(() => resolve(true))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tfetchUser: function(username) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'user/fetch/'+username)\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tisLoggedIn: function() {\r\n\t\treturn !!Cookies.get('token');\r\n\t},\r\n\tgetCurrentUser: function() {\r\n\t\tif (!Cookies.get('token') || !Cookies.get('user')) return null;\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(Cookies.get('user'));\r\n\t\t} catch (e) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default apiHelper;\r\n","class Track {\r\n    constructor(track) {\r\n\tif (!track === undefined) {\r\n\t    this.track = track;\r\n\t} else {\r\n\t    this.track = {\r\n\t\tblocks: [\r\n\t\t    1\r\n\t\t],\r\n\t\tsettings: {\r\n\t\t    typeId: 1,\r\n\t\t    metadata: \"123ab\"\r\n\t\t}\r\n\t    }\r\n\t}\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","const types = ['off', 'on', 'start', 'end', 'mid'];\r\nconst dataValues = {\r\n    'off': 0, 'on': 1, 'start': 2, 'end': 3, 'mid': 4\r\n}\r\n\r\n// convert block from integer data\r\nvar convertFromData = (data, block) => {\r\n    for (let i = 0; i < data.length; i++)\r\n    {\r\n\tlet dataLine = data[i];\r\n\tlet line = [];\r\n\tfor (let j = 0; j < dataLine.length; j++)\r\n\t{\r\n\t    let value = dataLine[j];\r\n\t    line.push({\r\n\t\ttype: types[value],\r\n\t\tclickF: function() {\r\n\t\t    if(this.type === 'off')\r\n\t\t    {\r\n\t\t\tthis.type = 'on';\r\n\t\t    }\r\n\t\t    else\r\n\t\t    {\r\n\t\t\tthis.type = 'off';\r\n\t\t    }\r\n\t\t},\r\n\t\tstartF: function() {\r\n\t\t    this.type = 'start';\r\n\t\t},\r\n\t\tendF: function() {\r\n\t\t    this.type = 'end';\r\n\t\t},\r\n\t\tmidF: function() {\r\n\t\t    this.type = 'mid';\r\n\t\t}\t\r\n\t    });\r\n\t}\r\n\tblock.push(line);\r\n    }\r\n};\r\n\r\n// playable / editable block\r\nclass Block {\r\n    constructor(storedBlock) {\r\n\tthis.block = [];\r\n\tif (!(storedBlock === undefined)) {\r\n\t    // load block from data\r\n\t    convertFromData(storedBlock.data, this.block);\r\n\t} else {\r\n\t    // create blank block\r\n\t    for (let i = 0; i < 12; i++) {\r\n\t\tlet line = [];\r\n\t\tfor(let j = 0; j < 16; j++) {\r\n\t\t    line.push({\r\n\t\t\ttype: 'off',\r\n\t\t\tclickF: function() {\r\n\t\t\t    if(this.type === 'off')\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'on';\r\n\t\t\t    }\r\n\t\t\t    else\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'off';\r\n\t\t\t    }\r\n\t\t\t},\r\n\t\t\tstartF: function() {\r\n\t\t\t    this.type = 'start';\r\n\t\t\t},\r\n\t\t\tendF: function() {\r\n\t\t\t    this.type = 'end';\r\n\t\t\t},\r\n\t\t\tmidF: function() {\r\n\t\t\t    this.type = 'mid';\r\n\t\t\t}\r\n\t\t    });\r\n\t\t}\r\n\t\tthis.block.push(line);\r\n\t    }\r\n\t}\r\n    }\r\n\r\n    convertToData() {\r\n\tlet data = [];\r\n\tfor (let i = 0; i < this.block.length; i++) {\r\n\t    let line = this.block[i];\r\n\t    let dataLine = [];\r\n\t    for (let j = 0; j < line.length; j++) {\r\n\t\tlet value = line[j].type;\r\n\t\tdataLine.push(dataValues[value]);\r\n\t    }\r\n\t    data.push(dataLine);\r\n\t}\r\n\treturn data;\r\n    }\r\n}\r\n\r\nexport default Block;\r\n","import Tone from 'tone';\r\nimport APIHelper from '../../apiHelper.js'\r\nimport Track from './Track.js';\r\nimport Block from './Block.js';\r\n\r\nclass Song {\r\n\t// User: opening song, id of song\r\n\tconstructor(songMeta) {\r\n\t\tthis.blocks = [];\r\n\t\tthis.tracks = [];\r\n\t\tif (!(songMeta === undefined)) {\r\n\t\t\t// Song exist: Load meta\r\n\t\t\tthis.name = songMeta.name;\r\n\t\t\tthis.bpm = songMeta.bpm;\r\n\t\t\tthis.blockLength = songMeta.blockLength;\r\n\r\n\t\t\tthis.createDate = new Date(songMeta.createDate);\r\n\t\t\tthis.updateDate = songMeta.updateDate ? new Date(songMeta.updateDate) : null;\r\n\t\t\tthis.author = songMeta.user.name;\r\n\t\t\tthis.username = songMeta.user.username;\r\n\t\t\tthis.ratings = songMeta.ratings;\r\n\r\n\t\t\tthis.id = songMeta.id;\r\n\t\t} else {\r\n\t\t\t// Empty meta\r\n\t\t\tthis.name = \"awesome song\";\r\n\t\t\tthis.bpm = 120;\r\n\t\t\tthis.blockLength = 1;\r\n\t\t}\r\n\t\tthis.setKey();\r\n\t\tthis.loaded = false;\r\n\t\tthis.progressListeners = [];\r\n\t}\r\n\r\n\tsetKey(freq, type) {\r\n\t\tthis.freq = freq || \"C\";\r\n\t\tthis.keyType = type || \"Maj\";\r\n\t\tthis.key = [];\r\n\t\tthis.key[11] = (this.freq + \"3\");\r\n\t\tvar step = (type === \"Maj\") ?\r\n\t\t\t[2, 2, 1, 2, 2, 2, 1, 2, 2, 1, 2] :\r\n\t\t\t[2, 1, 2, 2, 1, 2, 2, 2, 1, 2, 2];\r\n\t\tfor (let i = 10, j = 0; i >= 0; i--, j++) {\r\n\t\t\tthis.key[i] = Tone.Frequency(this.key[i+1]).transpose(step[j]);\r\n\t\t}\r\n\t\tif (this.synth) this.synth.releaseAll();\r\n\t}\r\n\r\n\tload(songMeta) {\r\n\t\tthis.blocks.push(null);\r\n\t\tif(this.id === undefined || songMeta === undefined)\r\n\t\t{\r\n\t\t\t// Load empty song\r\n\t\t\tthis.blocks.push(new Block());\r\n\t\t\tthis.tracks.push(new Track());\r\n\t\t} else {\r\n\t\t\t// Load song from composition data\r\n\t\t\tfor (let i = 0; i < songMeta.instruments.length; i++) {\r\n\t\t\t\tthis.tracks.push(new Track(songMeta.instruments[i]));\r\n\t\t\t}\r\n\t\t\tfor (let i = 1; i <= this.blockLength; i++) {\r\n\t\t\t\tlet block = new Block(songMeta.blocks[i]);\r\n\t\t\t\tthis.blocks.push(block);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.activeBlock = this.blocks[1].block;\r\n\t\tthis.loaded = true;\r\n\t}\r\n\r\n\tinit() {\r\n\t\tTone.Transport.cancel();\r\n\t\tthis.synth = new Tone.PolySynth(6, Tone.Synth).toMaster();\r\n\t\tthis.count = 0;\r\n\t\tthis.loop = new Tone.Loop((time) => {\r\n\t\t\tfor (let i = 0; i < 12; i++) {\r\n\t\t\t\tswitch(this.activeBlock[i][this.count].type) {\r\n\t\t\t\t\tcase 'on':\r\n\t\t\t\t\t\tthis.synth.triggerAttackRelease(this.key[i], '16n', time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'start':\r\n\t\t\t\t\t\tthis.synth.triggerAttack(this.key[i], time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'end':\r\n\t\t\t\t\t\tthis.synth.triggerRelease(this.key[i], time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.count >= 15) {\r\n\t\t\t\tthis.count = 0;\r\n\t\t\t} else {\r\n\t\t\t\tthis.count++;\r\n\t\t\t}\r\n\t\t}, '16n');\r\n\t}\r\n\r\n\tplay() {\r\n\t\tif (!this.initialized) {\r\n\t\t\tthis.init();\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t\tTone.Transport.loopEnd = this.blockLength + \"m\";\r\n\t\tTone.Transport.loop = true;\r\n\t\tTone.Transport.bpm.value = this.bpm;\r\n\t\t//schedule an event on the 16th measure\r\n\t\tthis.progressTickEvent = Tone.Transport.scheduleRepeat(function(time) {\r\n\t\t\tconst pct = Tone.Transport.seconds/Tone.Transport.loopEnd;\r\n\t\t\tif (pct < 0 || pct > 1)\r\n\t\t\t\treturn;\r\n\t\t\tfor (const key of this.progressListeners.keys())\r\n\t\t\t\tthis.progressListeners[key](pct);\r\n\t\t\tconsole.log();\r\n\t\t}.bind(this), \"8i\");\r\n\t\tthis.loop.start(0);\r\n\t\tTone.Transport.start();\r\n\t\tif (this.pauseTime)\r\n\t\t\tTone.Transport.seconds = this.pauseTime;\r\n\t}\r\n\r\n\tpause() {\r\n\t\tthis.pauseTime = Tone.Transport.seconds;\r\n\t\tthis.loop.stop(0);\r\n\t\tTone.Transport.stop();\r\n\t\tthis.synth.releaseAll();\r\n\t\tTone.Transport.clear(this.progressTickEvent);\r\n\t}\r\n\r\n\tsave() {\r\n\t\tif (!this.id) {\r\n\t\t\t// create new song and get id\r\n\t\t\tconst promise = APIHelper.createSong(this.getSendableSong());\r\n\t\t\tpromise.then((xhr) => {\r\n\t\t\t\tconst json = JSON.parse(xhr.response);\r\n\t\t\t\tthis.id = json.id;\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t} else {\r\n\t\t\t// update song\r\n\t\t\treturn APIHelper.updateSong(this.id, this.getSendableSong());\r\n\t\t}\r\n\t}\r\n\r\n\tgetSendableSong()\r\n\t{\r\n\t\tvar sendableSong = {\r\n\t\t\tname: this.name,\r\n\t\t\tbpm: this.bpm,\r\n\t\t\tblockLength: this.blockLength,\r\n\t\t\tinstruments: this.tracks.map((track) => {\r\n\t\t\t\treturn track.track;\r\n\t\t\t}),\r\n\t\t\tblocks: {}\r\n\t\t};\r\n\t\tfor(let i = 1; i <= (this.blocks.length - 1); i++) {\r\n\t\t\tsendableSong.blocks[i] = {\r\n\t\t\t\tdata: this.blocks[i].convertToData()\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn sendableSong;\r\n\t}\r\n\r\n\tgetFormattedCreate() {\r\n\t\treturn getFormattedDate(this.createDate);\r\n\t}\r\n\r\n\tgetFormattedUpdate() {\r\n\t\treturn getFormattedDate(this.updateDate);\r\n\t}\r\n\r\n\thasBeenUpdated() {\r\n\t\treturn this.updateDate && Math.abs(this.createDate - this.updateDate) >= 50;\r\n\t}\r\n\taddProgressListener(context, listener) {\r\n\t\tthis.progressListeners.push(listener.bind(context));\r\n\t}\r\n\tgetId() {\r\n\t\treturn this.id ? this.id : null;\r\n\t}\r\n}\r\n\r\nconst months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\r\nfunction getFormattedDate(date) {\r\n\tvar currentDate = new Date();\r\n\t// same day\r\n\tif(currentDate.getDate() === date.getDate()\r\n\t\t&& currentDate.getMonth() === date.getMonth()\r\n\t\t&& currentDate.getFullYear() === date.getFullYear())\r\n\t{\r\n\t\tlet totMin = Math.floor((currentDate - date) / 60000);\r\n\t\tlet hours = Math.floor(totMin / 60);\r\n\t\tlet minutes = totMin % 60;\r\n\t\tlet hourString = \"hour\";\r\n\t\tif(hours > 1) hourString += \"s\";\r\n\t\tif(minutes === 0)\r\n\t\t{\r\n\t\t\treturn hours + \" \" + hourString + \"  ago\";\r\n\t\t}\r\n\t\tlet minuteString = \"minute\";\r\n\t\tif(minutes > 1) minuteString += \"s\";\r\n\t\tif(hours === 0)\r\n\t\t{\r\n\t\t\treturn minutes + \" \" + minuteString + \" ago\";\r\n\t\t}\r\n\t\treturn hours + \" \" + hourString + \" and \" + minutes + \" \" + minuteString + \" ago\";\r\n\t}\r\n\treturn months[date.getMonth()] + \" \" + date.getDate() + \", \" + date.getFullYear();\r\n}\r\n\r\nexport default Song;\r\n","import Tone from 'tone';\r\nimport Song from './Song.js';\r\n\r\nclass EditableSong extends Song {\r\n    constructor(songMeta) {\r\n\tsuper(songMeta);\r\n\tthis.selectedTrack = 0;\r\n    }\r\n\r\n    addTrack() {\r\n\t\r\n    }\r\n\r\n    setName(name) {\r\n\tthis.name = name;\r\n    }\r\n\r\n    setBPM(bpm) {\r\n\tthis.bpm = bpm;\r\n\tTone.Transport.bpm.value = this.bpm;\r\n    }\r\n}\r\n\r\nexport default EditableSong;\r\n","import React, { Component }  from 'react';\r\n\r\nclass InstrEdit extends Component {\r\n    render(params) {\r\n\treturn (\r\n\t    <div id='instrEdit'>\r\n\t\t<span>Instrument </span>\r\n\t\t<select>\r\n\t\t    <option>Instrument 1</option>\r\n\t\t    <option>Instrument 2</option>\r\n\t\t    <option>Instrument 3</option>\r\n\t\t</select>\r\n\t\t<br />\r\n\t\t<span>Drive </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 2 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 3 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default InstrEdit;\r\n","import React, { Component } from 'react';\r\n\r\nclass Tile extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.state = props.tile;\r\n    }\r\n\r\n    onMouseMove(event) {\r\n    }\r\n\r\n    onMouseDown(event) {\r\n\tthis.props.dragger.active = this.props.line;\r\n\tthis.props.dragger.start = this;\r\n\t//this.state.startF();\r\n\t//this.forceUpdate();\r\n    }\r\n\r\n    onMouseUp(event) {\r\n\tif(this.props.line === this.props.dragger.active)\r\n\t{\r\n\t    if(this.props.dragger.start === this)\r\n\t    {\r\n\t\tthis.state.clickF();\r\n\t    }\r\n\t    else\r\n\t    {\r\n\t\tthis.props.dragger.start.state.startF();\r\n\t\tthis.props.dragger.start.forceUpdate();\r\n\t\tthis.state.endF();\r\n\t    }\r\n\t    this.forceUpdate();\r\n\t}\r\n\tthis.props.dragger.active = null;\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div\r\n\t\tclass={\"tile \" + (this.state.type)}\r\n\t\tonMouseDown={this.onMouseDown.bind(this)}\r\n\t\tonMouseUp={this.onMouseUp.bind(this)}\r\n\t\tonMouseMove={this.onMouseMove.bind(this)}\r\n\t\t>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Tile;\r\n","import React, { Component } from 'react';\r\nimport Tile from './Tile.js';\r\n\r\nclass Line extends Component {\r\n    render() {\r\n\tlet tiles = [];\r\n\tfor(let i = 0; i < 16; i++)\r\n\t{\r\n\t    tiles.push(<Tile tile={this.props.line[i]} line={this.props.lineNum} dragger={this.props.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div class='line'>\r\n\t\t{tiles}\t\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Line;\r\n","import React, { Component } from 'react';\r\n\r\nimport Line from './Line.js';\r\n\r\nclass BlockEdit extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.dragger = {\r\n\t    active: -1,\r\n\t    start: null\r\n\t}\r\n    }\r\n    \r\n    render() {\r\n\tlet lines = [];\r\n\tfor(let i = 0; i < 12; i ++)\r\n\t{\r\n\t    lines.push(<Line line={this.props.block[i]} lineNum={i} dragger={this.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div id='blockEdit'>\r\n\t\t{lines}\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default BlockEdit;\r\n","import React, { Component } from 'react';\r\n\r\nclass Template extends Component {\r\n    render() {\r\n\treturn (\r\n\t    <div>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Template;\r\n","import React, { Component } from 'react';\r\nimport Block from './Block.js';\r\n\r\nclass Track extends Component {\r\n\r\n\r\n    remove() {\r\n\tthis.props.remove(this);\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div className=\"track\">\r\n\t\t<h1 onClick={this.remove.bind(this)}>{this.props.id}</h1>\r\n\t\t<Block />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","import React, { Component } from 'react';\r\nimport Track from './Track.js';\r\n\r\nclass Time extends Component {\r\n    constructor(props)\r\n    {\r\n\tsuper(props);\r\n\tthis.id = 1;\r\n\tthis.state = {\r\n\t    tracks: [<Track id='0' remove={this.removeTrack.bind(this)} />]\r\n\t}\r\n\tthis.offset = 0;\r\n    }\r\n\r\n    addTrack()\r\n    {\r\n\tvar copy = this.state.tracks.slice(0);\r\n\tcopy.push(<Track id={this.id} remove={this.removeTrack.bind(this)}/>);\r\n\tthis.setState(state => ({\r\n\t    tracks: copy\r\n\t}));\r\n\tthis.id++;\r\n    }\r\n\r\n    removeTrack(me)\r\n    {\r\n\tthis.setState(state => ({\r\n\t    tracks: state.tracks.filter(function(value) {\r\n\t\treturn !(me.props.id === value.props.id);\r\n\t    })\r\n\t}));\r\n    }\r\n\r\n    render()\r\n    {\r\n\treturn (\r\n\t    <div>\r\n\t\t{this.state.tracks}\r\n\t\t<h1 onClick={this.addTrack.bind(this)}>Create track</h1>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Time;\r\n","import React, { Component } from 'react';\r\nimport './editor.css';\r\nimport './awesome.css';\r\nimport APIHelper from '../apiHelper.js';\r\nimport EditableSong from './song/EditableSong.js';\r\nimport InstrEdit from './InstrEdit.js';\r\nimport BlockEdit from './blockEdit/BlockEdit.js';\r\nimport Time from './time/Time.js';\r\n\r\nclass Editor extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tplaying: false,\r\n\t\t\terror: false,\r\n\t\t\tname: \"\",\r\n\t\t\tbpm: 120,\r\n\t\t\tkey: \"\",\r\n\t\t\tkeyType: \"\"\r\n\t\t};\r\n\t\tthis.keysArray = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"];\r\n\t\tthis.keyOptions = this.keysArray.map((key) => {\r\n\t\t\treturn (<option>{key}</option>);\r\n\t\t});\r\n\t\tthis.ready = false;\r\n\t\tthis.songId = props.match.params.id;\r\n\t\tif (this.songId === \"new\") {\r\n\t\t\tthis.song = new EditableSong();\r\n\t\t\tthis.song.load();\r\n\t\t\tthis.song.init();\r\n\t\t\tthis.ready = true;\r\n\t\t} else if (!(this.songId === undefined)) {\r\n\t\t\tAPIHelper.getSong(this.songId)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\treturn JSON.parse(res);\r\n\t\t\t\t})\r\n\t\t\t\t.then((parsed) => {\r\n\t\t\t\t\tthis.song = new EditableSong(parsed);\r\n\t\t\t\t\tthis.song.load(parsed);\r\n\t\t\t\t\tthis.song.init();\r\n\t\t\t\t\tthis.ready = true;\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tname: this.song.name,\r\n\t\t\t\t\t\tbpm: this.song.bpm,\r\n\t\t\t\t\t\tkey: this.song.freq,\r\n\t\t\t\t\t\tkeyType: this.song.keyType\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.forceUpdate();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tthis.state.error = true;\r\n\t\t\t\t\tthis.state.errComp = <h1> Could not load song: {err} </h1>;\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif(false && this.song && !this.ready)\r\n\t\t{\r\n\t\t\tthis.song.load(this.songMeta);\r\n\t\t\tthis.song.init();\r\n\t\t\tthis.ready = true;\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tscheduleButtonReset() {\r\n\t\tif (this.notificationTask)\r\n\t\t\tclearTimeout(this.notificationTask);\r\n\t\tthis.notificationTask = setTimeout(() => this.setState({saveBtn: null}), 2000);\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.notificationTask)\r\n\t\t\tclearTimeout(this.notificationTask);\r\n\t}\r\n\r\n\thandleToggle() {\r\n\t\tthis.setState(state => ({\r\n\t\t\tplaying: !state.playing\r\n\t\t}));\r\n\t\tif(this.state.playing) {\r\n\t\t\tthis.song.pause();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.song.play();\r\n\t\t}\r\n\t}\r\n\r\n\tonSave(evt) {\r\n\t\tevt.preventDefault();\r\n\t\tif (!this.song.name || this.song.name === '') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsaveBtn: 3\r\n\t\t\t});\r\n\t\t\tthis.scheduleButtonReset();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tsaveBtn: 1\r\n\t\t});\r\n\t\tthis.song.save().then(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsaveBtn: 2\r\n\t\t\t});\r\n\t\t\tthis.scheduleButtonReset();\r\n\t\t}).catch(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsaveBtn: 3\r\n\t\t\t});\r\n\t\t\tthis.scheduleButtonReset();\r\n\t\t});\r\n\t}\r\n\r\n\tonChange(evt) {\r\n\t\tlet newState = {};\r\n\t\tlet val = evt.target.value;\r\n\t\tswitch (evt.target.id) {\r\n\t\t\tcase \"name\":\r\n\t\t\t\tthis.song.setName(val);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bpm\":\r\n\t\t\t\tif (val !== \"\") {\r\n\t\t\t\t\tif (val < 1) {\r\n\t\t\t\t\t\tval = 1;\r\n\t\t\t\t\t} else if (val > 500) {\r\n\t\t\t\t\t\tval = 500;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.song.setBPM(val);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"keyType\":\r\n\t\t\t\tthis.song.setKey(this.state.key, val);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"key\":\r\n\t\t\t\tthis.song.setKey(val, this.state.keyType);\r\n\t\t}\r\n\t\tnewState[evt.target.id] = val;\r\n\t\tthis.setState(newState);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.state.error) {\r\n\t\t\treturn this.state.errComp;\r\n\t\t}\r\n\t\tif(!this.song || !this.ready) {\r\n\t\t\treturn ( <div> </div> );\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{'margin-top': '40px'}}>\r\n\t\t\t\t{!APIHelper.isLoggedIn() &&\r\n\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\tYou are not logged in, saving songs will not be possible! If you plan on making something awesome, login first!\r\n\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"editor\">\r\n\t\t\t\t\t<div className=\"editor-header\">\r\n\t\t\t\t\t    <span className=\"header-left\">\r\n\t\t\t\t\t\t    <i onClick={this.handleToggle.bind(this)}\r\n\t\t\t\t\t\t       className={\"fa \" + (this.state.playing ? \"fa-stop\" : \"fa-play\")}></i>\r\n\t\t\t\t\t\t    <div className=\"header-controls\">\r\n\t\t\t\t\t\t        <span>BPM </span>\r\n\t\t\t\t\t\t        <input value={this.state.bpm} id='bpm' onChange={evt => this.onChange(evt)} type=\"number\"/>\r\n\t\t\t\t\t\t        <span>Key </span>\r\n\t\t\t\t\t\t        <select id=\"key\" value={this.state.key} onChange={evt => this.onChange(evt)}>\r\n\t\t\t\t\t\t\t    {this.keyOptions}\r\n\t\t\t\t\t\t        </select>\r\n\t\t\t\t\t\t        <select onChange={evt => this.onChange(evt)} id=\"keyType\" value={this.state.keyType}>\r\n\t\t\t\t\t\t\t    <option>Maj</option>\r\n\t\t\t\t\t\t\t    <option>min</option>\r\n\t\t\t\t\t\t        </select>\r\n\t\t\t\t\t\t    </div>\r\n\t\t\t\t\t    </span>\r\n\t\t\t\t\t\t<div className=\"song-name\">\r\n\t\t\t\t\t\t\t<form onSubmit={(evt) => this.onSave(evt)}>\r\n\t\t\t\t\t\t\t\t<input required onChange={evt => this.onChange(evt)} value={this.state.name} id='name'\r\n\t\t\t\t\t\t\t\t       type='text' placeholder='untitled' className=\"name-input\"/>\r\n\t\t\t\t\t\t\t\t<input type='submit' style={{minWidth: '120px'}} value={this.state.saveBtn ? (this.state.saveBtn === 1 ? 'Loading...' : (this.state.saveBtn === 2 ? 'Saved!' : 'Failed!')) : 'Save'} disabled={!!this.state.saveBtn} className={'btn '+(!this.state.saveBtn ? 'btn-light' : this.state.saveBtn !== 3 ? 'btn-success' : 'btn-danger')}/>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<InstrEdit/>\r\n\t\t\t\t\t\t<BlockEdit block={this.song.activeBlock}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Time/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Editor;\r\n","import { Component } from 'react';\r\nimport React from \"react\";\r\nimport apiHelper from \"./apiHelper\";\r\n\r\nclass SongRating extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: undefined,\r\n\t\t\tuserValue: this.props.song.ratings ? this.props.song.ratings.currentUserRating : null\r\n\t\t};\r\n\t\tthis.value = this.props.song.ratings ? this.props.song.ratings.average : 0;\r\n\t}\r\n\tonMouseEnter(pos) {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: pos\r\n\t\t});\r\n\t}\r\n\tonMouseLeave() {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: undefined\r\n\t\t});\r\n\t}\r\n\tsetRating(rating) {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\trating = rating === this.state.userValue ? null : rating;\r\n\t\tapiHelper.rateSong(this.props.song.id, rating)\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tuserValue: rating\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\t// TODO implement properly\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst stars = [];\r\n\t\tfor (let i = 1; i <= 5; i++) {\r\n\t\t\tlet classes = \"star\";\r\n\t\t\tif (Math.ceil(this.props.value) >= i) {\r\n\t\t\t\tif (this.props.value < i) {\r\n\t\t\t\t\tclasses += \" half\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclasses += \" full\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.state.userValue && this.state.userValue >= i) {\r\n\t\t\t\tclasses += \" active\";\r\n\t\t\t}\r\n\t\t\tif (this.state.hover && this.state.hover >= i) {\r\n\t\t\t\tclasses += \" hover\";\r\n\t\t\t}\r\n\t\t\tstars.push(<div\r\n\t\t\t\tclassName={classes}\r\n\t\t\t\tonMouseEnter={this.onMouseEnter.bind(this, i)}\r\n\t\t\t\tonMouseLeave={this.onMouseLeave.bind(this)}\r\n\t\t\t\tonClick={this.setRating.bind(this, i)}>\r\n\t\t\t</div>);\r\n\t\t}\r\n\t\tlet classes = \"song-rating\"+(this.props.changeable ? \" changeable\" : \"\");\r\n\t\treturn (\r\n\t\t\t<div className={classes}>{stars}</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongRating;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongRating from './SongRating.js';\r\nimport constants from \"./constants\";\r\n\r\nclass SongPlayer extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect: false,\r\n\t\t\tto: \"\",\r\n\t\t\tplayBtn: \"play-btn\",\r\n\t\t\tplaying: false\r\n\t\t};\r\n\t\tthis.song = props.song;\r\n\t\tthis.song.addProgressListener(this, (pct) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tprogress: Math.floor(pct*100)+'%'\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tonEdit() {\r\n\t\tlet id = this.song.id || \"\";\r\n\t\tthis.setState({\r\n\t\t\tredirect: true,\r\n\t\t\tto: \"/editor/\" + id\r\n\t\t});\r\n\t}\r\n\r\n\tonPlayPause() {\r\n\t\tif (this.loading)\r\n\t\t\treturn;\r\n\t\tif (this.state.playing) {\r\n\t\t\tthis.setState({ playBtn: \"play-btn\", playing: false });\r\n\t\t\tthis.song.pause();\r\n\t\t} else {\r\n\t\t\tif (!this.song.loaded) {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tAPIHelper.getSong(this.song.id, 'composition')\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\treturn JSON.parse(data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((parsed) => {\r\n\t\t\t\t\t\tthis.song.load(parsed);\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\tthis.onPlayPause();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t// Could not play error\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ playBtn: \"pause-btn\", playing: true });\r\n\t\t\t\tthis.song.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.redirect) {\r\n\t\t\treturn <Redirect to={this.state.to} />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<li>\r\n\t\t\t\t<div className=\"song-header\" style={{background: '#007eff45'}}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button onClick={() => this.onPlayPause()} className={\"btn btn-light playback-btn \" + this.state.playBtn}></button>\r\n\t\t\t\t\t\t<div className=\"song-title\">{this.song.name}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{APIHelper.getCurrentUser() && APIHelper.getCurrentUser().username === this.song.username &&\r\n\t\t\t\t\t\t<div className=\"buttons-container\">\r\n\t\t\t\t\t\t\t<button onClick={()=> this.onEdit()} className=\"btn btn-light\"><i className=\"fa fa-pencil\"></i></button>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-light\"><i className=\"fa fa-trash\"></i></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<a href={constants.ROOT_PATH+'profile/'+this.song.username} className=\"song-artist\">\r\n\t\t\t\t\t\t\t<div className=\"name\">{this.song.author}</div>\r\n\t\t\t\t\t\t\t<div className=\"username\">@{this.song.username}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"play-progress\" style={{width: this.state.progress}}></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"song-body\">\r\n\t\t\t\t\t<SongRating song={this.song} changeable={APIHelper.isLoggedIn()} value={this.song.ratings ? this.song.ratings.average : 0} />\r\n\t\t\t\t\t<div className=\"song-dates\">\r\n\t\t\t\t\t\t<span className=\"song-creation-date\">Created {this.song.getFormattedCreate()}</span>\r\n\t\t\t\t\t\t<span className=\"song-update-date\">{\r\n\t\t\t\t\t\t\tthis.song.hasBeenUpdated() ? \"Updated \" + this.song.getFormattedUpdate() : \"\"\r\n\t\t\t\t\t\t}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongPlayer;\r\n","import React, { Component } from 'react';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongPlayer from './SongPlayer.js';\r\nimport Song from './editor/song/Song.js';\r\n\r\nclass SongList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.songs = [];\r\n\t\tthis.state = {\r\n\t\t\tloading: false\r\n\t\t};\r\n\t\tthis.loadMore();\r\n\t}\r\n\tloadMore() {\r\n\t\tif (this.state.loading)\r\n\t\t\treturn;\r\n\t\tthis.setState({loading: true});\r\n\t\tAPIHelper.getSongs(this.props.userId, this.props.popular, this.delimiterId || null)\r\n\t\t\t.then(songs => {\r\n\t\t\t\tthis.delimiterId = null;\r\n\t\t\t\tfor (const i in songs) {\r\n\t\t\t\t\tconst songData = songs[i];\r\n\t\t\t\t\tif (songData.hasOwnProperty('delimiterId')) {\r\n\t\t\t\t\t\tthis.delimiterId = songData.delimiterId;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.songs.push(<SongPlayer song={new Song(songData)} />);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({loading: false, loaded: true});\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\t// TODO\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.songs.length === 0 && this.state.loaded ?\r\n\t\t\t\t\t<p className=\"text-center\">Looks like there are no songs to display :(</p>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<ul className='song-list'>\r\n\t\t\t\t\t\t{this.songs}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t}\r\n\t\t\t\t{(this.state.loading || this.delimiterId) &&\r\n\t\t\t\t<div className=\"song-list-footer\">\r\n\t\t\t\t\t{!this.delimiterId ?\r\n\t\t\t\t\t\t<div className=\"loading\">Loading...</div>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<button className=\"btn btn-light load-more-btn\" disabled={this.state.loading} onClick={this.loadMore.bind(this)}>{this.state.loading ? 'Loading...' : 'Load More'}</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongList;\r\n","import React, { Component } from 'react';\r\nimport constant from './constants.js';\r\nimport SongList from \"./SongList\";\r\n\r\nclass Home extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.slide1 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide1.png)'\r\n\t\t};\r\n\t\tthis.slide2 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide2.png)'\r\n\t\t};\r\n\t\tthis.slide3 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide3.png)'\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div id=\"carouselExampleIndicators\" className=\"carousel slide\" data-ride=\"carousel\">\r\n\t\t\t\t\t\t<ol className=\"carousel-indicators\">\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" className=\"active\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>\r\n\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t\t<div className=\"carousel-inner\" role=\"listbox\">\r\n\t\t\t\t\t\t\t<div className=\"carousel-item active\" style={this.slide1}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Create 8-Bit Music in Just Minutes</h1>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light carousel-button\">View The Tutorial</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide2}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Perfect For Retro-Style Games</h1>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light carousel-button\">Listen To Example Songs</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide3}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Get Started With Our Free Chiptune Editor</h1>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light carousel-button\">Create a New Song</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<a className=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Previous</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<a className=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Next</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div className=\"container content\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-lg-9 col-md-8\">\r\n\t\t\t\t\t\t\t<h3>Popular Songs</h3>\r\n\t\t\t\t\t\t\t<SongList popular={true} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-lg-3 col-md-4\">\r\n\t\t\t\t\t\t\t<h3>About</h3>\r\n\t\t\t\t\t\t\t<p>Chip Share is a chiptune song editor right on your browser! It is developed using <a href=\"https://reactjs.org/\">ReactJS</a> as a front-end framework and <a href=\"https://expressjs.com/\">Express</a> back-end framework.</p>\r\n\t\t\t\t\t\t\t<p>The project is the result of a school project collectively developed by Jake, Carson, Mishel, and Alex at Ryerson University, Toronto, Canada.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport constants from \"./constants\";\r\n\r\nclass Login extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfieldErrors: {},\r\n\t\t\terror: null,\r\n\t\t\tredirect: null\r\n\t\t};\r\n\t}\r\n\tonSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.refs.username.value.length === 0 || this.refs.password.value.length === 0) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: null,\r\n\t\t\t\tfieldErrors: {\r\n\t\t\t\t\tusername: this.refs.username.value.length === 0 ? 'This field is required.' : null,\r\n\t\t\t\t\tpassword: this.refs.password.value.length === 0 ? 'This field is required.' : null\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst request = APIHelper.login(this.refs.username.value, this.refs.password.value);\r\n\t\tswitch (request.status) {\r\n\t\t\tcase 200:\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tredirect: constants.ROOT_PATH+'profile/'+this.refs.username.value.toLowerCase()\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 400:\r\n\t\t\t\tlet fieldErrors = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfieldErrors = JSON.parse(request.response).fieldErrors;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: null,\r\n\t\t\t\t\tfieldErrors: fieldErrors\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlet message = \"Unknown error occurred.\";\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmessage = JSON.parse(request.response).message;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: message.charAt(0).toUpperCase()+message.substring(1)+'.',\r\n\t\t\t\t\tfieldErrors: {}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\thideError(input) {\r\n\t\tconst fieldErrors = this.state.fieldErrors;\r\n\t\tdelete fieldErrors[input];\r\n\t\tthis.setState({\r\n\t\t\tfieldErrors: fieldErrors\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn this.state.redirect ? <Redirect to={this.state.redirect} /> :\r\n\t\t(\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-4 offset-lg-4 col-sm-6 offset-sm-3 col-10 offset-1\">\r\n\t\t\t\t\t\t<form onSubmit={(evt) => this.onSubmit(evt)} className=\"form-login\">\r\n\t\t\t\t\t\t\t<h1>Login</h1>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<input ref=\"username\" onChange={() => this.state.fieldErrors.username ? this.hideError('username') : {}} type=\"text\" className={'form-control'+(this.state.fieldErrors.username ? ' is-invalid' : '')} placeholder=\"Username\" />\r\n\t\t\t\t\t\t\t\t<div className=\"invalid-feedback\">{this.state.fieldErrors.username || ''}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<input ref=\"password\" onChange={() => this.state.fieldErrors.password ? this.hideError('password') : {}} type=\"password\" className={'form-control'+(this.state.fieldErrors.password ? ' is-invalid' : '')} placeholder=\"Password\" />\r\n\t\t\t\t\t\t\t\t<div className=\"invalid-feedback\">{this.state.fieldErrors.password || ''}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t{this.state.error &&\r\n\t\t\t\t\t\t\t\t<div style={{'margin': '-10px 0 5px'}}><small className=\"text-warning\">{this.state.error}</small></div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Login</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"register-prompt\">\r\n\t\t\t\t\t\t\t<h2>Don't have an account?</h2>\r\n\t\t\t\t\t\t\t<Link to=\"/register\">Register Here</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Login;\r\n","import React, { Component } from 'react';\r\n\r\nclass TextInput extends Component {\r\n\tgetValue() {\r\n\t\treturn this.refs.input.value;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<input ref=\"input\" name={this.props.name} onChange={() => this.props.fieldErrors[this.props.name] ? this.props.hideError(this.props.name) : {}} type={this.props.type || 'text'} className={'form-control'+(this.props.fieldErrors[this.props.name] ? ' is-invalid' : '')} placeholder={this.props.placeholder || ''} />\r\n\t\t\t\t<div className=\"invalid-feedback\">{this.props.fieldErrors[this.props.name] || ''}</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TextInput;","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport TextInput from \"./layout/TextInput\";\r\nimport constants from \"./constants\";\r\n\r\nclass Register extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfieldErrors: {},\r\n\t\t\terror: null,\r\n\t\t\tredirect: null,\r\n\t\t\tcaptcha: null\r\n\t\t};\r\n\t\tAPIHelper.getCaptcha()\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.captchaKey = response.captcha.key;\r\n\t\t\t\t//const captcha = new DOMParser().parseFromString(parsed.captcha.image, \"text/xml\").firstChild;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcaptcha: <div dangerouslySetInnerHTML={{__html: response.captcha.image}}></div>\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcaptcha: 'Failed to load!'\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t}\r\n\tonSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.ensureErrorCorrection && Object.keys(this.state.fieldErrors).length > 0)\r\n\t\t\treturn;\r\n\t\tconst inputData = {\r\n\t\t\tname: this.refs.name.getValue(),\r\n\t\t\tusername: this.refs.username.getValue(),\r\n\t\t\tpassword: this.refs.password.getValue(),\r\n\t\t\tcaptcha: this.refs.captcha.getValue()\r\n\t\t};\r\n\t\tlet clientError = false;\r\n\t\tfor (const key in inputData) {\r\n\t\t\tif (inputData[key].length === 0) {\r\n\t\t\t\tthis.state.fieldErrors[key] = 'This field is required.';\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t\tclientError = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.refs['repeat-password'].getValue() !== this.refs.password.getValue()) {\r\n\t\t\tthis.state.fieldErrors['repeat-password'] = 'Passwords do not match.';\r\n\t\t\tthis.forceUpdate();\r\n\t\t\tclientError = true;\r\n\t\t}\r\n\t\tif (clientError)\r\n\t\t\treturn;\r\n\t\tconst request = APIHelper.register(inputData, this.captchaKey);\r\n\t\tswitch (request.status) {\r\n\t\t\tcase 201:\r\n\t\t\t\tconst loginRequest = APIHelper.login(inputData.username, inputData.password);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tredirect: loginRequest.status === 200 ? constants.ROOT_PATH+'profile/'+inputData.username.toLowerCase() : constants.ROOT_PATH+'login'\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 400:\r\n\t\t\t\tlet fieldErrors = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst json = JSON.parse(request.response);\r\n\t\t\t\t\tfieldErrors = json.fieldErrors || {};\r\n\t\t\t\t\tif (json.captchaError)\r\n\t\t\t\t\t\tfieldErrors.captcha = json.captchaError\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: null,\r\n\t\t\t\t\tfieldErrors: fieldErrors\r\n\t\t\t\t});\r\n\t\t\t\tthis.ensureErrorCorrection = true;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlet message = \"Unknown error occurred.\";\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmessage = JSON.parse(request.response).message;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: message.charAt(0).toUpperCase()+message.substring(1)+'.',\r\n\t\t\t\t\tfieldErrors: {}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\thideError(input) {\r\n\t\tconst fieldErrors = this.state.fieldErrors;\r\n\t\tdelete fieldErrors[input];\r\n\t\tthis.setState({\r\n\t\t\tfieldErrors: fieldErrors\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn this.state.redirect ? <Redirect to={this.state.redirect} /> :\r\n\t\t(\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-4 offset-lg-4 col-sm-6 offset-sm-3 col-10 offset-1\">\r\n\t\t\t\t\t\t<form onSubmit={(evt) => this.onSubmit(evt)} className=\"form-login\">\r\n\t\t\t\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t\t\t\t<TextInput ref=\"name\" name=\"name\" placeholder=\"Name\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"username\" name=\"username\" placeholder=\"Username\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"password\" name=\"password\" type=\"password\" placeholder=\"Password\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"repeat-password\" name=\"repeat-password\" type=\"password\" placeholder=\"Repeat Password\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<div className=\"captcha-group\">\r\n\t\t\t\t\t\t\t\t<div className=\"captcha-container\">{this.state.captcha || 'Loading captcha...'}</div>\r\n\t\t\t\t\t\t\t\t<TextInput ref=\"captcha\" name=\"captcha\" placeholder=\"Captcha Answer\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Register</button>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"register-prompt\">\r\n\t\t\t\t\t\t\t<h2>Already have an account?</h2>\r\n\t\t\t\t\t\t\t<Link to=\"/login\">Login Here</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Register;\r\n","import React, { Component } from 'react';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongList from \"./SongList\";\r\n\r\nclass Profile extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tloading: true\r\n\t\t};\r\n\t\tif (this.props.match && this.props.match.params && this.props.match.params.username) {\r\n\t\t\tAPIHelper.fetchUser(this.props.match.params.username)\r\n\t\t\t\t.then(user => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\tuser: user\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tif (err.status === 404) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\t\tuser: null\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// TODO display error\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.state.loading = false;\r\n\t\t\tthis.state.user = null;\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.loading)\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"info-box\">\r\n\t\t\t\t\t<p>Loading...</p>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\telse\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-12 col-lg-8 offset-lg-2\">\r\n\t\t\t\t\t\t\t\t{!this.state.user ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"info-box\">\r\n\t\t\t\t\t\t\t\t\t\t<h1>User Not Found</h1>\r\n\t\t\t\t\t\t\t\t\t\t<p>This profile page does not exist.</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<h1 className=\"account-name\">{this.state.user.name}</h1>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"account-username\">@{this.state.user.username}</span>\r\n\t\t\t\t\t\t\t\t\t\t<SongList userId={this.state.user.id}/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n\r\nexport default Profile;\r\n","import React, { Component } from 'react';\n\nclass FrameworksPage extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col-12\">\n\t\t\t\t\t\t<h1>Frameworks</h1>\n\t\t\t\t\t\t<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Massa tincidunt dui ut ornare. Viverra aliquet eget sit amet tellus. Duis convallis convallis tellus id interdum velit laoreet.</p>\n\t\t\t\t\t\t<h2>Express</h2>\n\t\t\t\t\t\t<p>Risus feugiat in ante metus dictum. Semper feugiat nibh sed pulvinar. Cras semper auctor neque vitae tempus quam. Cras semper auctor neque vitae tempus quam pellentesque. Viverra justo nec ultrices dui sapien.</p>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>Express is one of the most supported Node.js frameworks. It has an open-source community.</li>\n\t\t\t\t\t\t\t<li>Express is well-documented.</li>\n\t\t\t\t\t\t\t<li>Express id easy to learn.</li>\n                                <li>The code organization in Express is represented by patterns that make your code easier to maintain.</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<p>Tristique magna sit amet purus gravida quis blandit. Odio tempor orci dapibus ultrices in iaculis nunc. Tempor commodo ullamcorper a lacus vestibulum sed arcu non odio.</p>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>If all the code is written in callbacks, it will entangle the code, and it will be hard to maintain.</li>\n\t\t\t\t\t\t\t<li>Drawback 2</li>\n\t\t\t\t\t\t\t<li>Drawback 3</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<h2>React</h2>\n\t\t\t\t\t\t<p>Risus feugiat in ante metus dictum. Semper feugiat nibh sed pulvinar. Cras semper auctor neque vitae tempus quam. Cras semper auctor neque vitae tempus quam pellentesque. Viverra justo nec ultrices dui sapien.</p>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>Virtual Document Object Model, that allows arranging documents in HTML format into a tree from which is better acceptable by web browsers while parsing different elements of the web app.</li>\n\t\t\t\t\t\t\t<li>100% open source JavaScript library which get everyday updates and improvements according to the contributions of developers all over the world.</li>\n                                <li>Light-weighted because the data performing on the user side can be easily represented on the server side simultaneously.</li>\n                                <li>Benefit 3</li>\n                                <li>Benefit 3</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<p>Tristique magna sit amet purus gravida quis blandit. Odio tempor orci dapibus ultrices in iaculis nunc. Tempor commodo ullamcorper a lacus vestibulum sed arcu non odio.</p>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>React JS requires deep knowledge</li>\n\t\t\t\t\t\t\t<li>Takes time to learn</li>\n\t\t\t\t\t\t\t<li>Drawback 3</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<a href=\"/assignment/installation\" className=\"btn btn-lg btn-primary\">Continue to Installation</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default FrameworksPage;","import React, { Component } from 'react';\r\n\r\nclass SongPlayer extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.song = props.song;\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <li>\r\n\t\t<div className=\"song-header\" style={{background: '#007eff45'}}>\r\n\t\t    <div>\r\n\t\t\t<button className=\"btn btn-light playback-btn play-btn\"></button>\r\n\t\t\t<div className=\"song-title\">{this.song.name}</div>\r\n\t\t    </div>\r\n\t\t    <div>\r\n\t\t\t<div className=\"buttons-container\">\r\n\t\t\t    <button className=\"btn btn-light\"><i className=\"fa fa-pencil\"></i></button>\r\n\t\t\t    <button className=\"btn btn-light\"><i className=\"fa fa-trash\"></i></button>\r\n\t\t\t</div>\r\n\t\t   \t<a className=\"song-artist\">\r\n\t\t\t    <div className=\"name\">{this.song.author}</div>\r\n\t\t\t    <div className=\"username\">@{this.song.username}</div>\r\n\t\t   \t</a>\r\n\t\t    </div>\r\n\t\t    <div className=\"play-progress\"></div>\r\n\t \t</div>\r\n\t\t<div className=\"song-body\">\r\n\t\t    <div className=\"song-dates\">\r\n\t\t\t<span className=\"song-creation-date\">Created {this.song.createDate}</span>\r\n\t\t    </div>\r\n\t\t</div>\r\n\t    </li>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default SongPlayer;\r\n","import React, { Component } from 'react';\r\nimport SongPlayer from './SongPlayer.js';\r\n\r\nclass TopSongs extends Component {\r\n    \r\n    constructor(props) {\r\n\tsuper(props);\r\n\t// React has a thing called state\r\n\t// When state changes the website will rerender\r\n\tthis.state = {\r\n\t    songs: [\r\n\t\t{\r\n\t\t    name: \"Paranoid Android\",\r\n\t\t    author: \"Thom Yorke\",\r\n\t\t    username: \"Radiohead\",\r\n\t\t    createDate: \"May 26 1997\"\r\n\t\t},\r\n\t\t{\r\n\t\t    name: \"Hey Jude\",\r\n\t\t    author: \"Paul McCartney\",\r\n\t\t    username: \"The Beatles\",\r\n\t\t    createDate: \"August 26 1968\"\r\n\t\t},\r\n\t\t{\r\n\t\t    name: \"Surfin USA\",\r\n\t\t    author: \"The Beach Boys\",\r\n\t\t    username: \"bboys\",\r\n\t\t    createDate: \"March 25 1963\"\r\n\t\t},\r\n\t\t{\r\n\t\t    name: \"The View From The Afternoon\",\r\n\t\t    author: \"Alex Turner\",\r\n\t\t    username: \"Arctic Monkeys\",\r\n\t\t    createDate: \"January 23 2006\"\r\n\t\t},\r\n\t\t{\r\n\t\t    name: \"Fur Elise\",\r\n\t\t    author: \"Ludwig van\",\r\n\t\t    username: \"Beethoven\",\r\n\t\t    createDate: \"April 27 1810\"\r\n\t\t}\r\n\t    ]\r\n\t}\r\n    }\r\n\r\n    render() {\r\n\t// We make an array of SongPlayers using our songs array\r\n\tvar songPlayers = this.state.songs.map(\r\n\t    /* The map function goes through each element\r\n\t       in the array and uses the function below to\r\n\t       transform it. The results are put into a new\r\n\t       array and returned. */\r\n\t    (song) => {\r\n\t\t// we make a SongPlayer component using each song\r\n\t\treturn <SongPlayer song={song} />;\r\n\t    }\r\n\t);\r\n\r\n\treturn (\r\n\t    <div className='container' style={{'marginTop': '40px'}}>\r\n\t\t<h3>Top Songs:</h3>\r\n\t\t<ul className='song-list'>\r\n\t\t    {songPlayers}\r\n\t\t</ul>\r\n\t    </div>\r\n\t);\r\n    }\r\n\r\n}\r\n\r\nexport default TopSongs;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './assignment.css';\r\nimport SongPlayer from './SongPlayer.js';\r\nimport TopSongs from './TopSongs.js';\r\nimport ThemedGist from 'react-themed-gist';\r\n\r\nclass TutorialPage extends Component {\r\n\tconstructor(props) {\r\n\t    super(props);\r\n\t    this.exampleSong = {\r\n\t\tname: \"Example Song\",\r\n\t\tauthor: \"Carson\",\r\n\t\tusername: \"500821516\",\r\n\t\tcreateDate: \"today\"\r\n\t    };\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Creating a page using React and Express:</h1>\r\n\r\n\t\t\t\t\t\t<p>For our demo website, we have created an online chiptune sharing application. You can create new songs, adapt from the songs of other users, or simply browse the site and rate the previously submitted songs. </p>\r\n\t\t\t\t\t\t<p>To keep this tutorial simple we will only explore the creation of a \"top songs\" page.</p>\r\n\t\t\t\t\t\t<h3>React: The Page Component</h3>\r\n\t\t\t\t\t\t<p>React allows you to split your code into reusable pieces called components.</p>\r\n\t\t\t\t\t\t<p>Start by creating a file, <span class='file'>TopSongs.js</span>. This file will contain a javascript class representing the \"top songs\" component for the website.</p>\r\n\t\t\t\t\t\t<ThemedGist id='fdfb1e28d651739e1bee56a2e8f16f3f' theme='one-dark'/>\r\n\t\t\t\t\t\t<p>Put some HTML in for the basic layout of the page.</p>\r\n\t\t\t\t\t\t<ThemedGist id='7afcaaf1eaec2d2a5a8ec4865121589a' theme='one-dark'/>\r\n\t\t\t\t\t\t<p>Cool! But we could have made that site without react. What we really want is something dynamic. A list of interactable songs made by people on chip-share.</p>\r\n\t\t\t\t\t\t<p>This can be accomplished by making a component for a single song and repeatedly displaying it for all of the top songs.</p>\r\n\t\t\t\t\t\t<h3>React: The SongPlayer Component</h3>\r\n\t\t\t\t\t\t<p>Create another file, <span class='file'>SongPlayer.js</span> that will represent a single song in the list.</p>\r\n\t\t\t\t\t\t<p>This component will receive an object representing the data of the song through a react property. We will call the property \"song\".</p>\r\n\t\t\t\t\t\t<p><span style={{ color: 'blue' }}>{\"{ }\"}</span> Curly brackets inside JSX let you evaluate javascript and have it display inside your HTML. We will use them to render information from our song.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"993cdfd3edee2174a4fb7f74bc97a29a\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>Here is the SongPlayer we just made:</p>\r\n\t\t\t\t\t\t<ul className=\"song-list\">\r\n\t\t\t\t\t\t    <SongPlayer song={this.exampleSong}/>\t\t\t\t\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<p>We will use it shortly.   :)</p>\r\n\t\t\t\t\t\t<h3>Express: Providing Songs From A Backend</h3>\r\n\t\t\t\t\t\t<p>We need to get the top songs from somewhere. Express is a server side framework that allows us to handle requests.</p>\r\n\t\t\t\t\t\t<p>We will use express to return a list of songs in JSON when the server receives a GET request to /api/songs</p>\r\n\t\t\t\t\t\t<p>Here is the boilerplate code for <span className=\"file\">Server.js</span></p>\r\n\t\t\t\t\t\t<ThemedGist id=\"4b9b3c79b4aa61dd2732775137afa37c\" theme=\"one-dark\"/>\t\r\n\t\t\t\t\t\t<p>Now lets make it return a list of songs.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"58726ed7a908c3882accfd3322554be6\" theme=\"one-dark\"/> \r\n\t\t\t\t\t\t<h3>Making The TopSongs Page Dynamic</h3>\r\n\t\t\t\t\t\t<p>Lets go back to our <span className=\"file\">TopSongs.js</span> file and import the SongPlayer component at the top.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"713b52c116d5e588bdfb129ed2a6e80d\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>Change the constructor to get songs from our Express server.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"9c3f430c7254859b8d82e453c828e5ad\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>Make it render a SongPlayer for each of our songs.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"f0f8c4a46af832c6d81af5ed0f09da3d\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>We're pretty much done. Just need to do the styles.</p>\r\n\t\t\t\t\t\t<h3>Styling The Songs List</h3>\r\n\t\t\t\t\t\t<p>To use stylesheets in react, we import them.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"a1c4efdbc5cca0041bc4540a42612c30\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>Here is <span className='file'>topsongs.css</span>.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"10fb179e4635750a1fe10443f5ed6e6a\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<h3>Tutorial Conclusion</h3>\r\n\t\t\t\t\t\t<p>We have now created a great looking page using React and Express.</p>\r\n\t\t\t\t\t\t<p>We encourage you to checkout both the page made with this tutorial and our actual site <a href=\"http://chipshare.me\">chipshare.me</a></p>\r\n\t\t\t\t\t\t<Link className=\"btn btn-lg btn-light\" style={{marginRight: '25px'}} to=\"/assignment/topsongs\">Tutorial Page (TopSongs)</Link>\r\n\t\t\t\t\t\t<a href=\"http://chipshare.me\" className=\"btn btn-lg btn-success\">Chip Share Homepage</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TutorialPage;\r\n","import React, { Component } from 'react';\r\n\r\nclass ConclusionPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Conclusion</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ConclusionPage;","import React, { Component } from 'react';\r\n\r\nclass InstallationPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Installing the Frameworks</h1>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<h2>React</h2>\r\n\t\t\t\t\t\t<h4>Node.js and npm</h4>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<p class=\"ao\">\r\n\t\t\t\t\t\t<img src=\"https://nodejs.org/static/images/logos/nodejs-new-pantone-white.png\" alt=\"Node.js\" class=\"right-float\" />\r\n\t\t\t\t\t\tNode.js is a free, open source <b>server environment</b> that can run JavaScript code on various operating systems. Since React is a JavaScript framework, its installation is required for server code execution. Node.js can create dynamic page content, modify files on a server, collect form data and modify data in your database.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tOn <b>Windows or Mac</b>, you can access the <a href=\"https://nodejs.org/en/download/\" target=\"_blank\">Node.js download page</a> and download the correct version of Node.js for your computer.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tOn <b>Linux</b> operating systems, first install a tool called curl if it is not already installed by typing:<br /><code>sudo apt-get install curl</code><br />then use curl to add Node.js to your repository list:<br /><code>curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -</code><br />Finally install Node.js by typing:<br /><code>sudo apt-get install -y nodejs</code>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tInstalling Node.js will also install npm, a <b>Software Registry</b> that installs code packages such as React.\r\n\t\t\t\t\t\t<br /><br />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<h4>Creating a React App</h4>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tThe easiest way to install React is by using  a command called <b>create-react-app</b>. Open a command prompt, and install create-react-app with npm by typing:<br /><code>npx create-react-app <b>my-app</b></code><br />In which you may <b>replace my-app with your app name</b>. This will create a project folder containing the required React files. You may then start your local server by typing:<br /><code>npm start</code>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tA webpage should open at the default port 3000. if it does not open, open a web browser and go to the url <b>localhost:3000</b>, or replace the number with the port number used to run the local server. The default webpage looks like this: \r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<img src=\"/assets/Installation1.png\" alt=\"React Default Page\" class=\"ins-img\"/>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<br />Congratulations! You have now created a dynamic webpage and hosted it on a local server. You may now edit the App.js template to turn your site into anything you want. \r\n\t\t\t\t\t\tYou can find the React docs <a href=\"https://reactjs.org/docs/getting-started.html\" target=\"_blank\">here</a> to learn how to use every tool at your disposal in order to create a dynamic webpage using the framework.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<h2>Express</h2>\r\n\t\t\t\t\t\t<img src=\"https://miro.medium.com/max/902/1*alZcSIb0lcN7gQIx2tJ_tg.png\" alt=\"Express.js\" class=\"right-float\" />\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tExpress is a fast, popular back-end framework for Node.js, so like React, Express requires you to install Node.js first (See: <b>React > Node.js and npm</b>).\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tThe installation process for Express is fast and easy. You must first change to your <b>project directory</b>, and run:<br /><code>npm init</code><br /> \r\n\t\t\t\t\t\tThe command will prompt the user to enter a number of fields, fill these out appropriately or you may also leave them blank for now by pressing the <b>return</b> key.\r\n\t\t\t\t\t\tTo install Express and <b>save it in the dependencies list</b>, type:<br /><code>install express --save</code><br />If you would not like to add it to the dependencies list, type:\r\n\t\t\t\t\t\t<br /><code>install express --no-save</code><br />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tAnd after those two simple steps, Express is already installed to your project directory. The API for express can be found   \r\n\t\t\t\t\t\t<a href=\"https://expressjs.com/en/4x/api.html\" target=\"_blank\"> here</a> to help you get started with your server-side features for your project.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<a href=\"/assignment/tutorial\" className=\"btn btn-lg btn-primary\">Continue to Tutorial</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default InstallationPage;\r\n","import React, { Component } from 'react';\r\nimport ScrollArea from 'react-scrollbar';\r\n\r\nclass CreditsPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Credits</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars2.githubusercontent.com/u/44684541?s=400\" />\r\n\t\t\t\t\t\t<h3>Alexander</h3>\r\n\t\t\t\t\t\t<a href=\"https://github.com/alxyaro\" title=\"Github Account\">github.com/alxyaro</a>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Created the entirety of the backend REST API for Chip Share.</li>\r\n\t\t\t\t\t\t\t\t<li>Implemented a token-based authorization system for user accounts.</li>\r\n\t\t\t\t\t\t\t\t<li>Developed a custom binary storage format for songs.</li>\r\n\t\t\t\t\t\t\t\t<li>Wrote up descriptive and fully encompassing documentation for the API.</li>\r\n\t\t\t\t\t\t\t\t<li>Designed the song players.</li>\r\n\t\t\t\t\t\t\t\t<li>Implemented a sequential-fetching song list.</li>\r\n\t\t\t\t\t\t\t\t<li>Designed and implemented the final login and registration pages.</li>\r\n\t\t\t\t\t\t\t\t<li>Fixed various song player & editor related issues.</li>\r\n\t\t\t\t\t\t\t\t<li>Set up an automatic fetching script for production builds of the application.</li>\r\n\t\t\t\t\t\t\t\t<li>Hosted the project.</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars3.githubusercontent.com/u/6993228?s=400\" />\r\n\t\t\t\t\t\t<h3>Carson</h3>\r\n\t\t\t\t\t\t<a href=\"https://github.com/versox\" title=\"Github Account\">github.com/versox</a>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent hash</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars2.githubusercontent.com/u/44612512?s=400\" />\r\n\t\t\t\t\t\t<h3>Jake</h3>\r\n\t\t\t\t\t\t<a href=\"https://github.com/briltz\" title=\"Github Account\">github.com/briltz</a>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent hash</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars0.githubusercontent.com/u/45542192?s=400\" />\r\n\t\t\t\t\t\t<h3>Mishel</h3>\r\n\t\t\t\t\t\t<a href=\"https://github.com/galperinmishel\" title=\"Github Account\">github.com/galperinmishel</a>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent hash</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CreditsPage;","import React, { Component } from 'react';\r\nimport constant from \"./constants\";\r\n\r\nclass MenuDropdown extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<li className='dropdown' onClick={this.toggleOpen}>\r\n\t\t\t\t<a href='#' className={'nav-link dropdown-toggle'} data-toggle=\"dropdown\">\r\n\t\t\t\t\t{this.props.item.title}\r\n\t\t\t\t</a>\r\n\t\t\t\t<div className={'dropdown-menu'}>\r\n\t\t\t\t\t{this.props.item.items.map((listItem) => {\r\n\t\t\t\t\t\treturn <a className=\"dropdown-item\" href={constant.ROOT_PATH+listItem.path}>{listItem.title}</a>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MenuDropdown;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport APIHelper from \"./apiHelper\";\r\nimport constants from \"./constants\";\r\n\r\nclass Logout extends Component {\r\n\trender() {\r\n\t\tAPIHelper.logout();\r\n\t\treturn <Redirect to={constants.ROOT_PATH} />\r\n\t}\r\n}\r\n\r\nexport default Logout;","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport Editor from './editor/Editor.js';\r\nimport Home from './Home.js';\r\nimport Login from './Login.js';\r\nimport Register from './Register.js';\r\nimport Profile from './Profile.js';\r\nimport constant from './constants.js';\r\nimport FrameworksPage from \"./assignment_pages/FrameworksPage\";\r\nimport TutorialPage from \"./assignment_pages/TutorialPage\";\r\nimport TopSongs from './assignment_pages/TopSongs.js';\r\nimport ConclusionPage from \"./assignment_pages/ConclusionPage\";\r\nimport InstallationPage from \"./assignment_pages/InstallationPage\";\r\nimport CreditsPage from \"./assignment_pages/CreditsPage\";\r\nimport MenuDropdown from \"./MenuDropdown\";\r\nimport APIHelper from './apiHelper';\r\nimport Logout from \"./Logout\";\r\n\r\nclass App extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.user = APIHelper.getCurrentUser();\r\n\t\tthis.menu = [\r\n\t\t\t{ title: \"Create\", path: \"editor/new\" },\r\n\t\t\t{ title: \"My Songs\", path: \"profile/\"+(this.user ? this.user.username : ''), userOnly: true },\r\n\t\t\t{ title: \"Assignment\", path: \"assignment\", items: [\r\n\t\t\t\t\t{ title: \"Frameworks\", path: \"assignment/frameworks\" },\r\n\t\t\t\t\t{ title: \"Installation\", path: \"assignment/installation\" },\r\n\t\t\t\t\t{ title: \"Tutorial\", path: \"assignment/tutorial\" },\r\n\t\t\t\t\t{ title: \"Conclusion\", path: \"assignment/conclusion\" }\r\n\t\t\t\t] },\r\n\t\t\t{ title: \"Credits\", path: \"credits\" }\r\n\t\t]\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet navBarItems = this.menu.map((menuItem) => {\r\n\t\t\tif (menuItem.userOnly && !this.user)\r\n\t\t\t\treturn;\r\n\t\t\tif (menuItem.path)\r\n\t\t\t\tmenuItem.path = constant.ROOT_PATH+menuItem.path;\r\n\t\t    return menuItem.items ? <MenuDropdown item={menuItem} /> : <li className={'nav-item'+(menuItem.items ? ' dropdown' : '')}>\r\n\t\t\t    <a href={menuItem.path || '#'} className={\"nav-link \"+(window.location.pathname === menuItem.path ? \"active\" : \"\")}>\r\n\t\t\t\t    {menuItem.title}\r\n\t\t\t    </a>\r\n\t\t    </li>;\r\n\t\t});\r\n\t\tconst UserMenu = () => {\r\n\t\t    const user = APIHelper.getCurrentUser();\r\n\t\t    return <ul className=\"navbar-nav ml-auto\">\r\n\t\t\t{!user ?\r\n\t\t\t(<a className=\"nav-link\" href={constant.ROOT_PATH + \"login\"}>Log In / Register</a>)\r\n\t\t\t    :\r\n\t\t\t(<li className=\"nav-item dropdown\">\r\n\t\t\t\t<a className=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\tLogged in as: {user.name}\r\n\t\t\t\t</a>\r\n\t\t\t\t<div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n\t\t\t\t\t<a className=\"dropdown-item\" href={constant.ROOT_PATH + \"logout\"}>Log Out</a>\r\n\t\t\t\t</div>\r\n\t\t\t</li>)}\r\n\t\t\t</ul>;\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Router basename={constant.ROOT_PATH}>\r\n\t\t\t\t    <div>\r\n\t\t\t\t\t\t<nav className=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\r\n\t\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t\t<a className=\"navbar-brand\" href={constant.ROOT_PATH}>Chip Share</a>\r\n\t\t\t\t\t\t\t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarResponsive\">\r\n\t\t\t\t\t\t\t\t\t<ul className=\"navbar-nav mr-auto\">\r\n\t\t\t\t\t\t\t\t\t\t{navBarItems}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t<Route path=\"/\" component={UserMenu} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t<Route path=\"/\" exact component={Home} />\r\n\t\t\t\t\t\t<Route path=\"/editor\" component={Editor} />\r\n\t\t\t\t\t\t<Route path=\"/editor/:id\" component={Editor} />\r\n\t\t\t\t\t\t<Route path=\"/login\" component={Login} />\r\n\t\t\t\t\t\t<Route path=\"/register\" component={Register} />\r\n\t\t\t\t\t\t<Route path=\"/profile/:username?\" component={Profile} />\r\n\t\t\t\t\t    <Route path=\"/assignment/frameworks\" component={FrameworksPage} />\r\n\t\t\t\t\t    <Route path=\"/assignment/installation\" component={InstallationPage} />\r\n\t\t\t\t\t    <Route path=\"/assignment/tutorial\" component={TutorialPage} />\r\n\t\t\t\t\t    <Route path=\"/assignment/topsongs\" component={TopSongs} />\r\n\t\t\t\t\t    <Route path=\"/assignment/conclusion\" component={ConclusionPage} />\r\n\t\t\t\t\t    <Route path=\"/credits\" component={CreditsPage} />\r\n\t\t\t\t\t    <Route path=\"/logout\" component={Logout} />\r\n\t\t\t\t    </div>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}