{"version":3,"sources":["constants.js","apiHelper.js","editor/song/Track.js","editor/song/Block.js","editor/song/Song.js","editor/song/EditableSong.js","editor/InstrEdit.js","editor/blockEdit/Tile.js","editor/blockEdit/Line.js","editor/blockEdit/BlockEdit.js","editor/time/Block.js","editor/time/Track.js","editor/Editor.js","editor/time/Time.js","SongRating.js","SongPlayer.js","SongList.js","Home.js","Login.js","layout/TextInput.js","Register.js","Profile.js","assignment_pages/FrameworksPage.js","assignment_pages/SongPlayer.js","assignment_pages/TopSongs.js","assignment_pages/TutorialPage.js","assignment_pages/ConclusionPage.js","assignment_pages/InstallationPage.js","assignment_pages/CreditsPage.js","MenuDropdown.js","Logout.js","App.js","serviceWorker.js","index.js"],"names":["constant","ROOT_PATH","getResponse","xhr","getResponseHeader","includes","JSON","parse","response","makeApiRequest","method","route","body","arguments","length","undefined","Promise","resolve","reject","XMLHttpRequest","open","token","Cookies","setRequestHeader","onload","this","status","request","onerror","stringify","send","apiHelper","getCaptcha","then","catch","err","register","inputData","captchaKey","req","captcha","answer","key","login","user","pass","username","password","res","name","toLowerCase","expires","refreshSecret","logout","createSongDirty","song","console","log","id","createSong","songData","updateSong","getSongsDirty","userId","url","getSongs","popular","delimiterId","params","str","encodeURIComponent","serializeParams","getSong","format","songPromise","onreadystatechange","readyState","rateSong","rating","fetchUser","isLoggedIn","getCurrentUser","e","Track","track","Object","classCallCheck","blocks","settings","typeId","metadata","types","dataValues","off","on","start","end","mid","convertFromData","data","block","i","dataLine","line","j","value","push","type","clickF","startF","endF","midF","Block","storedBlock","months","getFormattedDate","date","currentDate","Date","getDate","getMonth","getFullYear","totMin","Math","floor","hours","minutes","hourString","minuteString","Song","songMeta","tracks","bpm","blockLength","createDate","updateDate","author","ratings","setKey","loaded","progressListeners","freq","keyType","step","Tone","Frequency","transpose","synth","releaseAll","instruments","activeBlock","_this","Transport","cancel","PolySynth","Synth","toMaster","count","loop","Loop","time","triggerAttackRelease","triggerAttack","triggerRelease","initialized","init","loopEnd","progressTickEvent","scheduleRepeat","pct","seconds","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","keys","Symbol","iterator","next","done","return","bind","pauseTime","stop","clear","_this2","APIHelper","getSendableSong","promise","json","sendableSong","map","convertToData","abs","context","listener","EditableSong","possibleConstructorReturn","getPrototypeOf","call","selectedTrack","InstrEdit","react_default","a","createElement","Component","Tile","props","state","tile","event","dragger","active","forceUpdate","class","onMouseDown","onMouseUp","onMouseMove","Line","tiles","blockEdit_Tile","lineNum","BlockEdit","lines","blockEdit_Line","Template","remove","className","onClick","time_Block","Editor","playing","error","keysArray","keyOptions","ready","songId","match","load","parsed","setState","errComp","notificationTask","clearTimeout","setTimeout","saveBtn","pause","play","evt","_this3","preventDefault","scheduleButtonReset","save","newState","val","target","setName","setBPM","_this4","style","margin-top","role","handleToggle","onChange","onSubmit","onSave","required","placeholder","minWidth","disabled","editor_InstrEdit","blockEdit_BlockEdit","SongRating","hover","userValue","currentUserRating","average","pos","changeable","stars","classes","ceil","onMouseEnter","onMouseLeave","setRating","SongPlayer","redirect","to","playBtn","addProgressListener","assertThisInitialized","progress","loading","onPlayPause","Redirect","background","onEdit","href","constants","width","src_SongRating","getFormattedCreate","hasBeenUpdated","getFormattedUpdate","SongList","songs","loadMore","hasOwnProperty","src_SongPlayer","Home","slide1","backgroundImage","slide2","slide3","data-ride","data-target","data-slide-to","data-slide","aria-hidden","src_SongList","Link","Login","fieldErrors","refs","message","charAt","toUpperCase","substring","errors","input","ref","hideError","margin","TextInput","Register","dangerouslySetInnerHTML","__html","image","ensureErrorCorrection","getValue","clientError","loginRequest","captchaError","layout_TextInput","Profile","FrameworksPage","fontSize","marginBottom","TopSongs","songPlayers","assignment_pages_SongPlayer","marginTop","TutorialPage","exampleSong","dist_default","theme","color","marginRight","ConclusionPage","InstallationPage","src","alt","CreditsPage","scrollArea_default","horizontal","speed","MenuDropdown","toggleOpen","data-toggle","item","title","items","listItem","path","Logout","App","menu","userOnly","navBarItems","menuItem","src_MenuDropdown","window","location","pathname","BrowserRouter","basename","aria-controls","aria-expanded","aria-label","Route","component","aria-haspopup","aria-labelledby","exact","Boolean","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.5d218b15.chunk.js","sourcesContent":["const constant = {\r\n    ROOT_PATH: \"/\" \r\n}\r\n\r\nexport default constant;\r\n","import * as Cookies from 'js-cookie';\r\nimport constant from './constants.js';\r\n\r\nconst in30Minutes = 1/48;\r\n\r\nconst getResponse = (xhr) => {\r\n\tconst contentType = xhr.getResponseHeader(\"Content-Type\");\r\n\tif (contentType.includes(\"application/json\")) {\r\n\t\treturn JSON.parse(xhr.response);\r\n\t} else {\r\n\t\treturn xhr.response;\r\n\t}\r\n};\r\nconst makeApiRequest = (method, route, body = null) => {\r\n\treturn new Promise(function (resolve, reject) {\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.open(method, constant.ROOT_PATH + \"api/\" + route);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\txhr.setRequestHeader(\"Authorization\", token);\r\n\t\txhr.onload = function () {\r\n\t\t\tif (this.status >= 200 && this.status < 300) {\r\n\t\t\t\tresolve(xhr);\r\n\t\t\t} else {\r\n\t\t\t\treject({\r\n\t\t\t\t\tstatus: this.status,\r\n\t\t\t\t\trequest: xhr\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.onerror = function () {\r\n\t\t\treject({\r\n\t\t\t\tstatus: this.status,\r\n\t\t\t\trequest: xhr\r\n\t\t\t});\r\n\t\t};\r\n\t\tif (body != null && typeof body !== 'undefined') {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\tif (typeof body === 'object')\r\n\t\t\t\tbody = JSON.stringify(body);\r\n\t\t\txhr.send(body);\r\n\t\t} else\r\n\t\t\txhr.send();\r\n\t});\r\n};\r\nconst serializeParams = function(params) {\r\n\tlet str = \"\";\r\n\tfor (const key in params) {\r\n\t\tif (str !== \"\")\r\n\t\t\tstr += \"&\";\r\n\t\tstr += key + \"=\" + encodeURIComponent(params[key]);\r\n\t}\r\n\treturn str.length > 0 ? '?'+str : '';\r\n};\r\n\r\nconst apiHelper = {\r\n\tgetCaptcha: function() {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'user/register')\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tregister: function(inputData, captchaKey) {\r\n\t\tconst req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/register\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\tif (inputData.captcha) {\r\n\t\t\tinputData.captcha = {\r\n\t\t\t\tanswer: inputData.captcha,\r\n\t\t\t\tkey: captchaKey\r\n\t\t\t}\r\n\t\t}\r\n\t\treq.send(JSON.stringify(inputData));\r\n\t\treturn req;\r\n\t},\r\n\tlogin: function(user, pass) {\r\n\t\tconst req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/login\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\treq.send(JSON.stringify({\r\n\t\t\tusername: user,\r\n\t\t\tpassword: pass\r\n\t\t}));\r\n\t\tif (req.status === 200) {\r\n\t\t\tvar res = JSON.parse(req.response);\r\n\t\t\tCookies.set('user', JSON.stringify({name: res.name, username: user.toLowerCase()}) || \"unknown\", {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('token', res.token, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('secret', res.refreshSecret, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn req;\r\n\t},\r\n\tlogout: function() {\r\n\t\tCookies.remove('user');\r\n\t\tCookies.remove('token');\r\n\t\tCookies.remove('secret');\r\n\t},\r\n\tcreateSongDirty: function(song) {\r\n\t\tvar token = Cookies.get('token');\r\n\t\tif(!(token === undefined)) { // try !(!(!(!(!(!(!(!(token !== undefined)))))))) - alex\r\n\t\t\tvar req = new XMLHttpRequest();\r\n\t\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/songs/create\", false);\r\n\t\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\t\treq.send(JSON.stringify(song));\r\n\t\t\tconsole.log(req.response);\r\n\t\t\tif (req.status === 200) {\r\n\t\t\t\treturn req.response.id;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(\"not logged in!\");\r\n\t\t}\r\n\t},\r\n\tcreateSong: function(songData) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tmakeApiRequest('POST', 'songs/create', songData)\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch(reject);\r\n\t\t});\r\n\t},\r\n\tupdateSong: function(id, songData) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tmakeApiRequest('POST', 'songs/update/'+id, songData)\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch(reject);\r\n\t\t});\r\n\t},\r\n\tgetSongsDirty: function(userId) {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\tvar url;\r\n\t\tif(userId === undefined) {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs\";\r\n\t\t} else {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs/get?userId=\" + userId;\r\n\t\t}\r\n\t\treq.open(\"GET\", url, false);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\treq.send();\r\n\t\tif (req.status === 200) {\r\n\t\t\treturn JSON.parse(req.response);\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t},\r\n\tgetSongs: function(userId = null, popular = false, delimiterId = null) {\r\n\t\tconst params = {};\r\n\t\tif (userId) params.userId = userId;\r\n\t\tif (popular) params.popular = 1;\r\n\t\tif (delimiterId) params.delimiterId = delimiterId;\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'songs'+serializeParams(params))\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tgetSong: function(id, format = \"full\") {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\treq.open(\"GET\", constant.ROOT_PATH + \"api/songs/\" + id + \"/\" + format, true);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token && format === \"full\")\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\tvar songPromise = new Promise((resolve, reject) => {\r\n\t\t\treq.onreadystatechange = () => {\r\n\t\t\t\t// Done\r\n\t\t\t\tif (req.readyState === 4) {\r\n\t\t\t\t\t// Success\r\n\t\t\t\t\tif (req.status === 200) {\r\n\t\t\t\t\t\tresolve(req.response);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(req.response);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treq.send();\r\n\t\treturn songPromise;\r\n\t},\r\n\trateSong: function(id, rating = null) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('POST', 'songs/rate/'+id+(rating ? '/'+rating : ''))\r\n\t\t\t\t.then(() => resolve(true))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tfetchUser: function(username) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'user/fetch/'+username)\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tisLoggedIn: function() {\r\n\t\treturn !!Cookies.get('token');\r\n\t},\r\n\tgetCurrentUser: function() {\r\n\t\tif (!Cookies.get('token') || !Cookies.get('user')) return null;\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(Cookies.get('user'));\r\n\t\t} catch (e) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default apiHelper;\r\n","class Track {\r\n    constructor(track) {\r\n\tif (!track === undefined) {\r\n\t    this.track = track;\r\n\t} else {\r\n\t    this.track = {\r\n\t\tblocks: [\r\n\t\t    1\r\n\t\t],\r\n\t\tsettings: {\r\n\t\t    typeId: 1,\r\n\t\t    metadata: \"123ab\"\r\n\t\t}\r\n\t    }\r\n\t}\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","const types = ['off', 'on', 'start', 'end', 'mid'];\r\nconst dataValues = {\r\n    'off': 0, 'on': 1, 'start': 2, 'end': 3, 'mid': 4\r\n}\r\n\r\n// convert block from integer data\r\nvar convertFromData = (data, block) => {\r\n    for (let i = 0; i < data.length; i++)\r\n    {\r\n\tlet dataLine = data[i];\r\n\tlet line = [];\r\n\tfor (let j = 0; j < dataLine.length; j++)\r\n\t{\r\n\t    let value = dataLine[j];\r\n\t    line.push({\r\n\t\ttype: types[value],\r\n\t\tclickF: function() {\r\n\t\t    if(this.type === 'off')\r\n\t\t    {\r\n\t\t\tthis.type = 'on';\r\n\t\t    }\r\n\t\t    else\r\n\t\t    {\r\n\t\t\tthis.type = 'off';\r\n\t\t    }\r\n\t\t},\r\n\t\tstartF: function() {\r\n\t\t    this.type = 'start';\r\n\t\t},\r\n\t\tendF: function() {\r\n\t\t    this.type = 'end';\r\n\t\t},\r\n\t\tmidF: function() {\r\n\t\t    this.type = 'mid';\r\n\t\t}\t\r\n\t    });\r\n\t}\r\n\tblock.push(line);\r\n    }\r\n};\r\n\r\n// playable / editable block\r\nclass Block {\r\n    constructor(storedBlock) {\r\n\tthis.block = [];\r\n\tif (!(storedBlock === undefined)) {\r\n\t    // load block from data\r\n\t    convertFromData(storedBlock.data, this.block);\r\n\t} else {\r\n\t    // create blank block\r\n\t    for (let i = 0; i < 12; i++) {\r\n\t\tlet line = [];\r\n\t\tfor(let j = 0; j < 16; j++) {\r\n\t\t    line.push({\r\n\t\t\ttype: 'off',\r\n\t\t\tclickF: function() {\r\n\t\t\t    if(this.type === 'off')\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'on';\r\n\t\t\t    }\r\n\t\t\t    else\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'off';\r\n\t\t\t    }\r\n\t\t\t},\r\n\t\t\tstartF: function() {\r\n\t\t\t    this.type = 'start';\r\n\t\t\t},\r\n\t\t\tendF: function() {\r\n\t\t\t    this.type = 'end';\r\n\t\t\t},\r\n\t\t\tmidF: function() {\r\n\t\t\t    this.type = 'mid';\r\n\t\t\t}\r\n\t\t    });\r\n\t\t}\r\n\t\tthis.block.push(line);\r\n\t    }\r\n\t}\r\n    }\r\n\r\n    convertToData() {\r\n\tlet data = [];\r\n\tfor (let i = 0; i < this.block.length; i++) {\r\n\t    let line = this.block[i];\r\n\t    let dataLine = [];\r\n\t    for (let j = 0; j < line.length; j++) {\r\n\t\tlet value = line[j].type;\r\n\t\tdataLine.push(dataValues[value]);\r\n\t    }\r\n\t    data.push(dataLine);\r\n\t}\r\n\treturn data;\r\n    }\r\n}\r\n\r\nexport default Block;\r\n","import Tone from 'tone';\r\nimport APIHelper from '../../apiHelper.js'\r\nimport Track from './Track.js';\r\nimport Block from './Block.js';\r\n\r\nclass Song {\r\n\t// User: opening song, id of song\r\n\tconstructor(songMeta) {\r\n\t\tthis.blocks = [];\r\n\t\tthis.tracks = [];\r\n\t\tif (!(songMeta === undefined)) {\r\n\t\t\t// Song exist: Load meta\r\n\t\t\tthis.name = songMeta.name;\r\n\t\t\tthis.bpm = songMeta.bpm;\r\n\t\t\tthis.blockLength = songMeta.blockLength;\r\n\r\n\t\t\tthis.createDate = new Date(songMeta.createDate);\r\n\t\t\tthis.updateDate = songMeta.updateDate ? new Date(songMeta.updateDate) : null;\r\n\t\t\tthis.author = songMeta.user.name;\r\n\t\t\tthis.username = songMeta.user.username;\r\n\t\t\tthis.ratings = songMeta.ratings;\r\n\r\n\t\t\tthis.id = songMeta.id;\r\n\t\t} else {\r\n\t\t\t// Empty meta\r\n\t\t\tthis.name = \"awesome song\";\r\n\t\t\tthis.bpm = 120;\r\n\t\t\tthis.blockLength = 1;\r\n\t\t}\r\n\t\tthis.setKey();\r\n\t\tthis.loaded = false;\r\n\t\tthis.progressListeners = [];\r\n\t}\r\n\r\n\tsetKey(freq, type) {\r\n\t\tthis.freq = freq || \"C\";\r\n\t\tthis.keyType = type || \"Maj\";\r\n\t\tthis.key = [];\r\n\t\tthis.key[11] = (this.freq + \"3\");\r\n\t\tvar step = (type === \"Maj\") ?\r\n\t\t\t[2, 2, 1, 2, 2, 2, 1, 2, 2, 1, 2] :\r\n\t\t\t[2, 1, 2, 2, 1, 2, 2, 2, 1, 2, 2];\r\n\t\tfor (let i = 10, j = 0; i >= 0; i--, j++) {\r\n\t\t\tthis.key[i] = Tone.Frequency(this.key[i+1]).transpose(step[j]);\r\n\t\t}\r\n\t\tif (this.synth) this.synth.releaseAll();\r\n\t}\r\n\r\n\tload(songMeta) {\r\n\t\tthis.blocks.push(null);\r\n\t\tif(this.id === undefined || songMeta === undefined)\r\n\t\t{\r\n\t\t\t// Load empty song\r\n\t\t\tthis.blocks.push(new Block());\r\n\t\t\tthis.tracks.push(new Track());\r\n\t\t} else {\r\n\t\t\t// Load song from composition data\r\n\t\t\tfor (let i = 0; i < songMeta.instruments.length; i++) {\r\n\t\t\t\tthis.tracks.push(new Track(songMeta.instruments[i]));\r\n\t\t\t}\r\n\t\t\tfor (let i = 1; i <= this.blockLength; i++) {\r\n\t\t\t\tlet block = new Block(songMeta.blocks[i]);\r\n\t\t\t\tthis.blocks.push(block);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.activeBlock = this.blocks[1].block;\r\n\t\tthis.loaded = true;\r\n\t}\r\n\r\n\tinit() {\r\n\t\tTone.Transport.cancel();\r\n\t\tthis.synth = new Tone.PolySynth(6, Tone.Synth).toMaster();\r\n\t\tthis.count = 0;\r\n\t\tthis.loop = new Tone.Loop((time) => {\r\n\t\t\tfor (let i = 0; i < 12; i++) {\r\n\t\t\t\tswitch(this.activeBlock[i][this.count].type) {\r\n\t\t\t\t\tcase 'on':\r\n\t\t\t\t\t\tthis.synth.triggerAttackRelease(this.key[i], '16n', time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'start':\r\n\t\t\t\t\t\tthis.synth.triggerAttack(this.key[i], time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'end':\r\n\t\t\t\t\t\tthis.synth.triggerRelease(this.key[i], time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.count >= 15) {\r\n\t\t\t\tthis.count = 0;\r\n\t\t\t} else {\r\n\t\t\t\tthis.count++;\r\n\t\t\t}\r\n\t\t}, '16n');\r\n\t}\r\n\r\n\tplay() {\r\n\t\tif (!this.initialized) {\r\n\t\t\tthis.init();\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t\tTone.Transport.loopEnd = this.blockLength + \"m\";\r\n\t\tTone.Transport.loop = true;\r\n\t\tTone.Transport.bpm.value = this.bpm;\r\n\t\t//schedule an event on the 16th measure\r\n\t\tthis.progressTickEvent = Tone.Transport.scheduleRepeat(function(time) {\r\n\t\t\tconst pct = Tone.Transport.seconds/Tone.Transport.loopEnd;\r\n\t\t\tif (pct < 0 || pct > 1)\r\n\t\t\t\treturn;\r\n\t\t\tfor (const key of this.progressListeners.keys())\r\n\t\t\t\tthis.progressListeners[key](pct);\r\n\t\t\tconsole.log();\r\n\t\t}.bind(this), \"8i\");\r\n\t\tthis.loop.start(0);\r\n\t\tTone.Transport.start();\r\n\t\tif (this.pauseTime)\r\n\t\t\tTone.Transport.seconds = this.pauseTime;\r\n\t}\r\n\r\n\tpause() {\r\n\t\tthis.pauseTime = Tone.Transport.seconds;\r\n\t\tthis.loop.stop(0);\r\n\t\tTone.Transport.stop();\r\n\t\tthis.synth.releaseAll();\r\n\t\tTone.Transport.clear(this.progressTickEvent);\r\n\t}\r\n\r\n\tsave() {\r\n\t\tif (!this.id) {\r\n\t\t\t// create new song and get id\r\n\t\t\tconst promise = APIHelper.createSong(this.getSendableSong());\r\n\t\t\tpromise.then((xhr) => {\r\n\t\t\t\tconst json = JSON.parse(xhr.response);\r\n\t\t\t\tthis.id = json.id;\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t} else {\r\n\t\t\t// update song\r\n\t\t\treturn APIHelper.updateSong(this.id, this.getSendableSong());\r\n\t\t}\r\n\t}\r\n\r\n\tgetSendableSong()\r\n\t{\r\n\t\tvar sendableSong = {\r\n\t\t\tname: this.name,\r\n\t\t\tbpm: this.bpm,\r\n\t\t\tblockLength: this.blockLength,\r\n\t\t\tinstruments: this.tracks.map((track) => {\r\n\t\t\t\treturn track.track;\r\n\t\t\t}),\r\n\t\t\tblocks: {}\r\n\t\t};\r\n\t\tfor(let i = 1; i <= (this.blocks.length - 1); i++) {\r\n\t\t\tsendableSong.blocks[i] = {\r\n\t\t\t\tdata: this.blocks[i].convertToData()\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn sendableSong;\r\n\t}\r\n\r\n\tgetFormattedCreate() {\r\n\t\treturn getFormattedDate(this.createDate);\r\n\t}\r\n\r\n\tgetFormattedUpdate() {\r\n\t\treturn getFormattedDate(this.updateDate);\r\n\t}\r\n\r\n\thasBeenUpdated() {\r\n\t\treturn this.updateDate && Math.abs(this.createDate - this.updateDate) >= 50;\r\n\t}\r\n\taddProgressListener(context, listener) {\r\n\t\tthis.progressListeners.push(listener.bind(context));\r\n\t}\r\n\tgetId() {\r\n\t\treturn this.id ? this.id : null;\r\n\t}\r\n}\r\n\r\nconst months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\r\nfunction getFormattedDate(date) {\r\n\tvar currentDate = new Date();\r\n\t// same day\r\n\tif(currentDate.getDate() === date.getDate()\r\n\t\t&& currentDate.getMonth() === date.getMonth()\r\n\t\t&& currentDate.getFullYear() === date.getFullYear())\r\n\t{\r\n\t\tlet totMin = Math.floor((currentDate - date) / 60000);\r\n\t\tlet hours = Math.floor(totMin / 60);\r\n\t\tlet minutes = totMin % 60;\r\n\t\tlet hourString = \"hour\";\r\n\t\tif(hours > 1) hourString += \"s\";\r\n\t\tif(minutes === 0)\r\n\t\t{\r\n\t\t\treturn hours + \" \" + hourString + \"  ago\";\r\n\t\t}\r\n\t\tlet minuteString = \"minute\";\r\n\t\tif(minutes > 1) minuteString += \"s\";\r\n\t\tif(hours === 0)\r\n\t\t{\r\n\t\t\treturn minutes + \" \" + minuteString + \" ago\";\r\n\t\t}\r\n\t\treturn hours + \" \" + hourString + \" and \" + minutes + \" \" + minuteString + \" ago\";\r\n\t}\r\n\treturn months[date.getMonth()] + \" \" + date.getDate() + \", \" + date.getFullYear();\r\n}\r\n\r\nexport default Song;\r\n","import Tone from 'tone';\r\nimport Song from './Song.js';\r\n\r\nclass EditableSong extends Song {\r\n    constructor(songMeta) {\r\n\tsuper(songMeta);\r\n\tthis.selectedTrack = 0;\r\n    }\r\n\r\n    addTrack() {\r\n\t\r\n    }\r\n\r\n    setName(name) {\r\n\tthis.name = name;\r\n    }\r\n\r\n    setBPM(bpm) {\r\n\tthis.bpm = bpm;\r\n\tTone.Transport.bpm.value = this.bpm;\r\n    }\r\n}\r\n\r\nexport default EditableSong;\r\n","import React, { Component }  from 'react';\r\n\r\nclass InstrEdit extends Component {\r\n    render(params) {\r\n\treturn (\r\n\t    <div id='instrEdit'>\r\n\t\t<span>Instrument </span>\r\n\t\t<select>\r\n\t\t    <option>Instrument 1</option>\r\n\t\t    <option>Instrument 2</option>\r\n\t\t    <option>Instrument 3</option>\r\n\t\t</select>\r\n\t\t<br />\r\n\t\t<span>Drive </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 2 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 3 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default InstrEdit;\r\n","import React, { Component } from 'react';\r\n\r\nclass Tile extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.state = props.tile;\r\n    }\r\n\r\n    onMouseMove(event) {\r\n    }\r\n\r\n    onMouseDown(event) {\r\n\tthis.props.dragger.active = this.props.line;\r\n\tthis.props.dragger.start = this;\r\n\t//this.state.startF();\r\n\t//this.forceUpdate();\r\n    }\r\n\r\n    onMouseUp(event) {\r\n\tif(this.props.line === this.props.dragger.active)\r\n\t{\r\n\t    if(this.props.dragger.start === this)\r\n\t    {\r\n\t\tthis.state.clickF();\r\n\t    }\r\n\t    else\r\n\t    {\r\n\t\tthis.props.dragger.start.state.startF();\r\n\t\tthis.props.dragger.start.forceUpdate();\r\n\t\tthis.state.endF();\r\n\t    }\r\n\t    this.forceUpdate();\r\n\t}\r\n\tthis.props.dragger.active = null;\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div\r\n\t\tclass={\"tile \" + (this.state.type)}\r\n\t\tonMouseDown={this.onMouseDown.bind(this)}\r\n\t\tonMouseUp={this.onMouseUp.bind(this)}\r\n\t\tonMouseMove={this.onMouseMove.bind(this)}\r\n\t\t>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Tile;\r\n","import React, { Component } from 'react';\r\nimport Tile from './Tile.js';\r\n\r\nclass Line extends Component {\r\n    render() {\r\n\tlet tiles = [];\r\n\tfor(let i = 0; i < 16; i++)\r\n\t{\r\n\t    tiles.push(<Tile tile={this.props.line[i]} line={this.props.lineNum} dragger={this.props.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div class='line'>\r\n\t\t{tiles}\t\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Line;\r\n","import React, { Component } from 'react';\r\n\r\nimport Line from './Line.js';\r\n\r\nclass BlockEdit extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.dragger = {\r\n\t    active: -1,\r\n\t    start: null\r\n\t}\r\n    }\r\n    \r\n    render() {\r\n\tlet lines = [];\r\n\tfor(let i = 0; i < 12; i ++)\r\n\t{\r\n\t    lines.push(<Line line={this.props.block[i]} lineNum={i} dragger={this.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div id='blockEdit'>\r\n\t\t{lines}\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default BlockEdit;\r\n","import React, { Component } from 'react';\r\n\r\nclass Template extends Component {\r\n    render() {\r\n\treturn (\r\n\t    <div>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Template;\r\n","import React, { Component } from 'react';\r\nimport Block from './Block.js';\r\n\r\nclass Track extends Component {\r\n\r\n\r\n    remove() {\r\n\tthis.props.remove(this);\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div className=\"track\">\r\n\t\t<h1 onClick={this.remove.bind(this)}>{this.props.id}</h1>\r\n\t\t<Block />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","import React, { Component } from 'react';\r\nimport './editor.css';\r\nimport './awesome.css';\r\nimport APIHelper from '../apiHelper.js';\r\nimport EditableSong from './song/EditableSong.js';\r\nimport InstrEdit from './InstrEdit.js';\r\nimport BlockEdit from './blockEdit/BlockEdit.js';\r\nimport Time from './time/Time.js';\r\n\r\nclass Editor extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tplaying: false,\r\n\t\t\terror: false,\r\n\t\t\tname: \"\",\r\n\t\t\tbpm: 120,\r\n\t\t\tkey: \"\",\r\n\t\t\tkeyType: \"\"\r\n\t\t};\r\n\t\tthis.keysArray = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"];\r\n\t\tthis.keyOptions = this.keysArray.map((key) => {\r\n\t\t\treturn (<option>{key}</option>);\r\n\t\t});\r\n\t\tthis.ready = false;\r\n\t\tthis.songId = props.match.params.id;\r\n\t\tif (this.songId === \"new\") {\r\n\t\t\tthis.song = new EditableSong();\r\n\t\t\tthis.song.load();\r\n\t\t\tthis.song.init();\r\n\t\t\tthis.ready = true;\r\n\t\t} else if (!(this.songId === undefined)) {\r\n\t\t\tAPIHelper.getSong(this.songId)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\treturn JSON.parse(res);\r\n\t\t\t\t})\r\n\t\t\t\t.then((parsed) => {\r\n\t\t\t\t\tthis.song = new EditableSong(parsed);\r\n\t\t\t\t\tthis.song.load(parsed);\r\n\t\t\t\t\tthis.song.init();\r\n\t\t\t\t\tthis.ready = true;\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tname: this.song.name,\r\n\t\t\t\t\t\tbpm: this.song.bpm,\r\n\t\t\t\t\t\tkey: this.song.freq,\r\n\t\t\t\t\t\tkeyType: this.song.keyType\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.forceUpdate();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tthis.state.error = true;\r\n\t\t\t\t\tthis.state.errComp = <h1> Could not load song: {err} </h1>;\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif(false && this.song && !this.ready)\r\n\t\t{\r\n\t\t\tthis.song.load(this.songMeta);\r\n\t\t\tthis.song.init();\r\n\t\t\tthis.ready = true;\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tscheduleButtonReset() {\r\n\t\tif (this.notificationTask)\r\n\t\t\tclearTimeout(this.notificationTask);\r\n\t\tthis.notificationTask = setTimeout(() => this.setState({saveBtn: null}), 2000);\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.notificationTask)\r\n\t\t\tclearTimeout(this.notificationTask);\r\n\t}\r\n\r\n\thandleToggle() {\r\n\t\tthis.setState(state => ({\r\n\t\t\tplaying: !state.playing\r\n\t\t}));\r\n\t\tif(this.state.playing) {\r\n\t\t\tthis.song.pause();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.song.play();\r\n\t\t}\r\n\t}\r\n\r\n\tonSave(evt) {\r\n\t\tevt.preventDefault();\r\n\t\tif (!this.song.name || this.song.name === '') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsaveBtn: 3\r\n\t\t\t});\r\n\t\t\tthis.scheduleButtonReset();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tsaveBtn: 1\r\n\t\t});\r\n\t\tthis.song.save().then(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsaveBtn: 2\r\n\t\t\t});\r\n\t\t\tthis.scheduleButtonReset();\r\n\t\t}).catch(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsaveBtn: 3\r\n\t\t\t});\r\n\t\t\tthis.scheduleButtonReset();\r\n\t\t});\r\n\t}\r\n\r\n\tonChange(evt) {\r\n\t\tlet newState = {};\r\n\t\tlet val = evt.target.value;\r\n\t\tswitch (evt.target.id) {\r\n\t\t\tcase \"name\":\r\n\t\t\t\tthis.song.setName(val);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bpm\":\r\n\t\t\t\tif (val !== \"\") {\r\n\t\t\t\t\tif (val < 1) {\r\n\t\t\t\t\t\tval = 1;\r\n\t\t\t\t\t} else if (val > 500) {\r\n\t\t\t\t\t\tval = 500;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.song.setBPM(val);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"keyType\":\r\n\t\t\t\tthis.song.setKey(this.state.key, val);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"key\":\r\n\t\t\t\tthis.song.setKey(val, this.state.keyType);\r\n\t\t}\r\n\t\tnewState[evt.target.id] = val;\r\n\t\tthis.setState(newState);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.state.error) {\r\n\t\t\treturn this.state.errComp;\r\n\t\t}\r\n\t\tif(!this.song || !this.ready) {\r\n\t\t\treturn ( <div> </div> );\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"container econtainer\" style={{'margin-top': '40px'}}>\r\n\t\t\t\t{!APIHelper.isLoggedIn() &&\r\n\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\tYou are not logged in, saving songs will not be possible! If you plan on making something awesome, login first!\r\n\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"editor\">\r\n\t\t\t\t\t<div className=\"editor-header\">\r\n\t\t\t\t\t    <span className=\"header-left\">\r\n\t\t\t\t\t\t    <i onClick={this.handleToggle.bind(this)}\r\n\t\t\t\t\t\t       className={\"fa \" + (this.state.playing ? \"fa-stop\" : \"fa-play\")}></i>\r\n\t\t\t\t\t\t    <div className=\"header-controls\">\r\n\t\t\t\t\t\t        <span>BPM </span>\r\n\t\t\t\t\t\t        <input value={this.state.bpm} id='bpm' onChange={evt => this.onChange(evt)} type=\"number\"/>\r\n\t\t\t\t\t\t        <span>Key </span>\r\n\t\t\t\t\t\t        <select id=\"key\" value={this.state.key} onChange={evt => this.onChange(evt)}>\r\n\t\t\t\t\t\t\t    {this.keyOptions}\r\n\t\t\t\t\t\t        </select>\r\n\t\t\t\t\t\t        <select onChange={evt => this.onChange(evt)} id=\"keyType\" value={this.state.keyType}>\r\n\t\t\t\t\t\t\t    <option>Maj</option>\r\n\t\t\t\t\t\t\t    <option>min</option>\r\n\t\t\t\t\t\t        </select>\r\n\t\t\t\t\t\t    </div>\r\n\t\t\t\t\t    </span>\r\n\t\t\t\t\t\t<div className=\"song-name\">\r\n\t\t\t\t\t\t\t<form onSubmit={(evt) => this.onSave(evt)}>\r\n\t\t\t\t\t\t\t\t<input required onChange={evt => this.onChange(evt)} value={this.state.name} id='name'\r\n\t\t\t\t\t\t\t\t       type='text' placeholder='untitled' className=\"name-input\"/>\r\n\t\t\t\t\t\t\t\t<input type='submit' style={{minWidth: '120px'}} value={this.state.saveBtn ? (this.state.saveBtn === 1 ? 'Loading...' : (this.state.saveBtn === 2 ? 'Saved!' : 'Failed!')) : 'Save'} disabled={!!this.state.saveBtn} className={'btn '+(!this.state.saveBtn ? 'btn-light' : this.state.saveBtn !== 3 ? 'btn-success' : 'btn-danger')}/>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<InstrEdit/>\r\n\t\t\t\t\t\t<BlockEdit block={this.song.activeBlock}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br/><br/><br/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Editor;\r\n","import React, { Component } from 'react';\r\nimport Track from './Track.js';\r\n\r\nclass Time extends Component {\r\n    constructor(props)\r\n    {\r\n\tsuper(props);\r\n\tthis.id = 1;\r\n\tthis.state = {\r\n\t    tracks: [<Track id='0' remove={this.removeTrack.bind(this)} />]\r\n\t}\r\n\tthis.offset = 0;\r\n    }\r\n\r\n    addTrack()\r\n    {\r\n\tvar copy = this.state.tracks.slice(0);\r\n\tcopy.push(<Track id={this.id} remove={this.removeTrack.bind(this)}/>);\r\n\tthis.setState(state => ({\r\n\t    tracks: copy\r\n\t}));\r\n\tthis.id++;\r\n    }\r\n\r\n    removeTrack(me)\r\n    {\r\n\tthis.setState(state => ({\r\n\t    tracks: state.tracks.filter(function(value) {\r\n\t\treturn !(me.props.id === value.props.id);\r\n\t    })\r\n\t}));\r\n    }\r\n\r\n    render()\r\n    {\r\n\treturn (\r\n\t    <div>\r\n\t\t{this.state.tracks}\r\n\t\t<h1 onClick={this.addTrack.bind(this)}>Create track</h1>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Time;\r\n","import { Component } from 'react';\r\nimport React from \"react\";\r\nimport apiHelper from \"./apiHelper\";\r\n\r\nclass SongRating extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: undefined,\r\n\t\t\tuserValue: this.props.song.ratings ? this.props.song.ratings.currentUserRating : null\r\n\t\t};\r\n\t\tthis.value = this.props.song.ratings ? this.props.song.ratings.average : 0;\r\n\t}\r\n\tonMouseEnter(pos) {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: pos\r\n\t\t});\r\n\t}\r\n\tonMouseLeave() {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: undefined\r\n\t\t});\r\n\t}\r\n\tsetRating(rating) {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\trating = rating === this.state.userValue ? null : rating;\r\n\t\tapiHelper.rateSong(this.props.song.id, rating)\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tuserValue: rating\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\t// TODO implement properly\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst stars = [];\r\n\t\tfor (let i = 1; i <= 5; i++) {\r\n\t\t\tlet classes = \"star\";\r\n\t\t\tif (Math.ceil(this.props.value) >= i) {\r\n\t\t\t\tif (this.props.value < i) {\r\n\t\t\t\t\tclasses += \" half\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclasses += \" full\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.state.userValue && this.state.userValue >= i) {\r\n\t\t\t\tclasses += \" active\";\r\n\t\t\t}\r\n\t\t\tif (this.state.hover && this.state.hover >= i) {\r\n\t\t\t\tclasses += \" hover\";\r\n\t\t\t}\r\n\t\t\tstars.push(<div\r\n\t\t\t\tclassName={classes}\r\n\t\t\t\tonMouseEnter={this.onMouseEnter.bind(this, i)}\r\n\t\t\t\tonMouseLeave={this.onMouseLeave.bind(this)}\r\n\t\t\t\tonClick={this.setRating.bind(this, i)}>\r\n\t\t\t</div>);\r\n\t\t}\r\n\t\tlet classes = \"song-rating\"+(this.props.changeable ? \" changeable\" : \"\");\r\n\t\treturn (\r\n\t\t\t<div className={classes}>{stars}</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongRating;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongRating from './SongRating.js';\r\nimport constants from \"./constants\";\r\n\r\nclass SongPlayer extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect: false,\r\n\t\t\tto: \"\",\r\n\t\t\tplayBtn: \"play-btn\",\r\n\t\t\tplaying: false\r\n\t\t};\r\n\t\tthis.song = props.song;\r\n\t\tthis.song.addProgressListener(this, (pct) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tprogress: Math.floor(pct*100)+'%'\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tonEdit() {\r\n\t\tlet id = this.song.id || \"\";\r\n\t\tthis.setState({\r\n\t\t\tredirect: true,\r\n\t\t\tto: \"/editor/\" + id\r\n\t\t});\r\n\t}\r\n\r\n\tonPlayPause() {\r\n\t\tif (this.loading)\r\n\t\t\treturn;\r\n\t\tif (this.state.playing) {\r\n\t\t\tthis.setState({ playBtn: \"play-btn\", playing: false });\r\n\t\t\tthis.song.pause();\r\n\t\t} else {\r\n\t\t\tif (!this.song.loaded) {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tAPIHelper.getSong(this.song.id, 'composition')\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\treturn JSON.parse(data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((parsed) => {\r\n\t\t\t\t\t\tthis.song.load(parsed);\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\tthis.onPlayPause();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t// Could not play error\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ playBtn: \"pause-btn\", playing: true });\r\n\t\t\t\tthis.song.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.redirect) {\r\n\t\t\treturn <Redirect to={this.state.to} />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<li>\r\n\t\t\t\t<div className=\"song-header\" style={{background: '#007eff45'}}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button onClick={() => this.onPlayPause()} className={\"btn btn-light playback-btn \" + this.state.playBtn}></button>\r\n\t\t\t\t\t\t<div className=\"song-title\">{this.song.name}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{APIHelper.getCurrentUser() && APIHelper.getCurrentUser().username === this.song.username &&\r\n\t\t\t\t\t\t<div className=\"buttons-container\">\r\n\t\t\t\t\t\t\t<button onClick={()=> this.onEdit()} className=\"btn btn-light\"><i className=\"fa fa-pencil\"></i></button>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-light\"><i className=\"fa fa-trash\"></i></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<a href={constants.ROOT_PATH+'profile/'+this.song.username} className=\"song-artist\">\r\n\t\t\t\t\t\t\t<div className=\"name\">{this.song.author}</div>\r\n\t\t\t\t\t\t\t<div className=\"username\">@{this.song.username}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"play-progress\" style={{width: this.state.progress}}></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"song-body\">\r\n\t\t\t\t\t<SongRating song={this.song} changeable={APIHelper.isLoggedIn()} value={this.song.ratings ? this.song.ratings.average : 0} />\r\n\t\t\t\t\t<div className=\"song-dates\">\r\n\t\t\t\t\t\t<span className=\"song-creation-date\">Created {this.song.getFormattedCreate()}</span>\r\n\t\t\t\t\t\t<span className=\"song-update-date\">{\r\n\t\t\t\t\t\t\tthis.song.hasBeenUpdated() ? \"Updated \" + this.song.getFormattedUpdate() : \"\"\r\n\t\t\t\t\t\t}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongPlayer;\r\n","import React, { Component } from 'react';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongPlayer from './SongPlayer.js';\r\nimport Song from './editor/song/Song.js';\r\n\r\nclass SongList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.songs = [];\r\n\t\tthis.state = {\r\n\t\t\tloading: false\r\n\t\t};\r\n\t\tthis.loadMore();\r\n\t}\r\n\tloadMore() {\r\n\t\tif (this.state.loading)\r\n\t\t\treturn;\r\n\t\tthis.setState({loading: true});\r\n\t\tAPIHelper.getSongs(this.props.userId, this.props.popular, this.delimiterId || null)\r\n\t\t\t.then(songs => {\r\n\t\t\t\tthis.delimiterId = null;\r\n\t\t\t\tfor (const i in songs) {\r\n\t\t\t\t\tconst songData = songs[i];\r\n\t\t\t\t\tif (songData.hasOwnProperty('delimiterId')) {\r\n\t\t\t\t\t\tthis.delimiterId = songData.delimiterId;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.songs.push(<SongPlayer song={new Song(songData)} />);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({loading: false, loaded: true});\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\t// TODO\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.songs.length === 0 && this.state.loaded ?\r\n\t\t\t\t\t<p className=\"text-center\">Looks like there are no songs to display :(</p>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<ul className='song-list'>\r\n\t\t\t\t\t\t{this.songs}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t}\r\n\t\t\t\t{(this.state.loading || this.delimiterId) &&\r\n\t\t\t\t<div className=\"song-list-footer\">\r\n\t\t\t\t\t{!this.delimiterId ?\r\n\t\t\t\t\t\t<div className=\"loading\">Loading...</div>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<button className=\"btn btn-light load-more-btn\" disabled={this.state.loading} onClick={this.loadMore.bind(this)}>{this.state.loading ? 'Loading...' : 'Load More'}</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongList;\r\n","import React, { Component } from 'react';\r\nimport constant from './constants.js';\r\nimport SongList from \"./SongList\";\r\nimport Link from \"react-router-dom/es/Link\";\r\n\r\nclass Home extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.slide1 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide1.png)'\r\n\t\t};\r\n\t\tthis.slide2 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide2.png)'\r\n\t\t};\r\n\t\tthis.slide3 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide3.png)'\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div id=\"carouselExampleIndicators\" className=\"carousel slide\" data-ride=\"carousel\">\r\n\t\t\t\t\t\t<ol className=\"carousel-indicators\">\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" className=\"active\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>\r\n\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t\t<div className=\"carousel-inner\" role=\"listbox\">\r\n\t\t\t\t\t\t\t<div className=\"carousel-item active\" style={this.slide1}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Create 8-Bit Music in Just Minutes</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide2}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Perfect For Retro-Style Games</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide3}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Get Started With Our Free Chiptune Editor</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<a className=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Previous</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<a className=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Next</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div className=\"container content\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-lg-9 col-md-8\">\r\n\t\t\t\t\t\t\t<h3>Popular Songs</h3>\r\n\t\t\t\t\t\t\t<SongList popular={true} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-lg-3 col-md-4\">\r\n\t\t\t\t\t\t\t<h3>About</h3>\r\n\t\t\t\t\t\t\t<p>Chip Share is a chiptune song sharing website! It is developed using the <a href=\"https://reactjs.org/\">React</a> framework for the front-end, and <a href=\"https://expressjs.com/\">Express</a> for the back-end.</p>\r\n\t\t\t\t\t\t\t<p>This school project has been collectively developed by Jake, Carson, Mishel, and Alex at Ryerson University, Toronto, Canada.</p>\r\n\t\t\t\t\t\t\t<h3>Get Started</h3>\r\n\t\t\t\t\t\t\t<p>Try out our custom chiptune editor to create your very own songs! Simply <Link to={'/register'}>create an account</Link> and play around to master the art of 8-bit music!</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport constants from \"./constants\";\r\n\r\nclass Login extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfieldErrors: {},\r\n\t\t\terror: null,\r\n\t\t\tredirect: null\r\n\t\t};\r\n\t}\r\n\tonSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.refs.username.value.length === 0 || this.refs.password.value.length === 0) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: null,\r\n\t\t\t\tfieldErrors: {\r\n\t\t\t\t\tusername: this.refs.username.value.length === 0 ? 'This field is required.' : null,\r\n\t\t\t\t\tpassword: this.refs.password.value.length === 0 ? 'This field is required.' : null\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst request = APIHelper.login(this.refs.username.value, this.refs.password.value);\r\n\t\tswitch (request.status) {\r\n\t\t\tcase 200:\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tredirect: constants.ROOT_PATH+'profile/'+this.refs.username.value.toLowerCase()\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 400:\r\n\t\t\t\tlet fieldErrors = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfieldErrors = JSON.parse(request.response).fieldErrors;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: null,\r\n\t\t\t\t\tfieldErrors: fieldErrors\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlet message = \"Unknown error occurred.\";\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmessage = JSON.parse(request.response).message;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: message.charAt(0).toUpperCase()+message.substring(1)+'.',\r\n\t\t\t\t\tfieldErrors: {}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\thideError(input) {\r\n\t\tconst fieldErrors = this.state.fieldErrors;\r\n\t\tdelete fieldErrors[input];\r\n\t\tthis.setState({\r\n\t\t\tfieldErrors: fieldErrors\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn this.state.redirect ? <Redirect to={this.state.redirect} /> :\r\n\t\t(\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-4 offset-lg-4 col-sm-6 offset-sm-3 col-10 offset-1\">\r\n\t\t\t\t\t\t<form onSubmit={(evt) => this.onSubmit(evt)} className=\"form-login\">\r\n\t\t\t\t\t\t\t<h1>Login</h1>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<input ref=\"username\" onChange={() => this.state.fieldErrors.username ? this.hideError('username') : {}} type=\"text\" className={'form-control'+(this.state.fieldErrors.username ? ' is-invalid' : '')} placeholder=\"Username\" />\r\n\t\t\t\t\t\t\t\t<div className=\"invalid-feedback\">{this.state.fieldErrors.username || ''}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<input ref=\"password\" onChange={() => this.state.fieldErrors.password ? this.hideError('password') : {}} type=\"password\" className={'form-control'+(this.state.fieldErrors.password ? ' is-invalid' : '')} placeholder=\"Password\" />\r\n\t\t\t\t\t\t\t\t<div className=\"invalid-feedback\">{this.state.fieldErrors.password || ''}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t{this.state.error &&\r\n\t\t\t\t\t\t\t\t<div style={{'margin': '-10px 0 5px'}}><small className=\"text-warning\">{this.state.error}</small></div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Login</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"register-prompt\">\r\n\t\t\t\t\t\t\t<h2>Don't have an account?</h2>\r\n\t\t\t\t\t\t\t<Link to=\"/register\">Register Here</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Login;\r\n","import React, { Component } from 'react';\r\n\r\nclass TextInput extends Component {\r\n\tgetValue() {\r\n\t\treturn this.refs.input.value;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<input ref=\"input\" name={this.props.name} onChange={() => this.props.fieldErrors[this.props.name] ? this.props.hideError(this.props.name) : {}} type={this.props.type || 'text'} className={'form-control'+(this.props.fieldErrors[this.props.name] ? ' is-invalid' : '')} placeholder={this.props.placeholder || ''} />\r\n\t\t\t\t<div className=\"invalid-feedback\">{this.props.fieldErrors[this.props.name] || ''}</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TextInput;","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport TextInput from \"./layout/TextInput\";\r\nimport constants from \"./constants\";\r\n\r\nclass Register extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfieldErrors: {},\r\n\t\t\terror: null,\r\n\t\t\tredirect: null,\r\n\t\t\tcaptcha: null\r\n\t\t};\r\n\t\tAPIHelper.getCaptcha()\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.captchaKey = response.captcha.key;\r\n\t\t\t\t//const captcha = new DOMParser().parseFromString(parsed.captcha.image, \"text/xml\").firstChild;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcaptcha: <div dangerouslySetInnerHTML={{__html: response.captcha.image}}></div>\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcaptcha: 'Failed to load!'\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t}\r\n\tonSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.ensureErrorCorrection && Object.keys(this.state.fieldErrors).length > 0)\r\n\t\t\treturn;\r\n\t\tconst inputData = {\r\n\t\t\tname: this.refs.name.getValue(),\r\n\t\t\tusername: this.refs.username.getValue(),\r\n\t\t\tpassword: this.refs.password.getValue(),\r\n\t\t\tcaptcha: this.refs.captcha.getValue()\r\n\t\t};\r\n\t\tlet clientError = false;\r\n\t\tfor (const key in inputData) {\r\n\t\t\tif (inputData[key].length === 0) {\r\n\t\t\t\tthis.state.fieldErrors[key] = 'This field is required.';\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t\tclientError = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.refs['repeat-password'].getValue() !== this.refs.password.getValue()) {\r\n\t\t\tthis.state.fieldErrors['repeat-password'] = 'Passwords do not match.';\r\n\t\t\tthis.forceUpdate();\r\n\t\t\tclientError = true;\r\n\t\t}\r\n\t\tif (clientError)\r\n\t\t\treturn;\r\n\t\tconst request = APIHelper.register(inputData, this.captchaKey);\r\n\t\tswitch (request.status) {\r\n\t\t\tcase 201:\r\n\t\t\t\tconst loginRequest = APIHelper.login(inputData.username, inputData.password);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tredirect: loginRequest.status === 200 ? constants.ROOT_PATH+'profile/'+inputData.username.toLowerCase() : constants.ROOT_PATH+'login'\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 400:\r\n\t\t\t\tlet fieldErrors = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst json = JSON.parse(request.response);\r\n\t\t\t\t\tfieldErrors = json.fieldErrors || {};\r\n\t\t\t\t\tif (json.captchaError)\r\n\t\t\t\t\t\tfieldErrors.captcha = json.captchaError\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: null,\r\n\t\t\t\t\tfieldErrors: fieldErrors\r\n\t\t\t\t});\r\n\t\t\t\tthis.ensureErrorCorrection = true;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlet message = \"Unknown error occurred.\";\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmessage = JSON.parse(request.response).message;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: message.charAt(0).toUpperCase()+message.substring(1)+'.',\r\n\t\t\t\t\tfieldErrors: {}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\thideError(input) {\r\n\t\tconst fieldErrors = this.state.fieldErrors;\r\n\t\tdelete fieldErrors[input];\r\n\t\tthis.setState({\r\n\t\t\tfieldErrors: fieldErrors\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn this.state.redirect ? <Redirect to={this.state.redirect} /> :\r\n\t\t(\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-4 offset-lg-4 col-sm-6 offset-sm-3 col-10 offset-1\">\r\n\t\t\t\t\t\t<form onSubmit={(evt) => this.onSubmit(evt)} className=\"form-login\">\r\n\t\t\t\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t\t\t\t<TextInput ref=\"name\" name=\"name\" placeholder=\"Name\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"username\" name=\"username\" placeholder=\"Username\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"password\" name=\"password\" type=\"password\" placeholder=\"Password\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"repeat-password\" name=\"repeat-password\" type=\"password\" placeholder=\"Repeat Password\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<div className=\"captcha-group\">\r\n\t\t\t\t\t\t\t\t<div className=\"captcha-container\">{this.state.captcha || 'Loading captcha...'}</div>\r\n\t\t\t\t\t\t\t\t<TextInput ref=\"captcha\" name=\"captcha\" placeholder=\"Captcha Answer\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Register</button>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"register-prompt\">\r\n\t\t\t\t\t\t\t<h2>Already have an account?</h2>\r\n\t\t\t\t\t\t\t<Link to=\"/login\">Login Here</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Register;\r\n","import React, { Component } from 'react';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongList from \"./SongList\";\r\n\r\nclass Profile extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tloading: true\r\n\t\t};\r\n\t\tif (this.props.match && this.props.match.params && this.props.match.params.username) {\r\n\t\t\tAPIHelper.fetchUser(this.props.match.params.username)\r\n\t\t\t\t.then(user => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\tuser: user\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tif (err.status === 404) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\t\tuser: null\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// TODO display error\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.state.loading = false;\r\n\t\t\tthis.state.user = null;\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.loading)\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"info-box\">\r\n\t\t\t\t\t<p>Loading...</p>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\telse\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-12 col-lg-8 offset-lg-2\">\r\n\t\t\t\t\t\t\t\t{!this.state.user ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"info-box\">\r\n\t\t\t\t\t\t\t\t\t\t<h1>User Not Found</h1>\r\n\t\t\t\t\t\t\t\t\t\t<p>This profile page does not exist.</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<h1 className=\"account-name\">{this.state.user.name}</h1>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"account-username\">@{this.state.user.username}</span>\r\n\t\t\t\t\t\t\t\t\t\t<SongList userId={this.state.user.id}/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n\r\nexport default Profile;\r\n","import React, { Component } from 'react';\r\n\r\nclass FrameworksPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Frameworks</h1>\r\n\t\t\t\t\t\t<p>For our project, two major frameworks were used, namely React and Express, both stemming from the Node.js environment. The following is a brief explanation of both frameworks.</p>\r\n\t\t\t\t\t\t<h2>React</h2>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tReact is a flexible and efficient front end javascript library for building UI, and is considered the most in demand in the job markets of 2018.<br />\r\n\t\t\t\t\t\t\tIt's also considered as one of the most popular javascript frameworks these days.<br />\r\n\t\t\t\t\t\t\tBig companies like Twitter, Netflix, Instagram and Airbnb are using React framework.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<h2>Express</h2>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tExpress.js is among the top Node.js frameworks.<br />\r\n\t\t\t\t\t\t\tExpress framework has a minimalist outline that allows the developer to take control of each project and how it will be organized. This provides great flexibility but can be a bit overwhelming to those who are new to Node.js.<br />\r\n\t\t\t\t\t\t\tExpress is utilized in many major corporations, including but not limited to IBM, Uber, Fox Sports, Mulesoft, etc.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<h4>References</h4>\r\n\t\t\t\t\t\t<ul style={{fontSize: '12px', marginBottom: '10px'}}>\r\n\t\t\t\t\t\t\t<li>Kostrzewa, Denis. \"Is React.js the Best Javascript Framework in 2018? – Hacker Noon.\" Hacker Noon, Hacker Noon, 19 July 2018, hackernoon.com/is-react-js-the-best-javascript-framework-in-2018-264a0eb373c8.</li>\r\n\t\t\t\t\t\t\t<li>Park, Jae Sung. \"The Status of JavaScript Libraries & Frameworks: 2018 & beyond.\" Hacker Noon, Hacker Noon, 30 Mar. 2018, hackernoon.com/the-status-of-javascript-libraries-frameworks-2018-beyond-3a5a7cae7513.</li>\r\n\t\t\t\t\t\t\t<li>Volodymyr, Tymets. \"Express.js Mobile App Development: Pros and Cons of Node.js Framework.\" Apiko Blog, Apiko Blog, 22 Mar. 2018, apiko.com/blog/express-mobile-app-development/.</li>\r\n\t\t\t\t\t\t\t<li>\"Why Developers like React.\" StackShare, stackshare.io/react/in-stacks.</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<a href=\"/assignment/installation\" className=\"btn btn-lg btn-primary\">Continue to Installation</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FrameworksPage;\r\n","import React, { Component } from 'react';\r\n\r\nclass SongPlayer extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.song = props.song;\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <li>\r\n\t\t<div className=\"song-header\" style={{background: '#007eff45'}}>\r\n\t\t    <div>\r\n\t\t\t<button className=\"btn btn-light playback-btn play-btn\"></button>\r\n\t\t\t<div className=\"song-title\">{this.song.name}</div>\r\n\t\t    </div>\r\n\t\t    <div>\r\n\t\t\t<div className=\"buttons-container\">\r\n\t\t\t    <button className=\"btn btn-light\"><i className=\"fa fa-pencil\"></i></button>\r\n\t\t\t    <button className=\"btn btn-light\"><i className=\"fa fa-trash\"></i></button>\r\n\t\t\t</div>\r\n\t\t   \t<a className=\"song-artist\">\r\n\t\t\t    <div className=\"name\">{this.song.author}</div>\r\n\t\t\t    <div className=\"username\">@{this.song.username}</div>\r\n\t\t   \t</a>\r\n\t\t    </div>\r\n\t\t    <div className=\"play-progress\"></div>\r\n\t \t</div>\r\n\t\t<div className=\"song-body\">\r\n\t\t    <div className=\"song-dates\">\r\n\t\t\t<span className=\"song-creation-date\">Created {this.song.createDate}</span>\r\n\t\t    </div>\r\n\t\t</div>\r\n\t    </li>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default SongPlayer;\r\n","import React, { Component } from 'react';\r\nimport SongPlayer from './SongPlayer.js';\r\n\r\nclass TopSongs extends Component {\r\n    \r\n    constructor(props) {\r\n\tsuper(props);\r\n\t// React has a thing called state\r\n\t// When state changes the website will rerender\r\n\tthis.state = {\r\n\t    songs: [\r\n\t\t{\r\n\t\t    name: \"Paranoid Android\",\r\n\t\t    author: \"Thom Yorke\",\r\n\t\t    username: \"Radiohead\",\r\n\t\t    createDate: \"May 26 1997\"\r\n\t\t},\r\n\t\t{\r\n\t\t    name: \"Hey Jude\",\r\n\t\t    author: \"Paul McCartney\",\r\n\t\t    username: \"The Beatles\",\r\n\t\t    createDate: \"August 26 1968\"\r\n\t\t},\r\n\t\t{\r\n\t\t    name: \"Surfin USA\",\r\n\t\t    author: \"The Beach Boys\",\r\n\t\t    username: \"bboys\",\r\n\t\t    createDate: \"March 25 1963\"\r\n\t\t},\r\n\t\t{\r\n\t\t    name: \"The View From The Afternoon\",\r\n\t\t    author: \"Alex Turner\",\r\n\t\t    username: \"Arctic Monkeys\",\r\n\t\t    createDate: \"January 23 2006\"\r\n\t\t},\r\n\t\t{\r\n\t\t    name: \"Fur Elise\",\r\n\t\t    author: \"Ludwig van\",\r\n\t\t    username: \"Beethoven\",\r\n\t\t    createDate: \"April 27 1810\"\r\n\t\t}\r\n\t    ]\r\n\t}\r\n    }\r\n\r\n    render() {\r\n\t// We make an array of SongPlayers using our songs array\r\n\tvar songPlayers = this.state.songs.map(\r\n\t    /* The map function goes through each element\r\n\t       in the array and uses the function below to\r\n\t       transform it. The results are put into a new\r\n\t       array and returned. */\r\n\t    (song) => {\r\n\t\t// we make a SongPlayer component using each song\r\n\t\treturn <SongPlayer song={song} />;\r\n\t    }\r\n\t);\r\n\r\n\treturn (\r\n\t    <div className='container' style={{'marginTop': '40px'}}>\r\n\t\t<h3>Top Songs:</h3>\r\n\t\t<ul className='song-list'>\r\n\t\t    {songPlayers}\r\n\t\t</ul>\r\n\t    </div>\r\n\t);\r\n    }\r\n\r\n}\r\n\r\nexport default TopSongs;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './assignment.css';\r\nimport SongPlayer from './SongPlayer.js';\r\nimport TopSongs from './TopSongs.js';\r\nimport ThemedGist from 'react-themed-gist';\r\n\r\nclass TutorialPage extends Component {\r\n\tconstructor(props) {\r\n\t    super(props);\r\n\t    this.exampleSong = {\r\n\t\tname: \"Example Song\",\r\n\t\tauthor: \"Carson\",\r\n\t\tusername: \"500821516\",\r\n\t\tcreateDate: \"today\"\r\n\t    };\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12 tutorialHolder\">\r\n\t\t\t\t\t\t<h1>Creating a page using React and Express:</h1>\r\n\r\n\t\t\t\t\t\t<p>For our demo website, we have created an online chiptune sharing application. You can create new songs, adapt from the songs of other users, or simply browse the site and rate the previously submitted songs. </p>\r\n\t\t\t\t\t\t<p>To keep this tutorial simple we will only explore the creation of a \"top songs\" page.</p>\r\n\t\t\t\t\t\t<h3>React: The Page Component</h3>\r\n\t\t\t\t\t\t<p>React allows you to split your code into reusable pieces called components.</p>\r\n\t\t\t\t\t\t<p>Start by creating a file, <span class='file'>TopSongs.js</span>. This file will contain a javascript class representing the \"top songs\" component for the website.</p>\r\n\t\t\t\t\t\t<ThemedGist id='fdfb1e28d651739e1bee56a2e8f16f3f' theme='one-dark'/>\r\n\t\t\t\t\t\t<p>Put some HTML in for the basic layout of the page.</p>\r\n\t\t\t\t\t\t<ThemedGist id='7afcaaf1eaec2d2a5a8ec4865121589a' theme='one-dark'/>\r\n\t\t\t\t\t\t<p>Cool! But we could have made that site without react. What we really want is something dynamic. A list of interactable songs made by people on chip-share.</p>\r\n\t\t\t\t\t\t<p>This can be accomplished by making a component for a single song and repeatedly displaying it for all of the top songs.</p>\r\n\t\t\t\t\t\t<h3>React: The SongPlayer Component</h3>\r\n\t\t\t\t\t\t<p>Create another file, <span class='file'>SongPlayer.js</span> that will represent a single song in the list.</p>\r\n\t\t\t\t\t\t<p>This component will receive an object representing the data of the song through a react property. We will call the property \"song\".</p>\r\n\t\t\t\t\t\t<p><span style={{ color: 'blue' }}>{\"{ }\"}</span> Curly brackets inside JSX let you evaluate javascript and have it display inside your HTML. We will use them to render information from our song.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"993cdfd3edee2174a4fb7f74bc97a29a\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>Here is the SongPlayer we just made:</p>\r\n\t\t\t\t\t\t<ul className=\"song-list\">\r\n\t\t\t\t\t\t    <SongPlayer song={this.exampleSong}/>\t\t\t\t\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<p>We will use it shortly.   :)</p>\r\n\t\t\t\t\t\t<h3>Express: Providing Songs From A Backend</h3>\r\n\t\t\t\t\t\t<p>We need to get the top songs from somewhere. Express is a server side framework that allows us to handle requests.</p>\r\n\t\t\t\t\t\t<p>We will use express to return a list of songs in JSON when the server receives a GET request to /api/songs</p>\r\n\t\t\t\t\t\t<p>Here is the boilerplate code for <span className=\"file\">Server.js</span></p>\r\n\t\t\t\t\t\t<ThemedGist id=\"4b9b3c79b4aa61dd2732775137afa37c\" theme=\"one-dark\"/>\t\r\n\t\t\t\t\t\t<p>Now lets make it return a list of songs.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"58726ed7a908c3882accfd3322554be6\" theme=\"one-dark\"/> \r\n\t\t\t\t\t\t<h3>Making The TopSongs Page Dynamic</h3>\r\n\t\t\t\t\t\t<p>Lets go back to our <span className=\"file\">TopSongs.js</span> file and import the SongPlayer component at the top.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"713b52c116d5e588bdfb129ed2a6e80d\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>Change the constructor to get songs from our Express server.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"9c3f430c7254859b8d82e453c828e5ad\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>Make it render a SongPlayer for each of our songs.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"f0f8c4a46af832c6d81af5ed0f09da3d\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>We're pretty much done. Just need to do the styles.</p>\r\n\t\t\t\t\t\t<h3>Styling The Songs List</h3>\r\n\t\t\t\t\t\t<p>To use stylesheets in react, we import them.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"a1c4efdbc5cca0041bc4540a42612c30\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<p>Here is <span className='file'>topsongs.css</span>.</p>\r\n\t\t\t\t\t\t<ThemedGist id=\"10fb179e4635750a1fe10443f5ed6e6a\" theme=\"one-dark\"/>\r\n\t\t\t\t\t\t<h3>Tutorial Conclusion</h3>\r\n\t\t\t\t\t\t<p>We have now created a great looking page using React and Express.</p>\r\n\t\t\t\t\t\t<p>We encourage you to checkout both the page made with this tutorial and our actual site <a href=\"http://chipshare.me\">chipshare.me</a></p>\r\n\t\t\t\t\t\t<Link className=\"btn btn-lg btn-light\" style={{marginRight: '25px'}} to=\"/assignment/topsongs\">Tutorial Page (TopSongs)</Link>\r\n\t\t\t\t\t\t<a href=\"http://chipshare.me\" className=\"btn btn-lg btn-success\" style={{marginRight: '25px'}}>Chip Share Homepage</a>\r\n\t\t\t\t\t\t<a href=\"/assignment/conclusion\" className=\"btn btn-lg btn-primary\">Continue to Conclusion</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TutorialPage;\r\n","import React, { Component } from 'react';\r\n\r\nclass ConclusionPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Conclusion</h1>\r\n\t\t\t\t\t\t<h3>React</h3>\r\n\t\t\t\t\t\t<div class=\"progress conclusion-progress\">\r\n\t\t\t  \t\t\t\t<div class=\"progress-bar react-bar\">7/10</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tOverall, React is a very useful and convenient tool for creating dynamic components for almost any website. \r\n\t\t\t\t\t\tThe fact that React uses JSX makes the syntax very familiar to anyone with HTML experience. Similarly, \r\n\t\t\t\t\t\tJavaScript is a commonly used programming language, making React developer friendly and easy to pick up and use in that sense.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tHowever, other React-specific features, such as rendering elements to the DOM, may take some research and time to learn. \r\n\t\t\t\t\t\tFurthermore, research on React may be more difficult compared to other frameworks as React lacks properly detailed documentation.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tRegardless, once the basic features of React are learned, they can be used in many ways to make development exponentially easier.\r\n\t\t\t\t\t\tReact components can be easily reused, such as the navbar in the chipshare website. This means the component does not have to\r\n\t\t\t\t\t\tbe continuously re-rendered.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<h3>Express</h3>\r\n\t\t\t\t\t\t<div class=\"progress conclusion-progress\">\r\n\t\t\t                                <div class=\"progress-bar express-bar\">9/10</div>\r\n\t\t\t                        </div>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tExpress excells in many categories and is a very easily understandable, yet powerful framework. \r\n\t\t\t\t\t\tFrom installation process to managing server databases, Express simplifies every step to creating a good backend API.\r\n\t\t\t\t\t\tBuilt-in tools for routing and JSON output also make Express a great choice for backend development.\r\n\t\t\t\t\t\tIt shows that simplicity is key. It stands out to other frameworks due to how much it can accomplish for how uniform it is.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tDue to Express being such a barebones framework, some developers may find it appalling to resolve in their site.\r\n\t\t\t\t\t\tImplementation is almost fully up to the user, which some may not like because it lacks fancy features that others may contain.\r\n\t\t\t\t\t\tHowever, if you find yourself wishing Express had more features, you may want to consider installing a framework built on top\r\n\t\t\t\t\t\tof Express, such as MEAN or Feathers.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<a href=\"http://chipshare.me\" className=\"btn btn-lg btn-success\">Chip Share Homepage</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ConclusionPage;\r\n","import React, { Component } from 'react';\r\n\r\nclass InstallationPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Installing the Frameworks</h1>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<h2>React</h2>\r\n\t\t\t\t\t\t<h4>Node.js and npm</h4>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<p class=\"ao\">\r\n\t\t\t\t\t\t<img src=\"https://nodejs.org/static/images/logos/nodejs-new-pantone-white.png\" alt=\"Node.js\" class=\"right-float\" />\r\n\t\t\t\t\t\tNode.js is a free, open source <b>server environment</b> that can run JavaScript code on various operating systems. Since React is a JavaScript framework, its installation is required for server code execution. Node.js can create dynamic page content, modify files on a server, collect form data and modify data in your database.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tOn <b>Windows or Mac</b>, you can access the <a href=\"https://nodejs.org/en/download/\" target=\"_blank\">Node.js download page</a> and download the correct version of Node.js for your computer.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tOn <b>Linux</b> operating systems, first install a tool called curl if it is not already installed by typing:<br /><code>sudo apt-get install curl</code><br />then use curl to add Node.js to your repository list:<br /><code>curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -</code><br />Finally install Node.js by typing:<br /><code>sudo apt-get install -y nodejs</code>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tInstalling Node.js will also install npm, a <b>Software Registry</b> that installs code packages such as React.\r\n\t\t\t\t\t\t<br /><br />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<h4>Creating a React App</h4>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tThe easiest way to install React is by using  a command called <b>create-react-app</b>. Open a command prompt, and install create-react-app with npm by typing:<br /><code>npm install -g create-react-app</code>. <br/>After it is installed you can create an app with <br/><code>npx create-react-app <b>my-app</b></code><br />In which you may <b>replace my-app with your app name</b>. This will create a project folder containing the required React files. You may then start your local server by typing:<br /><code>npm start</code>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tA webpage should open at the default port 3000. if it does not open, open a web browser and go to the url <b>localhost:3000</b>, or replace the number with the port number used to run the local server. The default webpage looks like this: \r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<img src=\"/assets/Installation1.png\" alt=\"React Default Page\" class=\"ins-img\"/>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<br />Congratulations! You have now created a dynamic webpage and hosted it on a local server. You may now edit the App.js template to turn your site into anything you want. \r\n\t\t\t\t\t\tYou can find the React docs <a href=\"https://reactjs.org/docs/getting-started.html\" target=\"_blank\">here</a> to learn how to use every tool at your disposal in order to create a dynamic webpage using the framework.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<h2>Express</h2>\r\n\t\t\t\t\t\t<img src=\"https://miro.medium.com/max/902/1*alZcSIb0lcN7gQIx2tJ_tg.png\" alt=\"Express.js\" class=\"right-float\" />\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tExpress is a fast, popular back-end framework for Node.js, so like React, Express requires you to install Node.js first (See: <b>React > Node.js and npm</b>).\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tThe installation process for Express is fast and easy. You must first change to your <b>project directory</b>, and run:<br /><code>npm init</code><br /> \r\n\t\t\t\t\t\tThe command will prompt the user to enter a number of fields, fill these out appropriately or you may also leave them blank for now by pressing the <b>return</b> key.\r\n\t\t\t\t\t\tTo install Express and <b>save it in the dependencies list</b>, type:<br /><code>npm install express --save</code><br />If you would not like to add it to the dependencies list, type:\r\n\t\t\t\t\t\t<br /><code>npm install express --no-save</code><br />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tAnd after those two simple steps, Express is already installed to your project directory. The API for express can be found   \r\n\t\t\t\t\t\t<a href=\"https://expressjs.com/en/4x/api.html\" target=\"_blank\"> here</a> to help you get started with your server-side features for your project.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<a href=\"/assignment/tutorial\" className=\"btn btn-lg btn-primary\">Continue to Tutorial</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default InstallationPage;\r\n","import React, { Component } from 'react';\r\nimport ScrollArea from 'react-scrollbar';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass CreditsPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Credits</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars2.githubusercontent.com/u/44684541?s=400\" />\r\n\t\t\t\t\t\t<h3>Alexander</h3>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Created the entirety of the backend REST API for Chip Share.</li>\r\n\t\t\t\t\t\t\t\t<li>Implemented a token-based authorization system for user accounts.</li>\r\n\t\t\t\t\t\t\t\t<li>Developed a custom binary storage format for songs.</li>\r\n\t\t\t\t\t\t\t\t<li>Wrote up descriptive and fully encompassing documentation for the API.</li>\r\n\t\t\t\t\t\t\t\t<li>Designed the song players.</li>\r\n\t\t\t\t\t\t\t\t<li>Implemented a sequential-fetching song list.</li>\r\n\t\t\t\t\t\t\t\t<li>Designed and implemented the final login and registration pages.</li>\r\n\t\t\t\t\t\t\t\t<li>Fixed various song player & editor related issues.</li>\r\n\t\t\t\t\t\t\t\t<li>Set up an automatic fetching script for production builds of the application.</li>\r\n\t\t\t\t\t\t\t\t<li>Hosted the project.</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars3.githubusercontent.com/u/6993228?s=400\" />\r\n\t\t\t\t\t\t<h3>Carson</h3>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Created the <Link to=\"/editor/new\">editor</Link>.</li>\r\n\t\t\t\t\t\t\t\t<li>Created the skeleton for the client and made routing / page navigation work.</li>\r\n\t\t\t\t\t\t\t\t<li>Made the tutorial for how to create a great looking page.</li>\r\n\t\t\t\t\t\t\t\t<li>Implemented songs on the client. Made them load, play, editable, and saveable.</li>\r\n\t\t\t\t\t\t\t\t<li>Implemented user accounts on the client.</li>\r\n\t\t\t\t\t\t\t\t<li>Responsible for chipshare.me domain name.</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars2.githubusercontent.com/u/44612512?s=400\" />\r\n\t\t\t\t\t\t<h3>Jake</h3>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Created installation page, conclusion page, and helped with frameworks page.</li>\r\n\t\t\t\t\t\t\t\t<li>Prototyped navbar, home page, and profile page.</li>\r\n\t\t\t\t\t\t\t\t<li>Styled song editor, aided with main style and page layout.</li>\r\n\t\t\t\t\t\t\t\t<li>Created carousel on home page.</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars0.githubusercontent.com/u/45542192?s=400\" />\r\n\t\t\t\t\t\t<h3>Mishel</h3>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Conducted research on the frameworks and created the frameworks page.</li>\r\n\t\t\t\t\t\t\t\t<li>Worked on a tutorial for the song editor.</li>\r\n\t\t\t\t\t\t\t\t<li>Helped with quality assurance of site usability.</li>\r\n\t\t\t\t\t\t\t\t<li>Assisted in adding demo content for Chip Share.</li>\r\n\t\t\t\t\t\t\t\t<li>Learned various new foreign concepts used throughout the project.</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CreditsPage;\r\n","import React, { Component } from 'react';\r\nimport constant from \"./constants\";\r\n\r\nclass MenuDropdown extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<li className='dropdown' onClick={this.toggleOpen}>\r\n\t\t\t\t<a href='#' className={'nav-link dropdown-toggle'} data-toggle=\"dropdown\">\r\n\t\t\t\t\t{this.props.item.title}\r\n\t\t\t\t</a>\r\n\t\t\t\t<div className={'dropdown-menu'}>\r\n\t\t\t\t\t{this.props.item.items.map((listItem) => {\r\n\t\t\t\t\t\treturn <a className=\"dropdown-item\" href={constant.ROOT_PATH+listItem.path}>{listItem.title}</a>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MenuDropdown;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport APIHelper from \"./apiHelper\";\r\nimport constants from \"./constants\";\r\n\r\nclass Logout extends Component {\r\n\trender() {\r\n\t\tAPIHelper.logout();\r\n\t\treturn <Redirect to={constants.ROOT_PATH} />\r\n\t}\r\n}\r\n\r\nexport default Logout;","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport Editor from './editor/Editor.js';\r\nimport Home from './Home.js';\r\nimport Login from './Login.js';\r\nimport Register from './Register.js';\r\nimport Profile from './Profile.js';\r\nimport constant from './constants.js';\r\nimport FrameworksPage from \"./assignment_pages/FrameworksPage\";\r\nimport TutorialPage from \"./assignment_pages/TutorialPage\";\r\nimport TopSongs from './assignment_pages/TopSongs.js';\r\nimport ConclusionPage from \"./assignment_pages/ConclusionPage\";\r\nimport InstallationPage from \"./assignment_pages/InstallationPage\";\r\nimport CreditsPage from \"./assignment_pages/CreditsPage\";\r\nimport MenuDropdown from \"./MenuDropdown\";\r\nimport APIHelper from './apiHelper';\r\nimport Logout from \"./Logout\";\r\n\r\nclass App extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.user = APIHelper.getCurrentUser();\r\n\t\tthis.menu = [\r\n\t\t\t{ title: \"Create\", path: \"editor/new\" },\r\n\t\t\t{ title: \"My Songs\", path: \"profile/\"+(this.user ? this.user.username : ''), userOnly: true },\r\n\t\t\t{ title: \"Assignment\", path: \"assignment\", items: [\r\n\t\t\t\t\t{ title: \"Frameworks\", path: \"assignment/frameworks\" },\r\n\t\t\t\t\t{ title: \"Installation\", path: \"assignment/installation\" },\r\n\t\t\t\t\t{ title: \"Tutorial\", path: \"assignment/tutorial\" },\r\n\t\t\t\t\t{ title: \"Conclusion\", path: \"assignment/conclusion\" }\r\n\t\t\t\t] },\r\n\t\t\t{ title: \"Credits\", path: \"credits\" }\r\n\t\t]\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet navBarItems = this.menu.map((menuItem) => {\r\n\t\t\tif (menuItem.userOnly && !this.user)\r\n\t\t\t\treturn;\r\n\t\t\tif (menuItem.path)\r\n\t\t\t\tmenuItem.path = constant.ROOT_PATH+menuItem.path;\r\n\t\t    return menuItem.items ? <MenuDropdown item={menuItem} /> : <li className={'nav-item'+(menuItem.items ? ' dropdown' : '')}>\r\n\t\t\t    <a href={menuItem.path || '#'} className={\"nav-link \"+(window.location.pathname === menuItem.path ? \"active\" : \"\")}>\r\n\t\t\t\t    {menuItem.title}\r\n\t\t\t    </a>\r\n\t\t    </li>;\r\n\t\t});\r\n\t\tconst UserMenu = () => {\r\n\t\t    const user = APIHelper.getCurrentUser();\r\n\t\t    return <ul className=\"navbar-nav ml-auto\">\r\n\t\t\t{!user ?\r\n\t\t\t(<a className=\"nav-link\" href={constant.ROOT_PATH + \"login\"}>Log In / Register</a>)\r\n\t\t\t    :\r\n\t\t\t(<li className=\"nav-item dropdown\">\r\n\t\t\t\t<a className=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\tLogged in as: {user.name}\r\n\t\t\t\t</a>\r\n\t\t\t\t<div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n\t\t\t\t\t<a className=\"dropdown-item\" href={constant.ROOT_PATH + \"logout\"}>Log Out</a>\r\n\t\t\t\t</div>\r\n\t\t\t</li>)}\r\n\t\t\t</ul>;\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Router basename={constant.ROOT_PATH}>\r\n\t\t\t\t    <div>\r\n\t\t\t\t\t\t<nav className=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\r\n\t\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t\t<a className=\"navbar-brand\" href={constant.ROOT_PATH}>Chip Share</a>\r\n\t\t\t\t\t\t\t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarResponsive\">\r\n\t\t\t\t\t\t\t\t\t<ul className=\"navbar-nav mr-auto\">\r\n\t\t\t\t\t\t\t\t\t\t{navBarItems}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t<Route path=\"/\" component={UserMenu} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t<Route path=\"/\" exact component={Home} />\r\n\t\t\t\t\t\t<Route path=\"/editor\" component={Editor} />\r\n\t\t\t\t\t\t<Route path=\"/editor/:id\" component={Editor} />\r\n\t\t\t\t\t\t<Route path=\"/login\" component={Login} />\r\n\t\t\t\t\t\t<Route path=\"/register\" component={Register} />\r\n\t\t\t\t\t\t<Route path=\"/profile/:username?\" component={Profile} />\r\n\t\t\t\t\t    <Route path=\"/assignment/frameworks\" component={FrameworksPage} />\r\n\t\t\t\t\t    <Route path=\"/assignment/installation\" component={InstallationPage} />\r\n\t\t\t\t\t    <Route path=\"/assignment/tutorial\" component={TutorialPage} />\r\n\t\t\t\t\t    <Route path=\"/assignment/topsongs\" component={TopSongs} />\r\n\t\t\t\t\t    <Route path=\"/assignment/conclusion\" component={ConclusionPage} />\r\n\t\t\t\t\t    <Route path=\"/credits\" component={CreditsPage} />\r\n\t\t\t\t\t    <Route path=\"/logout\" component={Logout} />\r\n\t\t\t\t    </div>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}