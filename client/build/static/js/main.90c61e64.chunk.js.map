{"version":3,"sources":["constants.js","apiHelper.js","editor/song/Track.js","editor/song/Block.js","editor/song/Song.js","editor/song/EditableSong.js","editor/InstrEdit.js","editor/blockEdit/Tile.js","editor/blockEdit/Line.js","editor/blockEdit/BlockEdit.js","editor/time/Block.js","editor/time/Track.js","editor/time/Time.js","editor/Editor.js","Home.js","Login.js","Register.js","SongRating.js","SongPlayer.js","Profile.js","App.js","serviceWorker.js","index.js"],"names":["constant","ROOT_PATH","apiHelper","registerCaptcha","req","XMLHttpRequest","open","captchaPromise","Promise","resolve","reject","onreadystatechange","readyState","status","response","send","register","name","user","pass","captcha","console","log","setRequestHeader","JSON","stringify","username","password","login","res","parse","Cookies","expires","token","refreshSecret","createSong","song","undefined","id","getSongs","userId","url","getSong","format","arguments","length","songPromise","rateSong","rating","method","route","body","xhr","onload","this","request","onerror","makeApiRequest","then","catch","err","Track","track","Object","classCallCheck","blocks","settings","typeId","metadata","types","dataValues","off","on","start","end","mid","convertFromData","data","block","i","dataLine","line","j","value","push","type","clickF","startF","endF","midF","Block","storedBlock","months","getFormattedDate","date","currentDate","Date","getDate","getMonth","getFullYear","totMin","Math","floor","hours","minutes","hourString","minuteString","Song","songMeta","tracks","bpm","blockLength","createDate","updateDate","author","ratings","setKey","loaded","freq","keyType","key","step","Tone","Frequency","transpose","synth","releaseAll","instruments","activeBlock","_this","Transport","cancel","PolySynth","Synth","toMaster","triggerAttackRelease","loopEnd","loop","count","Loop","time","triggerAttack","triggerRelease","stop","APIHelper","getSendableSong","sendableSong","map","convertToData","abs","EditableSong","possibleConstructorReturn","getPrototypeOf","call","selectedTrack","InstrEdit","params","react_default","a","createElement","Component","Tile","props","state","tile","event","dragger","active","forceUpdate","class","onMouseDown","bind","onMouseUp","onMouseMove","Line","tiles","blockEdit_Tile","lineNum","BlockEdit","lines","blockEdit_Line","Template","remove","className","onClick","time_Block","Time","time_Track","removeTrack","assertThisInitialized","offset","copy","slice","setState","me","filter","addTrack","Editor","playing","error","keysArray","keyOptions","ready","songId","match","load","parsed","errComp","pause","play","evt","preventDefault","save","newState","val","target","setName","setBPM","_this2","handleToggle","onChange","onSubmit","onSave","required","placeholder","editor_InstrEdit","blockEdit_BlockEdit","time_Time","Home","slide1","backgroundImage","slide2","slide3","data-ride","data-target","data-slide-to","role","style","href","data-slide","aria-hidden","background","width","Login","alertComponent","comp","Redirect","to","for","autofocus","Link","Register","capt","thing","DOMParser","parseFromString","image","firstChild","element","dangerouslySetInnerHTML","__html","innerHTML","answer","SongRating","hover","userValue","currentUserRating","average","pos","changeable","stars","classes","ceil","onMouseEnter","onMouseLeave","setRating","SongPlayer","redirect","playBtn","_this3","onPlayPause","onEdit","src_SongRating","getFormattedCreate","hasBeenUpdated","getFormattedUpdate","Profile","songs","songMetas","src_SongPlayer","App","process","itemNames","destination","navBarItems","index","BrowserRouter","basename","data-toggle","aria-controls","aria-expanded","aria-label","Route","path","component","aria-haspopup","aria-labelledby","exact","Boolean","window","location","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.90c61e64.chunk.js","sourcesContent":["const constant = {\r\n    ROOT_PATH: \"/\" \r\n}\r\n\r\nexport default constant;\r\n","import * as Cookies from 'js-cookie';\r\nimport constant from './constants.js';\r\n\r\nconst in30Minutes = 1/48;\r\n\r\nconst getResponse = (xhr) => {\r\n\tconst contentType = xhr.getResponseHeader(\"Content-Type\");\r\n\tif (contentType.includes(\"application/json\")) {\r\n\t\treturn JSON.parse(xhr.response);\r\n\t} else {\r\n\t\treturn xhr.response;\r\n\t}\r\n};\r\nconst makeApiRequest = (method, route, body = null) => {\r\n\treturn new Promise(function (resolve, reject) {\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.open(method, constant.ROOT_PATH + \"api/\" + route);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\txhr.setRequestHeader(\"Authorization\", token);\r\n\t\txhr.onload = function () {\r\n\t\t\tif (this.status >= 200 && this.status < 300) {\r\n\t\t\t\tresolve(xhr);\r\n\t\t\t} else {\r\n\t\t\t\treject({\r\n\t\t\t\t\tstatus: this.status,\r\n\t\t\t\t\trequest: xhr\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.onerror = function () {\r\n\t\t\treject({\r\n\t\t\t\tstatus: this.status,\r\n\t\t\t\trequest: xhr\r\n\t\t\t});\r\n\t\t};\r\n\t\tif (body != null && typeof body !== 'undefined') {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\txhr.send(body);\r\n\t\t} else\r\n\t\t\txhr.send();\r\n\t});\r\n};\r\n\r\nconst apiHelper = {\r\n\tregisterCaptcha: function() {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\treq.open(\"GET\", constant.ROOT_PATH + \"api/user/register\", true);\r\n\t\tvar captchaPromise = new Promise((resolve, reject) => {\r\n\t\t\treq.onreadystatechange = () => {\r\n\t\t\t\t// Done\r\n\t\t\t\tif (req.readyState === 4) {\r\n\t\t\t\t\tif (req.status === 200) {\r\n\t\t\t\t\t\tresolve(req.response);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(req.response);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t\treq.send();\r\n\t\treturn captchaPromise;\r\n\t},\r\n\tregister: function(name, user, pass, captcha) {\r\n\t\tconsole.log(captcha);\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/register\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\treq.send(JSON.stringify({\r\n\t\t\tname: name,\r\n\t\t\tusername: user,\r\n\t\t\tpassword: pass,\r\n\t\t\tcaptcha: captcha\r\n\t\t}));\r\n\t\tif (req.status === 201)\r\n\t\t{\r\n\t\t\treturn \"Success\";\r\n\t\t}\r\n\t\treturn req.response;\r\n\t},\r\n\tlogin: function(user, pass) {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/login\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\treq.send(JSON.stringify({\r\n\t\t\tusername: user,\r\n\t\t\tpassword: pass\r\n\t\t}));\r\n\t\tif (req.status === 200)\r\n\t\t{\r\n\t\t\tvar res = JSON.parse(req.response);\r\n\t\t\tCookies.set('name', res.name || \"unknown\", {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('token', res.token, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('secret', res.refreshSecret, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\treturn \"Success\";\r\n\t\t}\r\n\t\treturn req.response;\r\n\t},\r\n\tcreateSong: function(song) {\r\n\t\tvar token = Cookies.get('token');\r\n\t\tif(!(token === undefined)) {\r\n\t\t\tvar req = new XMLHttpRequest();\r\n\t\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/songs/create\", false);\r\n\t\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\t\treq.send(JSON.stringify(song));\r\n\t\t\tconsole.log(req.response);\r\n\t\t\tif (req.status === 200) {\r\n\t\t\t\treturn req.response.id;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(\"not logged in!\");\r\n\t\t}\r\n\t},\r\n\tgetSongs: function(userId) {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\tvar url;\r\n\t\tif(userId === undefined) {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs\";\r\n\t\t} else {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs/get?userId=\" + userId;\r\n\t\t}\r\n\t\treq.open(\"GET\", url, false);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\treq.send();\r\n\t\treturn (JSON.parse(req.response));\r\n\t},\r\n\tgetSong: function(id, format = \"full\") {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\treq.open(\"GET\", constant.ROOT_PATH + \"api/songs/\" + id + \"/\" + format, true);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token && format === \"full\")\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\tvar songPromise = new Promise((resolve, reject) => {\r\n\t\t\treq.onreadystatechange = () => {\r\n\t\t\t\t// Done\r\n\t\t\t\tif (req.readyState === 4) {\r\n\t\t\t\t\t// Success\r\n\t\t\t\t\tif (req.status === 200) {\r\n\t\t\t\t\t\tresolve(req.response);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(req.response);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treq.send();\r\n\t\treturn songPromise;\r\n\t},\r\n\trateSong: function(id, rating = null) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('POST', 'songs/rate/'+id+(rating ? '/'+rating : ''))\r\n\t\t\t\t.then(() => resolve(true))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default apiHelper;\r\n","class Track {\r\n    constructor(track) {\r\n\tif (!track === undefined) {\r\n\t    this.track = track;\r\n\t} else {\r\n\t    this.track = {\r\n\t\tblocks: [\r\n\t\t    1\r\n\t\t],\r\n\t\tsettings: {\r\n\t\t    typeId: 1,\r\n\t\t    metadata: \"123ab\"\r\n\t\t}\r\n\t    }\r\n\t}\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","const types = ['off', 'on', 'start', 'end', 'mid'];\r\nconst dataValues = {\r\n    'off': 0, 'on': 1, 'start': 2, 'end': 3, 'mid': 4\r\n}\r\n\r\n// convert block from integer data\r\nvar convertFromData = (data, block) => {\r\n    for (let i = 0; i < data.length; i++)\r\n    {\r\n\tlet dataLine = data[i];\r\n\tlet line = [];\r\n\tfor (let j = 0; j < dataLine.length; j++)\r\n\t{\r\n\t    let value = dataLine[j];\r\n\t    line.push({\r\n\t\ttype: types[value],\r\n\t\tclickF: function() {\r\n\t\t    if(this.type === 'off')\r\n\t\t    {\r\n\t\t\tthis.type = 'on';\r\n\t\t    }\r\n\t\t    else\r\n\t\t    {\r\n\t\t\tthis.type = 'off';\r\n\t\t    }\r\n\t\t},\r\n\t\tstartF: function() {\r\n\t\t    this.type = 'start';\r\n\t\t},\r\n\t\tendF: function() {\r\n\t\t    this.type = 'end';\r\n\t\t},\r\n\t\tmidF: function() {\r\n\t\t    this.type = 'mid';\r\n\t\t}\t\r\n\t    });\r\n\t}\r\n\tblock.push(line);\r\n    }\r\n};\r\n\r\n// playable / editable block\r\nclass Block {\r\n    constructor(storedBlock) {\r\n\tthis.block = [];\r\n\tif (!(storedBlock === undefined)) {\r\n\t    // load block from data\r\n\t    convertFromData(storedBlock.data, this.block);\r\n\t} else {\r\n\t    // create blank block\r\n\t    for (let i = 0; i < 12; i++) {\r\n\t\tlet line = [];\r\n\t\tfor(let j = 0; j < 16; j++) {\r\n\t\t    line.push({\r\n\t\t\ttype: 'off',\r\n\t\t\tclickF: function() {\r\n\t\t\t    if(this.type === 'off')\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'on';\r\n\t\t\t    }\r\n\t\t\t    else\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'off';\r\n\t\t\t    }\r\n\t\t\t},\r\n\t\t\tstartF: function() {\r\n\t\t\t    this.type = 'start';\r\n\t\t\t},\r\n\t\t\tendF: function() {\r\n\t\t\t    this.type = 'end';\r\n\t\t\t},\r\n\t\t\tmidF: function() {\r\n\t\t\t    this.type = 'mid';\r\n\t\t\t}\r\n\t\t    });\r\n\t\t}\r\n\t\tthis.block.push(line);\r\n\t    }\r\n\t}\r\n    }\r\n\r\n    convertToData() {\r\n\tlet data = [];\r\n\tfor (let i = 0; i < this.block.length; i++) {\r\n\t    let line = this.block[i];\r\n\t    let dataLine = [];\r\n\t    for (let j = 0; j < line.length; j++) {\r\n\t\tlet value = line[j].type;\r\n\t\tdataLine.push(dataValues[value]);\r\n\t    }\r\n\t    data.push(dataLine);\r\n\t}\r\n\treturn data;\r\n    }\r\n}\r\n\r\nexport default Block;\r\n","import Tone from 'tone';\r\nimport APIHelper from '../../apiHelper.js'\r\nimport Track from './Track.js';\r\nimport Block from './Block.js';\r\n\r\nclass Song {\r\n    // User: opening song, id of song\r\n    constructor(songMeta) {\r\n\tthis.blocks = [];\r\n\tthis.tracks = [];\r\n\tif (!(songMeta === undefined)) {\r\n\t    // Song exist: Load meta\r\n\t    this.name = songMeta.name;\r\n\t    this.bpm = songMeta.bpm;\r\n\t    this.blockLength = songMeta.blockLength;\r\n\r\n\t    this.createDate = new Date(songMeta.createDate);\r\n\t    this.updateDate = new Date(songMeta.updateDate);\r\n\t    this.author = songMeta.user.name;\r\n\t    this.username = songMeta.user.username;\r\n\t    this.ratings = songMeta.ratings;\r\n\r\n\t    this.id = songMeta.id;\r\n\t} else {\r\n\t    // Empty meta\r\n\t    this.name = \"awesome song\";\r\n\t    this.bpm = 120;\r\n\t    this.blockLength = 1;\r\n\t}\r\n\tthis.setKey();\r\n\tthis.loaded = false;\r\n    }\r\n\r\n    setKey(freq, type) {\r\n\tthis.freq = freq || \"C\";\r\n\tthis.keyType = type || \"Maj\";\r\n\tthis.key = [];\r\n\tthis.key[11] = (this.freq + \"3\");\r\n\tvar step = (type === \"Maj\") ? \r\n\t    [2, 2, 1, 2, 2, 2, 1, 2, 2, 1, 2] :\r\n\t    [2, 1, 2, 2, 1, 2, 2, 2, 1, 2, 2];\r\n\tfor (let i = 10, j = 0; i >= 0; i--, j++) {\r\n\t    this.key[i] = Tone.Frequency(this.key[i+1]).transpose(step[j]);\r\n\t}\r\n\tif (this.synth) this.synth.releaseAll();\r\n    }\r\n\r\n    load(songMeta) {\r\n\tthis.blocks.push(null);\r\n\tif(this.id === undefined || songMeta === undefined)\r\n\t{\r\n\t    // Load empty song\r\n\t    this.blocks.push(new Block());\r\n\t    this.tracks.push(new Track()); \r\n\t} else {\r\n\t    // Load song from composition data\r\n\t    for (let i = 0; i < songMeta.instruments.length; i++) {\r\n\t\tthis.tracks.push(new Track(songMeta.instruments[i]));\r\n\t    }\r\n\t    for (let i = 1; i <= this.blockLength; i++) {\r\n\t\tlet block = new Block(songMeta.blocks[i]);\r\n\t\tthis.blocks.push(block);\r\n\t    }\r\n\t}\r\n\tthis.activeBlock = this.blocks[1].block;\r\n\tthis.loaded = true;\r\n    }\r\n\r\n    start() {\r\n\tTone.Transport.cancel();\r\n\tthis.synth = new Tone.PolySynth(6, Tone.Synth).toMaster();\r\n\tthis.synth.triggerAttackRelease('C4', '4n');\r\n\tTone.Transport.loopEnd = this.blockLength + \"m\";\r\n\tTone.Transport.loop = true;\r\n\tTone.Transport.bpm.value = this.bpm;\r\n\tthis.count = 0;\r\n\tthis.loop = new Tone.Loop((time) => {\r\n\t    for (let i = 0; i < 12; i++) {\r\n\t\tswitch(this.activeBlock[i][this.count].type) {\r\n\t\t    case 'on':\r\n\t\t\tthis.synth.triggerAttackRelease(this.key[i], '16n', time);\r\n\t\t\tbreak;\r\n\t\t    case 'start':\r\n\t\t\tthis.synth.triggerAttack(this.key[i], time);\r\n\t\t\tbreak;\r\n\t\t    case 'end':\r\n\t\t\tthis.synth.triggerRelease(this.key[i], time);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t    }\r\n\t    if (this.count >= 15) {\r\n\t\tthis.count = 0;\r\n\t    } else {\r\n\t\tthis.count++;\r\n\t    }\r\n\t}, '16n').start();\r\n    }\r\n\r\n    play() {\r\n\tTone.Transport.start();\t\r\n    }\r\n\r\n    pause() {\r\n\tTone.Transport.stop();\r\n\tthis.synth.releaseAll();\r\n    }\r\n\r\n    save() {\r\n\tif(this.id === undefined) {\r\n\t    // create new song and get id\r\n\t    var id = APIHelper.createSong(this.getSendableSong());\r\n\t} else {\r\n\t    // update song\r\n\t     \r\n\t}\r\n    }\r\n    \r\n    getSendableSong()\r\n    {\r\n\tvar sendableSong = {\r\n\t    name: this.name,\r\n\t    bpm: this.bpm,\r\n\t    blockLength: this.blockLength,\r\n\t    instruments: this.tracks.map((track) => {\r\n\t\treturn track.track;\r\n\t    }),\r\n\t    blocks: {}\r\n\t};\r\n\tfor(let i = 1; i <= (this.blocks.length - 1); i++) {\r\n\t    sendableSong.blocks[i] = {\r\n\t\tdata: this.blocks[i].convertToData()\r\n\t    };\r\n\t}\r\n\treturn sendableSong;\r\n    }\r\n    \r\n    getFormattedCreate() {\r\n\treturn getFormattedDate(this.createDate);\r\n    }\r\n\r\n    getFormattedUpdate() {\r\n\treturn getFormattedDate(this.updateDate);\r\n    }\r\n\r\n    hasBeenUpdated() {\r\n\treturn (!(Math.abs(this.createDate - this.updateDate) < 50));\r\n    }\r\n}\r\n\r\nconst months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\r\nfunction getFormattedDate(date) {\r\n    var currentDate = new Date();\r\n    // same day\r\n    if(currentDate.getDate() === date.getDate()\r\n       && currentDate.getMonth() === date.getMonth()\r\n       && currentDate.getFullYear() === date.getFullYear())\r\n    {\r\n\tlet totMin = Math.floor((currentDate - date) / 60000);\r\n\tlet hours = Math.floor(totMin / 60);\r\n\tlet minutes = totMin % 60;\r\n\tlet hourString = \"hour\";\r\n\tif(hours > 1) hourString += \"s\";\r\n\tif(minutes === 0)\r\n\t{\r\n\t    return hours + \" \" + hourString + \"  ago\";\r\n\t}\r\n\tlet minuteString = \"minute\";\r\n\tif(minutes > 1) minuteString += \"s\";\r\n\tif(hours === 0)\r\n\t{\r\n\t    return minutes + \" \" + minuteString + \" ago\";\r\n\t}\r\n\treturn hours + \" \" + hourString + \" and \" + minutes + \" \" + minuteString + \" ago\";\r\n    }\r\n    return months[date.getMonth()] + \" \" + date.getDate() + \", \" + date.getFullYear();\r\n}\r\n\r\nexport default Song;\r\n","import Tone from 'tone';\r\nimport Song from './Song.js';\r\n\r\nclass EditableSong extends Song {\r\n    constructor(songMeta) {\r\n\tsuper(songMeta);\r\n\tthis.selectedTrack = 0;\r\n    }\r\n\r\n    addTrack() {\r\n\t\r\n    }\r\n\r\n    setName(name) {\r\n\tthis.name = name;\r\n    }\r\n\r\n    setBPM(bpm) {\r\n\tthis.bpm = bpm;\r\n\tTone.Transport.bpm.value = this.bpm;\r\n    }\r\n}\r\n\r\nexport default EditableSong;\r\n","import React, { Component }  from 'react';\r\n\r\nclass InstrEdit extends Component {\r\n    render(params) {\r\n\treturn (\r\n\t    <div id='instrEdit'>\r\n\t\t<span>Instrument </span>\r\n\t\t<select>\r\n\t\t    <option>Instrument 1</option>\r\n\t\t    <option>Instrument 2</option>\r\n\t\t    <option>Instrument 3</option>\r\n\t\t</select>\r\n\t\t<br />\r\n\t\t<span>Drive </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 2 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 3 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default InstrEdit;\r\n","import React, { Component } from 'react';\r\n\r\nclass Tile extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.state = props.tile;\r\n    }\r\n\r\n    onMouseMove(event) {\r\n    }\r\n\r\n    onMouseDown(event) {\r\n\tthis.props.dragger.active = this.props.line;\r\n\tthis.props.dragger.start = this;\r\n\t//this.state.startF();\r\n\t//this.forceUpdate();\r\n    }\r\n\r\n    onMouseUp(event) {\r\n\tif(this.props.line === this.props.dragger.active)\r\n\t{\r\n\t    if(this.props.dragger.start === this)\r\n\t    {\r\n\t\tthis.state.clickF();\r\n\t    }\r\n\t    else\r\n\t    {\r\n\t\tthis.props.dragger.start.state.startF();\r\n\t\tthis.props.dragger.start.forceUpdate();\r\n\t\tthis.state.endF();\r\n\t    }\r\n\t    this.forceUpdate();\r\n\t}\r\n\tthis.props.dragger.active = null;\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div\r\n\t\tclass={\"tile \" + (this.state.type)}\r\n\t\tonMouseDown={this.onMouseDown.bind(this)}\r\n\t\tonMouseUp={this.onMouseUp.bind(this)}\r\n\t\tonMouseMove={this.onMouseMove.bind(this)}\r\n\t\t>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Tile;\r\n","import React, { Component } from 'react';\r\nimport Tile from './Tile.js';\r\n\r\nclass Line extends Component {\r\n    render() {\r\n\tlet tiles = [];\r\n\tfor(let i = 0; i < 16; i++)\r\n\t{\r\n\t    tiles.push(<Tile tile={this.props.line[i]} line={this.props.lineNum} dragger={this.props.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div class='line'>\r\n\t\t{tiles}\t\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Line;\r\n","import React, { Component } from 'react';\r\n\r\nimport Line from './Line.js';\r\n\r\nclass BlockEdit extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.dragger = {\r\n\t    active: -1,\r\n\t    start: null\r\n\t}\r\n    }\r\n    \r\n    render() {\r\n\tlet lines = [];\r\n\tfor(let i = 0; i < 12; i ++)\r\n\t{\r\n\t    lines.push(<Line line={this.props.block[i]} lineNum={i} dragger={this.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div id='blockEdit'>\r\n\t\t{lines}\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default BlockEdit;\r\n","import React, { Component } from 'react';\r\n\r\nclass Template extends Component {\r\n    render() {\r\n\treturn (\r\n\t    <div>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Template;\r\n","import React, { Component } from 'react';\r\nimport Block from './Block.js';\r\n\r\nclass Track extends Component {\r\n\r\n\r\n    remove() {\r\n\tthis.props.remove(this);\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div className=\"track\">\r\n\t\t<h1 onClick={this.remove.bind(this)}>{this.props.id}</h1>\r\n\t\t<Block />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","import React, { Component } from 'react';\r\nimport Track from './Track.js';\r\n\r\nclass Time extends Component {\r\n    constructor(props)\r\n    {\r\n\tsuper(props);\r\n\tthis.id = 1;\r\n\tthis.state = {\r\n\t    tracks: [<Track id='0' remove={this.removeTrack.bind(this)} />]\r\n\t}\r\n\tthis.offset = 0;\r\n    }\r\n\r\n    addTrack()\r\n    {\r\n\tvar copy = this.state.tracks.slice(0);\r\n\tcopy.push(<Track id={this.id} remove={this.removeTrack.bind(this)}/>);\r\n\tthis.setState(state => ({\r\n\t    tracks: copy\r\n\t}));\r\n\tthis.id++;\r\n    }\r\n\r\n    removeTrack(me)\r\n    {\r\n\tthis.setState(state => ({\r\n\t    tracks: state.tracks.filter(function(value) {\r\n\t\treturn !(me.props.id === value.props.id);\r\n\t    })\r\n\t}));\r\n    }\r\n\r\n    render()\r\n    {\r\n\treturn (\r\n\t    <div>\r\n\t\t{this.state.tracks}\r\n\t\t<h1 onClick={this.addTrack.bind(this)}>Create track</h1>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Time;\r\n","import React, { Component } from 'react';\r\nimport Tone from 'tone';\r\nimport './editor.css';\r\nimport './awesome.css';\r\nimport APIHelper from '../apiHelper.js';\r\nimport Song from './song/EditableSong.js';\r\nimport InstrEdit from './InstrEdit.js';\r\nimport BlockEdit from './blockEdit/BlockEdit.js';\r\nimport Time from './time/Time.js';\r\n\r\nclass Editor extends Component {  \r\n    constructor(props)\r\n    {\r\n\tsuper(props);\r\n\tthis.state = {\r\n\t    playing: false,\r\n\t    error: false,\r\n\t    name: \"\",\r\n\t    bpm: 120,\r\n\t    key: \"\",\r\n\t    keyType: \"\"\r\n\t};\r\n\tthis.keysArray = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"];\r\n\tthis.keyOptions = this.keysArray.map((key) => {\r\n\t    return (<option>{key}</option>);\r\n\t});\r\n\tthis.ready = false;\r\n\tthis.songId = props.match.params.id;\r\n\tif (this.songId === \"new\") {\r\n\t    this.song = new Song();\r\n\t    this.song.load();\r\n\t    this.song.start();\r\n\t    this.ready = true;\r\n\t} else if (!(this.songId === undefined)) {\r\n\t    APIHelper.getSong(this.songId)\r\n\t    .then((res) => {\r\n\t\treturn JSON.parse(res);\r\n\t    })\r\n\t    .then((parsed) => {\r\n\t\tthis.song = new Song(parsed);\r\n\t\tthis.song.load(parsed);\r\n\t\tthis.song.start();\r\n\t\tthis.ready = true;\r\n\t\tthis.setState({ \r\n\t\t    name: this.song.name,\r\n\t\t    bpm: this.song.bpm,\r\n\t\t    key: this.song.freq,\r\n\t\t    keyType: this.song.keyType\r\n\t\t});\r\n\t\tthis.forceUpdate();\r\n\t    })\r\n\t    .catch((err) => {\r\n\t\tthis.state.error = true;\r\n\t\tthis.state.errComp = <h1> Could not load song: {err} </h1>;\r\n\t    });\r\n\t}\r\n    }\r\n    \r\n    componentDidMount() {\r\n\tif(false && this.song && !this.ready)\r\n\t{\r\n\t    this.song.load(this.songMeta);\r\n\t    this.song.start();\r\n\t    this.ready = true;\r\n\t    this.forceUpdate();\r\n\t}\r\n    }\r\n   \r\n    handleToggle() {\r\n\tthis.setState(state => ({\r\n\t    playing: !state.playing\r\n\t}));\r\n\tif(this.state.playing) {\r\n\t    this.song.pause();\r\n\t}\r\n\telse {\r\n\t    this.song.play();\r\n\t}\r\n    }\r\n\r\n    onSave(evt) {\r\n\tevt.preventDefault();\r\n\tthis.song.save();\r\n    }\r\n\r\n    onChange(evt) {\r\n\tlet newState = {};\r\n\tlet val = evt.target.value;\r\n\tswitch (evt.target.id) {\r\n\t    case \"name\":\r\n\t\tthis.song.setName(val);\r\n\t\tbreak;\r\n\t    case \"bpm\":\r\n\t\tif (val != \"\") {\r\n\t\t    if (val < 1) {\r\n\t\t\tval = 1;\r\n\t\t    } else if (val > 500) {\r\n\t\t\tval = 500;\r\n\t\t    }\r\n\t\t    this.song.setBPM(val);\r\n\t\t}\r\n\t\tbreak;\r\n\t    case \"keyType\":\r\n\t\tthis.song.setKey(this.state.key, val);\r\n\t\tbreak;\r\n\t    case \"key\":\r\n\t\tthis.song.setKey(val, this.state.keyType);\r\n\t}\t\r\n\tnewState[evt.target.id] = val;\r\n\tthis.setState(newState);\r\n    }\r\n\r\n    render() {\r\n\tif(this.state.error) {\r\n\t    return this.state.errComp;\r\n\t}\r\n\tif(!this.song || !this.ready) {\r\n\t    return ( <div> </div> );\r\n\t}\r\n\r\n\treturn (\r\n\t    <div class=\"editor\">\r\n\t\t<div class=\"editor-header\">\r\n\t\t    <span class=\"header-left\">\r\n\t\t    <i onClick={this.handleToggle.bind(this)} class={\"fa \" + (this.state.playing ? \"fa-stop\" : \"fa-play\")}></i>\r\n\t\t    <div class=\"header-controls\">\r\n\t\t        <span>BPM </span>\r\n\t\t        <input value={this.state.bpm} id='bpm' onChange={evt => this.onChange(evt)} type=\"number\" />\r\n\t\t        <span>Key </span>\r\n\t\t        <select id=\"key\" value={this.state.key} onChange={evt => this.onChange(evt)}>\r\n\t\t\t    {this.keyOptions}\r\n\t\t        </select>\r\n\t\t        <select onChange={evt => this.onChange(evt)} id=\"keyType\" value={this.state.keyType}>\r\n\t\t\t    <option>Maj</option>\r\n\t\t\t    <option>min</option>\r\n\t\t        </select>\r\n\t\t    </div>\r\n\t\t    </span>\r\n\t\t    <div class=\"song-name\">\r\n\t\t\t<form onSubmit={(evt) => this.onSave(evt)}>\r\n\t\t\t    <input required onChange={evt => this.onChange(evt)} value={this.state.name} id='name' type='text' placeholder='untitled' class=\"name-input\" />\r\n\t\t\t    <input type='submit' value=\"Save\" className='btn btn-success' />\r\n\t\t\t</form>\r\n\t\t    </div>\r\n\t\t</div>\r\n\t\t<div class=\"row\">\r\n\t\t    <InstrEdit />\r\n\t\t    <BlockEdit block={this.song.activeBlock} />\r\n\t\t</div>\r\n\t\t<Time />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Editor;\r\n","import React, { Component } from 'react';\r\nimport constant from './constants.js';\r\n\r\nclass Home extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.slide1 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide1.png)'\r\n\t\t};\r\n\t\tthis.slide2 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide2.png)'\r\n\t\t};\r\n\t\tthis.slide3 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide3.png)'\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div id=\"carouselExampleIndicators\" className=\"carousel slide\" data-ride=\"carousel\">\r\n\t\t\t\t\t\t<ol className=\"carousel-indicators\">\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" className=\"active\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>\r\n\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t\t<div className=\"carousel-inner\" role=\"listbox\">\r\n\t\t\t\t\t\t\t<div className=\"carousel-item active\" style={this.slide1}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Create 8-Bit Music in Just Minutes</h1>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light carousel-button\">View The Tutorial</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide2}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Perfect For Retro-Style Games</h1>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light carousel-button\">Listen To Example Songs</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide3}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Get Started With Our Free Chiptune Editor</h1>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light carousel-button\">Create a New Song</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<a className=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Previous</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<a className=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Next</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div className=\"container content\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-lg-9 col-md-8\">\r\n\t\t\t\t\t\t\t<h3>Popular Songs</h3>\r\n\t\t\t\t\t\t\t<ul className=\"song-list\">\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<div className=\"song-header\" style={{background: '#007eff45'}}>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-light playback-btn play-btn\"></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"song-title\">Sample Song</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"buttons-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-light\"><i className=\"fa fa-pencil\"></i></button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-light\"><i className=\"fa fa-trash\"></i></button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" className=\"song-artist\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"name\">Artist Name</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"username\">@johnsmith</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"play-progress\" style={{width: '60%'}}></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"song-body\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"song-rating changeable\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"star active full\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"star full\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"star half\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"star\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"star\"></div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"song-dates\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"song-creation-date\">Created November 15, 2018</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"song-update-date\">Updated November 16, 2018</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-lg-3 col-md-4\">\r\n\t\t\t\t\t\t\t<h3>About</h3>\r\n\t\t\t\t\t\t\t<p>Chip Share is a chiptune song editor right on your browser! It is developed using <a href=\"https://reactjs.org/\">ReactJS</a> as a front-end framework and <a href=\"https://expressjs.com/\">Express</a> back-end framework.</p>\r\n\t\t\t\t\t\t\t<p>The project is the result of a school project collectively developed by Jake, Carson, Mishel, and Alex at Ryerson University, Toronto, Canada.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\n\r\nclass Login extends Component {\r\n    constructor(props)\r\n    {\r\n\tsuper(props);\r\n\tthis.state = {\r\n\t    user: \"\",\r\n\t    pass: \"\",\r\n\t    alertComponent: null\r\n\t}\r\n    }\r\n\r\n    onSubmit(event)\r\n    {\r\n\tevent.preventDefault();\r\n\tvar response = APIHelper.login(this.state.user, this.state.pass);\r\n\tvar comp = (response === \"Success\" ? \r\n\t\t(<Redirect to=\"/profile\"/>) : \r\n\t\t(<div class=\"alert alert-danger\" role=\"alert\">{response}</div>));\r\n\tthis.setState({\r\n\t    alertComponent: comp\r\n\t});\r\n    }\r\n\r\n    onChange(evt)\r\n    {\r\n\tvar newState = {};\r\n\tnewState[evt.target.id] = evt.target.value; \r\n\tthis.setState(newState);\r\n    }\r\n    \r\n    render() {\r\n\treturn (\r\n\t    <div>\r\n\t\t<form onSubmit={(evt) => this.onSubmit(evt)} class=\"form-signin\">\r\n\t\t    <h1>Please sign in</h1>\r\n\t\t    <label for=\"user\" class=\"sr-only\">Username</label>\r\n\t\t    <input value={this.state.user} onChange={evt => this.onChange(evt)} type=\"text\" id=\"user\" class=\"form-control\" placeholder=\"Username\" required autofocus />\r\n\t\t    <label for=\"pass\" class=\"sr-only\">Password</label>\r\n\t\t    <input value={this.state.pass} onChange={evt => this.onChange(evt)} type=\"password\" id=\"pass\" class=\"form-control\" placeholder=\"Password\" required />\r\n\t\t    <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in</button>\r\n\t\t    <h3>Don't have an account?</h3>\r\n\t\t    <Link to=\"/register\">Register Here</Link>\r\n\t\t</form>\t\r\n\t\t{this.state.alertComponent}\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Login;\r\n","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\n\r\nclass Register extends Component {\r\n    constructor(props)\r\n    {\r\n\tsuper(props);\r\n\tthis.state = {\r\n\t    name: \"\",\r\n\t    user: \"\",\r\n\t    pass: \"\",\r\n\t    capt: \"\",\r\n\t    alertComponent: null,\r\n\t    captcha: (<h1> LOADING CAPTCHA! </h1>)\r\n\t}\r\n\r\n\tAPIHelper.registerCaptcha()\r\n\t.then((data) => {\r\n\t    return JSON.parse(data);\r\n\t})\r\n\t.then((parsed) => {\r\n\t    let thing = new DOMParser().parseFromString(parsed.captcha.image, \"text/xml\").firstChild;\r\n\t    console.log(thing);\r\n\t    let element = <svg dangerouslySetInnerHTML={{__html: thing.innerHTML}}></svg>;\r\n\t    this.key = parsed.captcha.key;\r\n\t    this.setState({ captcha: element });\r\n\t})\r\n\t.catch((err) => {\r\n\t    console.log(err);\r\n\t});\r\n    }\r\n\r\n    onSubmit(event)\r\n    {\r\n\tevent.preventDefault();\r\n\tvar response = APIHelper.register(this.state.name, this.state.user, this.state.pass, { key: this.key, answer: this.state.capt });\r\n\tvar comp;\r\n\tif (response === \"Success\")\r\n\t{\r\n\t    APIHelper.login(this.state.user, this.state.pass);\r\n\t    comp = <Redirect to=\"/profile\"/>;\r\n\t}\r\n\telse\r\n\t{\r\n\t    comp = <div class=\"alert alert-danger\" role=\"alert\">{response}</div>;\r\n\t}\r\n\tthis.setState({\r\n\t    alertComponent: comp\r\n\t});\r\n    }\r\n\r\n    onChange(evt)\r\n    {\r\n\tvar newState = {};\r\n\tnewState[evt.target.id] = evt.target.value; \r\n\tthis.setState(newState);\r\n    }\r\n    \r\n    render() {\r\n\treturn (\r\n\t    <div>\r\n\t\t<form onSubmit={(evt) => this.onSubmit(evt)} class=\"form-signin\">\r\n\t\t    <h1>Register</h1>\r\n\t\t    <input value={this.state.name} onChange={evt => this.onChange(evt)} type=\"text\" id=\"name\" class=\"form-control\" placeholder=\"Name\" required autofocus /> \r\n\t\t    <input value={this.state.user} onChange={evt => this.onChange(evt)} type=\"text\" id=\"user\" class=\"form-control\" placeholder=\"Username\" required />\r\n\t\t    <input value={this.state.pass} onChange={evt => this.onChange(evt)} type=\"password\" id=\"pass\" class=\"form-control\" placeholder=\"Password\" required />\r\n\t\t    {this.state.captcha}\r\n\t\t    <input value={this.state.capt} onChange={evt => this.onChange(evt)} type=\"text\" id=\"capt\" class=\"form-control\" placeholder=\"Captcha Text\" required />\r\n\t\t    <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Register</button>\r\n\t\t    <h3>Already have an account?</h3>\r\n\t\t    <Link to=\"/login\">Login Here</Link>\r\n\t\t</form>\r\n\t\t{this.state.alertComponent}\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Register;\r\n","import { Component } from 'react';\r\nimport React from \"react\";\r\nimport apiHelper from \"./apiHelper\";\r\n\r\nclass SongRating extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: undefined,\r\n\t\t\tuserValue: this.props.song.ratings ? this.props.song.ratings.currentUserRating : null\r\n\t\t};\r\n\t\tthis.value = this.props.song.ratings ? this.props.song.ratings.average : 0;\r\n\t}\r\n\tonMouseEnter(pos) {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: pos\r\n\t\t});\r\n\t}\r\n\tonMouseLeave() {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: undefined\r\n\t\t});\r\n\t}\r\n\tsetRating(rating) {\r\n\t\trating = rating === this.state.userValue ? null : rating;\r\n\t\tapiHelper.rateSong(this.props.song.id, rating)\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tuserValue: rating\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\t// TODO implement properly\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst stars = [];\r\n\t\tfor (let i = 1; i <= 5; i++) {\r\n\t\t\tlet classes = \"star\";\r\n\t\t\tif (Math.ceil(this.props.value) >= i) {\r\n\t\t\t\tif (this.props.value < i) {\r\n\t\t\t\t\tclasses += \" half\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclasses += \" full\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.state.userValue && this.state.userValue >= i) {\r\n\t\t\t\tclasses += \" active\";\r\n\t\t\t}\r\n\t\t\tif (this.state.hover && this.state.hover >= i) {\r\n\t\t\t\tclasses += \" hover\";\r\n\t\t\t}\r\n\t\t\tstars.push(<div\r\n\t\t\t\tclassName={classes}\r\n\t\t\t\tonMouseEnter={this.onMouseEnter.bind(this, i)}\r\n\t\t\t\tonMouseLeave={this.onMouseLeave.bind(this)}\r\n\t\t\t\tonClick={this.setRating.bind(this, i)}>\r\n\t\t\t</div>);\r\n\t\t}\r\n\t\tlet classes = \"song-rating\"+(this.props.changeable ? \" changeable\" : \"\");\r\n\t\treturn (\r\n\t\t\t<div className={classes}>{stars}</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongRating;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongRating from './SongRating.js';\r\n\r\nclass SongPlayer extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect: false,\r\n\t\t\tto: \"\",\r\n\t\t\tplayBtn: \"play-btn\",\r\n\t\t\tplaying: false\r\n\t\t};\r\n\t\tthis.song = props.song;\r\n\t}\r\n\r\n\tonEdit() {\r\n\t\tlet id = this.song.id || \"\";\r\n\t\tthis.setState({\r\n\t\t\tredirect: true,\r\n\t\t\tto: \"/editor/\" + id\r\n\t\t});\r\n\t}\r\n\r\n\tonPlayPause() {\r\n\t\tif (this.state.playing) {\r\n\t\t\tthis.setState({ playBtn: \"play-btn\", playing: false });\r\n\t\t\tthis.song.pause();\r\n\t\t} else {\r\n\t\t\tif (!this.song.loaded) {\r\n\t\t\t\tAPIHelper.getSong(this.song.id)\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\treturn JSON.parse(data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((parsed) => {\r\n\t\t\t\t\t\tthis.song.load(parsed);\r\n\t\t\t\t\t\tthis.song.start();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch({\r\n\t\t\t\t\t\t// Could not play error\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.setState({ playBtn: \"pause-btn\", playing: true });\r\n\t\t\tthis.song.play();\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.redirect) {\r\n\t\t\treturn <Redirect to={this.state.to} />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<li>\r\n\t\t\t\t<div className=\"song-header\" style={{background: '#007eff45'}}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button onClick={() => this.onPlayPause()} className={\"btn btn-light playback-btn \" + this.state.playBtn}></button>\r\n\t\t\t\t\t\t<div className=\"song-title\">{this.song.name}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"buttons-container\">\r\n\t\t\t\t\t\t\t<button onClick={()=> this.onEdit()} className=\"btn btn-light\"><i className=\"fa fa-pencil\"></i></button>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-light\"><i className=\"fa fa-trash\"></i></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<a href=\"#\" className=\"song-artist\">\r\n\t\t\t\t\t\t\t<div className=\"name\">{this.song.author}</div>\r\n\t\t\t\t\t\t\t<div className=\"username\">@{this.song.username}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"play-progress\" style={{width: '0%'}}></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"song-body\">\r\n\t\t\t\t\t<SongRating song={this.song} changeable={true} value={this.song.ratings ? this.song.ratings.average : 0} />\r\n\t\t\t\t\t<div className=\"song-dates\">\r\n\t\t\t\t\t\t<span className=\"song-creation-date\">Created {this.song.getFormattedCreate()}</span>\r\n\t\t\t\t\t\t<span className=\"song-update-date\">{\r\n\t\t\t\t\t\t\tthis.song.hasBeenUpdated() ? \"Updated \" + this.song.getFormattedUpdate() : \"\"\r\n\t\t\t\t\t\t}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongPlayer;\r\n","import React, { Component } from 'react';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongPlayer from './SongPlayer.js';\r\nimport Song from './editor/song/Song.js';\r\n\r\nclass Profile extends Component {\r\n\r\n    render() {\r\n\tvar songs = [];\r\n\tvar songMetas = APIHelper.getSongs();\r\n\tfor (let i = 0; i< songMetas.length; i++) {\r\n\t    songs.push(<SongPlayer song={new Song(songMetas[i])} />);\r\n\t}\r\n\r\n\treturn (\r\n\t    <div>\r\n\t      <h1 class=\"account-name\">Account Name</h1>\r\n\t      <div class=\"container\">\r\n\t          <h3>My Songs</h3>\r\n\t\t  <hr></hr>\r\n\t          <ul className='song-list'>\r\n\t\t      {songs}\r\n\t          </ul>\r\n\t      </div>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Profile;\r\n","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport * as Cookies from 'js-cookie';\r\nimport Editor from './editor/Editor.js';\r\nimport Home from './Home.js';\r\nimport Login from './Login.js';\r\nimport Register from './Register.js';\r\nimport Profile from './Profile.js';\r\nimport constant from './constants.js';\r\n\r\nclass App extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconsole.log(process.env);\r\n\t\tconsole.log(constant.ROOT_PATH);\r\n\t\tthis.itemNames = [\r\n\t\t\t\"Create\", \"My Songs\", \"Community\"\r\n\t\t];\r\n\t\tthis.destination = [\r\n\t\t\tconstant.ROOT_PATH + \"editor/new\",\r\n\t\t\tconstant.ROOT_PATH + \"profile\",\r\n\t\t\tconstant.ROOT_PATH + \"\"\r\n\t\t];\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst navBarItems = this.itemNames.map((name, index) => {\r\n\t\t    return <li className=\"nav-item\" key={index}>\r\n\t\t\t    <a href={this.destination[index]} className={\"nav-link \" + (false ? \"active\" : \"\")}>\r\n\t\t\t\t    {this.itemNames[index]}\r\n\t\t\t    </a>\r\n\t\t    </li>;\r\n\t\t});\r\n\t\tconst UserMenu = () => {\r\n\t\t    var name = Cookies.get('name');\r\n\t\t    return <ul className=\"navbar-nav ml-auto\">\r\n\t\t\t{(name === undefined) ?\r\n\t\t\t(<a class=\"nav-link\" href={constant.ROOT_PATH + \"login\"}>Log In / Register</a>)\r\n\t\t\t    :\r\n\t\t\t(<li class=\"nav-item dropdown\">\r\n\t\t\t    <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\tLogged in as: {name}\r\n\t\t\t    </a>\r\n\t\t\t    <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n\t\t\t\t<a class=\"dropdown-item\" href=\"#\">Profile</a>\r\n\t\t\t\t<a class=\"dropdown-item\" href=\"#\">Options</a>\r\n\t\t\t\t<div class=\"dropdown-divider\"></div>\r\n\t\t\t\t<a class=\"dropdown-item\" href=\"#\">Log Out</a>\r\n\t\t\t    </div>\r\n\t\t\t</li>)}\r\n\t\t\t</ul>;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Router basename={constant.ROOT_PATH}>\r\n\t\t\t\t    <div>\r\n\t\t\t\t\t<nav className=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\r\n\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t<a className=\"navbar-brand\" href={constant.ROOT_PATH}>Chip Share</a>\r\n\t\t\t\t\t\t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n\t\t\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarResponsive\">\r\n\t\t\t\t\t\t\t\t<ul className=\"navbar-nav mr-auto\">\r\n\t\t\t\t\t\t\t\t\t{navBarItems}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<Route path=\"/\" component={UserMenu} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</nav>\r\n\t\t\t\t\t<Route path=\"/\" exact component={Home} />\r\n\t\t\t\t\t<Route path=\"/editor\" component={Editor} />\r\n\t\t\t\t\t<Route path=\"/editor/:id\" component={Editor} />\r\n\t\t\t\t\t<Route path=\"/login\" component={Login} />\r\n\t\t\t\t\t<Route path=\"/register\" component={Register} />\r\n\t\t\t\t\t<Route path=\"/profile\" component={Profile} />\r\n\t\t\t\t    </div>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}