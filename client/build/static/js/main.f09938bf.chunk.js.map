{"version":3,"sources":["constants.js","apiHelper.js","editor/song/Track.js","editor/song/Block.js","editor/song/Song.js","editor/song/EditableSong.js","editor/InstrEdit.js","editor/blockEdit/Tile.js","editor/blockEdit/Line.js","editor/blockEdit/BlockEdit.js","editor/time/Block.js","editor/time/Track.js","editor/time/Time.js","editor/Editor.js","SongRating.js","SongPlayer.js","SongList.js","Home.js","Login.js","layout/TextInput.js","Register.js","Profile.js","assignment_pages/FrameworksPage.js","assignment_pages/TutorialPage.js","assignment_pages/ConclusionPage.js","assignment_pages/InstallationPage.js","assignment_pages/CreditsPage.js","MenuDropdown.js","Logout.js","App.js","serviceWorker.js","index.js"],"names":["constant","ROOT_PATH","getResponse","xhr","getResponseHeader","includes","JSON","parse","response","makeApiRequest","method","route","body","arguments","length","undefined","Promise","resolve","reject","XMLHttpRequest","open","token","Cookies","setRequestHeader","onload","this","status","request","onerror","send","apiHelper","getCaptcha","then","catch","err","register","inputData","captchaKey","req","captcha","answer","key","stringify","login","user","pass","username","password","res","name","toLowerCase","expires","refreshSecret","logout","createSong","song","console","log","id","getSongsDirty","userId","url","getSongs","popular","delimiterId","params","str","encodeURIComponent","serializeParams","getSong","format","songPromise","onreadystatechange","readyState","rateSong","rating","fetchUser","isLoggedIn","getCurrentUser","e","Track","track","Object","classCallCheck","blocks","settings","typeId","metadata","types","dataValues","off","on","start","end","mid","convertFromData","data","block","i","dataLine","line","j","value","push","type","clickF","startF","endF","midF","Block","storedBlock","months","getFormattedDate","date","currentDate","Date","getDate","getMonth","getFullYear","totMin","Math","floor","hours","minutes","hourString","minuteString","Song","songMeta","tracks","bpm","blockLength","createDate","updateDate","author","ratings","setKey","loaded","progressListeners","freq","keyType","step","Tone","Frequency","transpose","synth","releaseAll","instruments","activeBlock","_this","Transport","cancel","PolySynth","Synth","toMaster","triggerAttackRelease","loopEnd","loop","count","Loop","time","triggerAttack","triggerRelease","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","keys","Symbol","iterator","next","done","bind","return","stop","APIHelper","getSendableSong","sendableSong","map","convertToData","abs","context","listener","EditableSong","possibleConstructorReturn","getPrototypeOf","call","selectedTrack","InstrEdit","react_default","a","createElement","Component","Tile","props","state","tile","event","dragger","active","forceUpdate","class","onMouseDown","onMouseUp","onMouseMove","Line","tiles","blockEdit_Tile","lineNum","BlockEdit","lines","blockEdit_Line","Template","remove","className","onClick","time_Block","Time","time_Track","removeTrack","assertThisInitialized","offset","copy","slice","setState","me","filter","addTrack","Editor","playing","error","keysArray","keyOptions","ready","songId","match","load","parsed","errComp","pause","play","evt","preventDefault","save","newState","val","target","setName","setBPM","_this2","handleToggle","onChange","onSubmit","onSave","required","placeholder","editor_InstrEdit","blockEdit_BlockEdit","time_Time","SongRating","hover","userValue","currentUserRating","average","pos","changeable","stars","classes","ceil","onMouseEnter","onMouseLeave","setRating","SongPlayer","redirect","to","playBtn","addProgressListener","progress","_this3","Redirect","style","background","onPlayPause","onEdit","href","constants","width","src_SongRating","getFormattedCreate","hasBeenUpdated","getFormattedUpdate","SongList","songs","loading","loadMore","songData","hasOwnProperty","src_SongPlayer","disabled","Home","slide1","backgroundImage","slide2","slide3","data-ride","data-target","data-slide-to","role","data-slide","aria-hidden","src_SongList","Login","fieldErrors","refs","message","charAt","toUpperCase","substring","errors","input","ref","hideError","margin","Link","TextInput","Register","dangerouslySetInnerHTML","__html","image","ensureErrorCorrection","getValue","clientError","loginRequest","json","captchaError","layout_TextInput","Profile","FrameworksPage","TutorialPage","ConclusionPage","InstallationPage","src","alt","CreditsPage","title","scrollArea_default","horizontal","speed","MenuDropdown","toggleOpen","data-toggle","item","items","listItem","path","Logout","App","menu","userOnly","navBarItems","menuItem","src_MenuDropdown","window","location","pathname","BrowserRouter","basename","aria-controls","aria-expanded","aria-label","Route","component","aria-haspopup","aria-labelledby","exact","Boolean","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"wUAIeA,EAJE,CACbC,UAAW,KCITC,EAAc,SAACC,GAEpB,OADoBA,EAAIC,kBAAkB,gBAC1BC,SAAS,oBACjBC,KAAKC,MAAMJ,EAAIK,UAEfL,EAAIK,UAGPC,EAAiB,SAACC,EAAQC,GAAuB,IAAhBC,EAAgBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAT,KAC7C,OAAO,IAAIG,QAAQ,SAAUC,EAASC,GACrC,IAAIf,EAAM,IAAIgB,eACdhB,EAAIiB,KAAKV,EAAQV,EAASC,UAAY,OAASU,GAC/C,IAAMU,EAAQC,MAAY,SACtBD,GACHlB,EAAIoB,iBAAiB,gBAAiBF,GACvClB,EAAIqB,OAAS,WACRC,KAAKC,QAAU,KAAOD,KAAKC,OAAS,IACvCT,EAAQd,GAERe,EAAO,CACNQ,OAAQD,KAAKC,OACbC,QAASxB,KAIZA,EAAIyB,QAAU,WACbV,EAAO,CACNQ,OAAQD,KAAKC,OACbC,QAASxB,KAGC,MAARS,GAAgC,qBAATA,GAC1BT,EAAIoB,iBAAiB,eAAgB,oBACrCpB,EAAI0B,KAAKjB,IAETT,EAAI0B,UA4JQC,EA/IG,CACjBC,WAAY,WACX,OAAO,IAAIf,QAAQ,SAASC,EAASC,GACpCT,EAAe,MAAO,iBACpBuB,KAAK,SAAC7B,GAAD,OAASc,EAAQf,EAAYC,MAClC8B,MAAM,SAACC,GAAD,OAAShB,EAAOgB,QAG1BC,SAAU,SAASC,EAAWC,GAC7B,IAAMC,EAAM,IAAInB,eAUhB,OATAmB,EAAIlB,KAAK,OAAQpB,EAASC,UAAY,qBAAqB,GAC3DqC,EAAIf,iBAAiB,eAAgB,oBACjCa,EAAUG,UACbH,EAAUG,QAAU,CACnBC,OAAQJ,EAAUG,QAClBE,IAAKJ,IAGPC,EAAIT,KAAKvB,KAAKoC,UAAUN,IACjBE,GAERK,MAAO,SAASC,EAAMC,GACrB,IAAMP,EAAM,IAAInB,eAOhB,GANAmB,EAAIlB,KAAK,OAAQpB,EAASC,UAAY,kBAAkB,GACxDqC,EAAIf,iBAAiB,eAAgB,oBACrCe,EAAIT,KAAKvB,KAAKoC,UAAU,CACvBI,SAAUF,EACVG,SAAUF,KAEQ,MAAfP,EAAIZ,OAAgB,CACvB,IAAIsB,EAAM1C,KAAKC,MAAM+B,EAAI9B,UACzBc,MAAY,OAAQhB,KAAKoC,UAAU,CAACO,KAAMD,EAAIC,KAAMH,SAAUF,EAAKM,iBAAmB,UAAW,CAChGC,QAlFgB,EAAE,KAoFnB7B,MAAY,QAAS0B,EAAI3B,MAAO,CAC/B8B,QArFgB,EAAE,KAuFnB7B,MAAY,SAAU0B,EAAII,cAAe,CACxCD,QAxFgB,EAAE,KA2FpB,OAAOb,GAERe,OAAQ,WACP/B,SAAe,QACfA,SAAe,SACfA,SAAe,WAEhBgC,WAAY,SAASC,GACpB,IAAIlC,EAAQC,MAAY,SACxB,QAAeP,IAAVM,EAAsB,CAC1B,IAAIiB,EAAM,IAAInB,eAMd,GALAmB,EAAIlB,KAAK,OAAQpB,EAASC,UAAY,oBAAoB,GAC1DqC,EAAIf,iBAAiB,eAAgB,oBACrCe,EAAIf,iBAAiB,gBAAiBF,GACtCiB,EAAIT,KAAKvB,KAAKoC,UAAUa,IACxBC,QAAQC,IAAInB,EAAI9B,UACG,MAAf8B,EAAIZ,OACP,OAAOY,EAAI9B,SAASkD,QAGrBF,QAAQC,IAAI,mBAGdE,cAAe,SAASC,GACvB,IACIC,EADAvB,EAAM,IAAInB,eAGb0C,OADa9C,IAAX6C,EACI5D,EAASC,UAAY,YAErBD,EAASC,UAAY,wBAA0B2D,EAEtDtB,EAAIlB,KAAK,MAAOyC,GAAK,GACrB,IAAMxC,EAAQC,MAAY,SAI1B,OAHID,GACHiB,EAAIf,iBAAiB,gBAAiBF,GACvCiB,EAAIT,OACe,MAAfS,EAAIZ,OACApB,KAAKC,MAAM+B,EAAI9B,UAEf,IAGTsD,SAAU,WAA6D,IAApDF,EAAoD/C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA3C,KAAMkD,EAAqClD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAApBmD,EAAoBnD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAC1DoD,EAAS,GAIf,OAHIL,IAAQK,EAAOL,OAASA,GACxBG,IAASE,EAAOF,QAAU,GAC1BC,IAAaC,EAAOD,YAAcA,GAC/B,IAAIhD,QAAQ,SAASC,EAASC,GACpCT,EAAe,MAAO,QAnGD,SAASwD,GAChC,IAAIC,EAAM,GACV,IAAK,IAAMzB,KAAOwB,EACL,KAARC,IACHA,GAAO,KACRA,GAAOzB,EAAM,IAAM0B,mBAAmBF,EAAOxB,IAE9C,OAAOyB,EAAIpD,OAAS,EAAI,IAAIoD,EAAM,GA4FFE,CAAgBH,IAC5CjC,KAAK,SAAC7B,GAAD,OAASc,EAAQf,EAAYC,MAClC8B,MAAM,SAACC,GAAD,OAAShB,EAAOgB,QAG1BmC,QAAS,SAASX,GAAqB,IAAjBY,EAAiBzD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAR,OAC1ByB,EAAM,IAAInB,eACdmB,EAAIlB,KAAK,MAAOpB,EAASC,UAAY,aAAeyD,EAAK,IAAMY,GAAQ,GACvE,IAAMjD,EAAQC,MAAY,SACtBD,GAAoB,SAAXiD,GACZhC,EAAIf,iBAAiB,gBAAiBF,GACvC,IAAIkD,EAAc,IAAIvD,QAAQ,SAACC,EAASC,GACvCoB,EAAIkC,mBAAqB,WAED,IAAnBlC,EAAImC,aAEY,MAAfnC,EAAIZ,OACPT,EAAQqB,EAAI9B,UAEZU,EAAOoB,EAAI9B,cAMf,OADA8B,EAAIT,OACG0C,GAERG,SAAU,SAAShB,GAAmB,IAAfiB,EAAe9D,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAC/B,OAAO,IAAIG,QAAQ,SAASC,EAASC,GACpCT,EAAe,OAAQ,cAAciD,GAAIiB,EAAS,IAAIA,EAAS,KAC7D3C,KAAK,kBAAMf,GAAQ,KACnBgB,MAAM,SAACC,GAAD,OAAShB,EAAOgB,QAG1B0C,UAAW,SAAS9B,GACnB,OAAO,IAAI9B,QAAQ,SAASC,EAASC,GACpCT,EAAe,MAAO,cAAcqC,GAClCd,KAAK,SAAC7B,GAAD,OAASc,EAAQf,EAAYC,MAClC8B,MAAM,SAACC,GAAD,OAAShB,EAAOgB,QAG1B2C,WAAY,WACX,QAASvD,MAAY,UAEtBwD,eAAgB,WACf,IAAKxD,MAAY,WAAaA,MAAY,QAAS,OAAO,KAC1D,IACC,OAAOhB,KAAKC,MAAMe,MAAY,SAC7B,MAAOyD,GACR,OAAO,QC7KKC,EAjBX,SAAAA,EAAYC,GAAQC,OAAAC,EAAA,EAAAD,CAAAzD,KAAAuD,GAEnBvD,KAAKwD,WADMlE,KAAVkE,EACYA,EAEA,CAChBG,OAAQ,CACJ,GAEJC,SAAU,CACNC,OAAQ,EACRC,SAAU,WCXVC,EAAQ,CAAC,MAAO,KAAM,QAAS,MAAO,OACtCC,EAAa,CACfC,IAAO,EAAGC,GAAM,EAAGC,MAAS,EAAGC,IAAO,EAAGC,IAAO,GAIhDC,EAAkB,SAACC,EAAMC,GACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAKlF,OAAQoF,IACjC,CAGH,IAFA,IAAIC,EAAWH,EAAKE,GAChBE,EAAO,GACFC,EAAI,EAAGA,EAAIF,EAASrF,OAAQuF,IACrC,CACI,IAAIC,EAAQH,EAASE,GACrBD,EAAKG,KAAK,CACbC,KAAMhB,EAAMc,GACZG,OAAQ,WACa,QAAdhF,KAAK+E,KAEX/E,KAAK+E,KAAO,KAIZ/E,KAAK+E,KAAO,OAGbE,OAAQ,WACJjF,KAAK+E,KAAO,SAEhBG,KAAM,WACFlF,KAAK+E,KAAO,OAEhBI,KAAM,WACFnF,KAAK+E,KAAO,SAIjBP,EAAMM,KAAKH,KA2DGS,aArDX,SAAAA,EAAYC,GAEf,GAF6B5B,OAAAC,EAAA,EAAAD,CAAAzD,KAAAoF,GAC7BpF,KAAKwE,MAAQ,QACSlF,IAAhB+F,EAEFf,EAAgBe,EAAYd,KAAMvE,KAAKwE,YAGvC,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAEhC,IADA,IAAIE,EAAO,GACHC,EAAI,EAAGA,EAAI,GAAIA,IACnBD,EAAKG,KAAK,CACbC,KAAM,MACNC,OAAQ,WACa,QAAdhF,KAAK+E,KAEX/E,KAAK+E,KAAO,KAIZ/E,KAAK+E,KAAO,OAGbE,OAAQ,WACJjF,KAAK+E,KAAO,SAEhBG,KAAM,WACFlF,KAAK+E,KAAO,OAEhBI,KAAM,WACFnF,KAAK+E,KAAO,SAIjB/E,KAAKwE,MAAMM,KAAKH,gEAOjB,IADA,IAAIJ,EAAO,GACFE,EAAI,EAAGA,EAAIzE,KAAKwE,MAAMnF,OAAQoF,IAAK,CAGxC,IAFA,IAAIE,EAAO3E,KAAKwE,MAAMC,GAClBC,EAAW,GACNE,EAAI,EAAGA,EAAID,EAAKtF,OAAQuF,IAAK,CACzC,IAAIC,EAAQF,EAAKC,GAAGG,KACpBL,EAASI,KAAKd,EAAWa,IAEtBN,EAAKO,KAAKJ,GAEd,OAAOH,WC+DFe,EAAS,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,MAAO,MAAO,MAAO,MAAO,OAE9F,SAASC,EAAiBC,GACzB,IAAIC,EAAc,IAAIC,KAEtB,GAAGD,EAAYE,YAAcH,EAAKG,WAC9BF,EAAYG,aAAeJ,EAAKI,YAChCH,EAAYI,gBAAkBL,EAAKK,cACvC,CACC,IAAIC,EAASC,KAAKC,OAAOP,EAAcD,GAAQ,KAC3CS,EAAQF,KAAKC,MAAMF,EAAS,IAC5BI,EAAUJ,EAAS,GACnBK,EAAa,OAEjB,GADGF,EAAQ,IAAGE,GAAc,KACb,IAAZD,EAEF,OAAOD,EAAQ,IAAME,EAAa,QAEnC,IAAIC,EAAe,SAEnB,OADGF,EAAU,IAAGE,GAAgB,KACnB,IAAVH,EAEKC,EAAU,IAAME,EAAe,OAEhCH,EAAQ,IAAME,EAAa,QAAUD,EAAU,IAAME,EAAe,OAE5E,OAAOd,EAAOE,EAAKI,YAAc,IAAMJ,EAAKG,UAAY,KAAOH,EAAKK,cAGtDQ,iBAjLd,SAAAA,EAAYC,GAAW7C,OAAAC,EAAA,EAAAD,CAAAzD,KAAAqG,GACtBrG,KAAK2D,OAAS,GACd3D,KAAKuG,OAAS,QACKjH,IAAbgH,GAELtG,KAAKwB,KAAO8E,EAAS9E,KACrBxB,KAAKwG,IAAMF,EAASE,IACpBxG,KAAKyG,YAAcH,EAASG,YAE5BzG,KAAK0G,WAAa,IAAIhB,KAAKY,EAASI,YACpC1G,KAAK2G,WAAaL,EAASK,WAAa,IAAIjB,KAAKY,EAASK,YAAc,KACxE3G,KAAK4G,OAASN,EAASnF,KAAKK,KAC5BxB,KAAKqB,SAAWiF,EAASnF,KAAKE,SAC9BrB,KAAK6G,QAAUP,EAASO,QAExB7G,KAAKiC,GAAKqE,EAASrE,KAGnBjC,KAAKwB,KAAO,eACZxB,KAAKwG,IAAM,IACXxG,KAAKyG,YAAc,GAEpBzG,KAAK8G,SACL9G,KAAK+G,QAAS,EACd/G,KAAKgH,kBAAoB,sDAGnBC,EAAMlC,GACZ/E,KAAKiH,KAAOA,GAAQ,IACpBjH,KAAKkH,QAAUnC,GAAQ,MACvB/E,KAAKgB,IAAM,GACXhB,KAAKgB,IAAI,IAAOhB,KAAKiH,KAAO,IAI5B,IAHA,IAAIE,EAAiB,QAATpC,EACX,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACvBN,EAAI,GAAIG,EAAI,EAAGH,GAAK,EAAGA,IAAKG,IACpC5E,KAAKgB,IAAIyD,GAAK2C,IAAKC,UAAUrH,KAAKgB,IAAIyD,EAAE,IAAI6C,UAAUH,EAAKvC,IAExD5E,KAAKuH,OAAOvH,KAAKuH,MAAMC,0CAGvBlB,GAEJ,GADAtG,KAAK2D,OAAOmB,KAAK,WACFxF,IAAZU,KAAKiC,SAAiC3C,IAAbgH,EAG3BtG,KAAK2D,OAAOmB,KAAK,IAAIM,GACrBpF,KAAKuG,OAAOzB,KAAK,IAAIvB,OACf,CAEN,IAAK,IAAIkB,EAAI,EAAGA,EAAI6B,EAASmB,YAAYpI,OAAQoF,IAChDzE,KAAKuG,OAAOzB,KAAK,IAAIvB,EAAM+C,EAASmB,YAAYhD,KAEjD,IAAK,IAAIA,EAAI,EAAGA,GAAKzE,KAAKyG,YAAahC,IAAK,CAC3C,IAAID,EAAQ,IAAIY,EAAMkB,EAAS3C,OAAOc,IACtCzE,KAAK2D,OAAOmB,KAAKN,IAGnBxE,KAAK0H,YAAc1H,KAAK2D,OAAO,GAAGa,MAClCxE,KAAK+G,QAAS,kCAGP,IAAAY,EAAA3H,KACPoH,IAAKQ,UAAUC,SACf7H,KAAKuH,MAAQ,IAAIH,IAAKU,UAAU,EAAGV,IAAKW,OAAOC,WAC/ChI,KAAKuH,MAAMU,qBAAqB,KAAM,MACtCb,IAAKQ,UAAUM,QAAUlI,KAAKyG,YAAc,IAC5CW,IAAKQ,UAAUO,MAAO,EACtBf,IAAKQ,UAAUpB,IAAI3B,MAAQ7E,KAAKwG,IAChCxG,KAAKoI,MAAQ,EACbpI,KAAKmI,KAAO,IAAIf,IAAKiB,KAAK,SAACC,GAC1B,IAAK,IAAI7D,EAAI,EAAGA,EAAI,GAAIA,IACvB,OAAOkD,EAAKD,YAAYjD,GAAGkD,EAAKS,OAAOrD,MACtC,IAAK,KACJ4C,EAAKJ,MAAMU,qBAAqBN,EAAK3G,IAAIyD,GAAI,MAAO6D,GACpD,MACD,IAAK,QACJX,EAAKJ,MAAMgB,cAAcZ,EAAK3G,IAAIyD,GAAI6D,GACtC,MACD,IAAK,MACJX,EAAKJ,MAAMiB,eAAeb,EAAK3G,IAAIyD,GAAI6D,GAItCX,EAAKS,OAAS,GACjBT,EAAKS,MAAQ,EAEbT,EAAKS,QAjB6B,IAAAK,GAAA,EAAAC,GAAA,EAAAC,OAAArJ,EAAA,IAmBnC,QAAAsJ,EAAAC,EAAkBlB,EAAKX,kBAAkB8B,OAAzCC,OAAAC,cAAAP,GAAAG,EAAAC,EAAAI,QAAAC,MAAAT,GAAA,OAAWzH,EAAX4H,EAAA/D,MACC8C,EAAKX,kBAAkBhG,GAAKmI,KAAKxB,EAAMA,EAAKS,MAA5CT,IApBkC,MAAAlH,GAAAiI,GAAA,EAAAC,EAAAlI,EAAA,YAAAgI,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,KAqBjC,OAAOxE,uCAIViD,IAAKQ,UAAUzD,wCAIfiD,IAAKQ,UAAUyB,OACfrJ,KAAKuH,MAAMC,4CAIX,QAAelI,IAAZU,KAAKiC,GAEEqH,EAAUzH,WAAW7B,KAAKuJ,6DAkBpC,IATA,IAAIC,EAAe,CAClBhI,KAAMxB,KAAKwB,KACXgF,IAAKxG,KAAKwG,IACVC,YAAazG,KAAKyG,YAClBgB,YAAazH,KAAKuG,OAAOkD,IAAI,SAACjG,GAC7B,OAAOA,EAAMA,QAEdG,OAAQ,IAEDc,EAAI,EAAGA,GAAMzE,KAAK2D,OAAOtE,OAAS,EAAIoF,IAC7C+E,EAAa7F,OAAOc,GAAK,CACxBF,KAAMvE,KAAK2D,OAAOc,GAAGiF,iBAGvB,OAAOF,+CAIP,OAAOjE,EAAiBvF,KAAK0G,yDAI7B,OAAOnB,EAAiBvF,KAAK2G,qDAI7B,OAAO3G,KAAK2G,YAAcZ,KAAK4D,IAAI3J,KAAK0G,WAAa1G,KAAK2G,aAAe,+CAEtDiD,EAASC,GAC5B7J,KAAKgH,kBAAkBlC,KAAK+E,EAASV,KAAKS,aChI7BE,cAnBX,SAAAA,EAAYxD,GAAU,IAAAqB,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAA8J,IACzBnC,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAAqG,GAAAG,KAAAjK,KAAMsG,KACD4D,cAAgB,EAFIvC,2GASdnG,GACXxB,KAAKwB,KAAOA,iCAGFgF,GACVxG,KAAKwG,IAAMA,EACXY,IAAKQ,UAAUpB,IAAI3B,MAAQ7E,KAAKwG,WAhBNH,GC0BZ8D,iLA1BJ3H,GACV,OACI4H,EAAAC,EAAAC,cAAA,OAAKrI,GAAG,aACXmI,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,cACIF,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,+BAEJF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,SAAOvF,KAAK,WACZqF,EAAAC,EAAAC,cAAA,SAAOvF,KAAK,UACZqF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,SAAOvF,KAAK,WACZqF,EAAAC,EAAAC,cAAA,SAAOvF,KAAK,UACZqF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,SAAOvF,KAAK,WACZqF,EAAAC,EAAAC,cAAA,SAAOvF,KAAK,kBArBUwF,aC+CTC,cA9CX,SAAAA,EAAYC,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAAwK,IACtB7C,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAA+G,GAAAP,KAAAjK,KAAMyK,KACDC,MAAQD,EAAME,KAFGhD,2EAKPiD,wCAGAA,GACf5K,KAAKyK,MAAMI,QAAQC,OAAS9K,KAAKyK,MAAM9F,KACvC3E,KAAKyK,MAAMI,QAAQ1G,MAAQnE,uCAKd4K,GACV5K,KAAKyK,MAAM9F,OAAS3E,KAAKyK,MAAMI,QAAQC,SAEnC9K,KAAKyK,MAAMI,QAAQ1G,QAAUnE,KAEnCA,KAAK0K,MAAM1F,UAIXhF,KAAKyK,MAAMI,QAAQ1G,MAAMuG,MAAMzF,SAC/BjF,KAAKyK,MAAMI,QAAQ1G,MAAM4G,cACzB/K,KAAK0K,MAAMxF,QAERlF,KAAK+K,eAET/K,KAAKyK,MAAMI,QAAQC,OAAS,sCAI5B,OACIV,EAAAC,EAAAC,cAAA,OACHU,MAAO,QAAWhL,KAAK0K,MAAM3F,KAC7BkG,YAAajL,KAAKiL,YAAY9B,KAAKnJ,MACnCkL,UAAWlL,KAAKkL,UAAU/B,KAAKnJ,MAC/BmL,YAAanL,KAAKmL,YAAYhC,KAAKnJ,eAxClBuK,aCgBJa,mLAZd,IADA,IAAIC,EAAQ,GACJ5G,EAAI,EAAGA,EAAI,GAAIA,IAEnB4G,EAAMvG,KAAKsF,EAAAC,EAAAC,cAACgB,EAAD,CAAMX,KAAM3K,KAAKyK,MAAM9F,KAAKF,GAAIE,KAAM3E,KAAKyK,MAAMc,QAASV,QAAS7K,KAAKyK,MAAMI,WAE7F,OACIT,EAAAC,EAAAC,cAAA,OAAKU,MAAM,QACbK,UATgBd,aCwBJiB,cAtBX,SAAAA,EAAYf,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAAwL,IACtB7D,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAA+H,GAAAvB,KAAAjK,KAAMyK,KACDI,QAAU,CACXC,QAAS,EACT3G,MAAO,MAJWwD,wEAUtB,IADA,IAAI8D,EAAQ,GACJhH,EAAI,EAAGA,EAAI,GAAIA,IAEnBgH,EAAM3G,KAAKsF,EAAAC,EAAAC,cAACoB,EAAD,CAAM/G,KAAM3E,KAAKyK,MAAMjG,MAAMC,GAAI8G,QAAS9G,EAAGoG,QAAS7K,KAAK6K,WAE1E,OACIT,EAAAC,EAAAC,cAAA,OAAKrI,GAAG,aACVwJ,UAjBqBlB,qBCOToB,mLAPd,OACIvB,EAAAC,EAAAC,cAAA,mBAHkBC,aCkBRhH,mLAbdvD,KAAKyK,MAAMmB,OAAO5L,uCAIlB,OACIoK,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,SAClBzB,EAAAC,EAAAC,cAAA,MAAIwB,QAAS9L,KAAK4L,OAAOzC,KAAKnJ,OAAQA,KAAKyK,MAAMxI,IACjDmI,EAAAC,EAAAC,cAACyB,EAAD,cAXkBxB,aCyCLyB,cAxCX,SAAAA,EAAYvB,GACZ,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAAgM,IACHrE,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAAuI,GAAA/B,KAAAjK,KAAMyK,KACDxI,GAAK,EACV0F,EAAK+C,MAAQ,CACTnE,OAAQ,CAAC6D,EAAAC,EAAAC,cAAC2B,EAAD,CAAOhK,GAAG,IAAI2J,OAAQjE,EAAKuE,YAAY/C,KAAjB1F,OAAA0I,EAAA,EAAA1I,QAAA0I,EAAA,EAAA1I,CAAAkE,SAEnCA,EAAKyE,OAAS,EANXzE,0EAWH,IAAI0E,EAAOrM,KAAK0K,MAAMnE,OAAO+F,MAAM,GACnCD,EAAKvH,KAAKsF,EAAAC,EAAAC,cAAC2B,EAAD,CAAOhK,GAAIjC,KAAKiC,GAAI2J,OAAQ5L,KAAKkM,YAAY/C,KAAKnJ,SAC5DA,KAAKuM,SAAS,SAAA7B,GAAK,MAAK,CACpBnE,OAAQ8F,KAEZrM,KAAKiC,yCAGUuK,GAEfxM,KAAKuM,SAAS,SAAA7B,GAAK,MAAK,CACpBnE,OAAQmE,EAAMnE,OAAOkG,OAAO,SAAS5H,GACxC,QAAS2H,EAAG/B,MAAMxI,KAAO4C,EAAM4F,MAAMxI,0CAOtC,OACImI,EAAAC,EAAAC,cAAA,WACFtK,KAAK0K,MAAMnE,OACZ6D,EAAAC,EAAAC,cAAA,MAAIwB,QAAS9L,KAAK0M,SAASvD,KAAKnJ,OAAhC,wBAnCiBuK,aCwJJoC,cAhJX,SAAAA,EAAYlC,GACZ,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAA2M,IACHhF,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAAkJ,GAAA1C,KAAAjK,KAAMyK,KACDC,MAAQ,CACTkC,SAAS,EACTC,OAAO,EACPrL,KAAM,GACNgF,IAAK,IACLxF,IAAK,GACLkG,QAAS,IAEbS,EAAKmF,UAAY,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAChDnF,EAAKoF,WAAapF,EAAKmF,UAAUrD,IAAI,SAACzI,GAClC,OAAQoJ,EAAAC,EAAAC,cAAA,cAAStJ,KAErB2G,EAAKqF,OAAQ,EACbrF,EAAKsF,OAASxC,EAAMyC,MAAM1K,OAAOP,GACb,QAAhB0F,EAAKsF,QACLtF,EAAK7F,KAAO,IAAIuE,EAChBsB,EAAK7F,KAAKqL,OACVxF,EAAK7F,KAAKqC,QACVwD,EAAKqF,OAAQ,QACY1N,IAAhBqI,EAAKsF,QACd3D,EAAU1G,QAAQ+E,EAAKsF,QACtB1M,KAAK,SAACgB,GACV,OAAO1C,KAAKC,MAAMyC,KAEdhB,KAAK,SAAC6M,GACVzF,EAAK7F,KAAO,IAAIuE,EAAK+G,GACrBzF,EAAK7F,KAAKqL,KAAKC,GACfzF,EAAK7F,KAAKqC,QACVwD,EAAKqF,OAAQ,EACbrF,EAAK4E,SAAS,CACV/K,KAAMmG,EAAK7F,KAAKN,KAChBgF,IAAKmB,EAAK7F,KAAK0E,IACfxF,IAAK2G,EAAK7F,KAAKmF,KACfC,QAASS,EAAK7F,KAAKoF,UAEvBS,EAAKoD,gBAEDvK,MAAM,SAACC,GACXkH,EAAK+C,MAAMmC,OAAQ,EACnBlF,EAAK+C,MAAM2C,QAAUjD,EAAAC,EAAAC,cAAA,mCAA2B7J,EAA3B,OAzCnBkH,mFA+CA,yCAUH3H,KAAKuM,SAAS,SAAA7B,GAAK,MAAK,CACpBkC,SAAUlC,EAAMkC,WAEjB5M,KAAK0K,MAAMkC,QACV5M,KAAK8B,KAAKwL,QAGVtN,KAAK8B,KAAKyL,sCAIJC,GACVA,EAAIC,iBACJzN,KAAK8B,KAAK4L,wCAGEF,GACZ,IAAIG,EAAW,GACXC,EAAMJ,EAAIK,OAAOhJ,MACrB,OAAQ2I,EAAIK,OAAO5L,IACf,IAAK,OACRjC,KAAK8B,KAAKgM,QAAQF,GAClB,MACG,IAAK,MACG,IAAPA,IACIA,EAAM,EACbA,EAAM,EACQA,EAAM,MACpBA,EAAM,KAEH5N,KAAK8B,KAAKiM,OAAOH,IAErB,MACG,IAAK,UACR5N,KAAK8B,KAAKgF,OAAO9G,KAAK0K,MAAM1J,IAAK4M,GACjC,MACG,IAAK,MACR5N,KAAK8B,KAAKgF,OAAO8G,EAAK5N,KAAK0K,MAAMxD,SAElCyG,EAASH,EAAIK,OAAO5L,IAAM2L,EAC1B5N,KAAKuM,SAASoB,oCAGF,IAAAK,EAAAhO,KACZ,OAAGA,KAAK0K,MAAMmC,MACH7M,KAAK0K,MAAM2C,QAElBrN,KAAK8B,MAAS9B,KAAKgN,MAKnB5C,EAAAC,EAAAC,cAAA,OAAKU,MAAM,UACdZ,EAAAC,EAAAC,cAAA,OAAKU,MAAM,iBACPZ,EAAAC,EAAAC,cAAA,QAAMU,MAAM,eACZZ,EAAAC,EAAAC,cAAA,KAAGwB,QAAS9L,KAAKiO,aAAa9E,KAAKnJ,MAAOgL,MAAO,OAAShL,KAAK0K,MAAMkC,QAAU,UAAY,aAC3FxC,EAAAC,EAAAC,cAAA,OAAKU,MAAM,mBACPZ,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,SAAOzF,MAAO7E,KAAK0K,MAAMlE,IAAKvE,GAAG,MAAMiM,SAAU,SAAAV,GAAG,OAAIQ,EAAKE,SAASV,IAAMzI,KAAK,WACjFqF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,UAAQrI,GAAG,MAAM4C,MAAO7E,KAAK0K,MAAM1J,IAAKkN,SAAU,SAAAV,GAAG,OAAIQ,EAAKE,SAASV,KACzExN,KAAK+M,YAEH3C,EAAAC,EAAAC,cAAA,UAAQ4D,SAAU,SAAAV,GAAG,OAAIQ,EAAKE,SAASV,IAAMvL,GAAG,UAAU4C,MAAO7E,KAAK0K,MAAMxD,SAC/EkD,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,wBAIDF,EAAAC,EAAAC,cAAA,OAAKU,MAAM,aACdZ,EAAAC,EAAAC,cAAA,QAAM6D,SAAU,SAACX,GAAD,OAASQ,EAAKI,OAAOZ,KACjCpD,EAAAC,EAAAC,cAAA,SAAO+D,UAAQ,EAACH,SAAU,SAAAV,GAAG,OAAIQ,EAAKE,SAASV,IAAM3I,MAAO7E,KAAK0K,MAAMlJ,KAAMS,GAAG,OAAO8C,KAAK,OAAOuJ,YAAY,WAAWtD,MAAM,eAChIZ,EAAAC,EAAAC,cAAA,SAAOvF,KAAK,SAASF,MAAM,OAAOgH,UAAU,uBAIjDzB,EAAAC,EAAAC,cAAA,OAAKU,MAAM,OACPZ,EAAAC,EAAAC,cAACiE,EAAD,MACAnE,EAAAC,EAAAC,cAACkE,EAAD,CAAWhK,MAAOxE,KAAK8B,KAAK4F,eAEhC0C,EAAAC,EAAAC,cAACmE,EAAD,OAhCYrE,EAAAC,EAAAC,cAAA,uBA3GOC,qBC+DNmE,cApEd,SAAAA,EAAYjE,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAA0O,IAClB/G,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAAiL,GAAAzE,KAAAjK,KAAMyK,KACDC,MAAQ,CACZiE,WAAOrP,EACPsP,UAAWjH,EAAK8C,MAAM3I,KAAK+E,QAAUc,EAAK8C,MAAM3I,KAAK+E,QAAQgI,kBAAoB,MAElFlH,EAAK9C,MAAQ8C,EAAK8C,MAAM3I,KAAK+E,QAAUc,EAAK8C,MAAM3I,KAAK+E,QAAQiI,QAAU,EANvDnH,4EAQNoH,GACP/O,KAAKyK,MAAMuE,YAEhBhP,KAAKuM,SAAS,CACboC,MAAOI,2CAIH/O,KAAKyK,MAAMuE,YAEhBhP,KAAKuM,SAAS,CACboC,WAAOrP,sCAGC4D,GAAQ,IAAA8K,EAAAhO,KACZA,KAAKyK,MAAMuE,aAEhB9L,EAASA,IAAWlD,KAAK0K,MAAMkE,UAAY,KAAO1L,EAClD7C,EAAU4C,SAASjD,KAAKyK,MAAM3I,KAAKG,GAAIiB,GACrC3C,KAAK,WACLyN,EAAKzB,SAAS,CACbqC,UAAW1L,MAGZ1C,MAAM,SAACC,GAEPsB,QAAQC,IAAIvB,uCAKd,IADA,IAAMwO,EAAQ,GACLxK,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC5B,IAAIyK,EAAU,OACVnJ,KAAKoJ,KAAKnP,KAAKyK,MAAM5F,QAAUJ,IAC9BzE,KAAKyK,MAAM5F,MAAQJ,EACtByK,GAAW,QAEXA,GAAW,SAGTlP,KAAK0K,MAAMkE,WAAa5O,KAAK0K,MAAMkE,WAAanK,IACnDyK,GAAW,WAERlP,KAAK0K,MAAMiE,OAAS3O,KAAK0K,MAAMiE,OAASlK,IAC3CyK,GAAW,UAEZD,EAAMnK,KAAKsF,EAAAC,EAAAC,cAAA,OACVuB,UAAWqD,EACXE,aAAcpP,KAAKoP,aAAajG,KAAKnJ,KAAMyE,GAC3C4K,aAAcrP,KAAKqP,aAAalG,KAAKnJ,MACrC8L,QAAS9L,KAAKsP,UAAUnG,KAAKnJ,KAAMyE,MAGrC,IAAIyK,EAAU,eAAelP,KAAKyK,MAAMuE,WAAa,cAAgB,IACrE,OACC5E,EAAAC,EAAAC,cAAA,OAAKuB,UAAWqD,GAAUD,UAhEJ1E,aCwFVgF,cArFd,SAAAA,EAAY9E,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAAuP,IAClB5H,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAA8L,GAAAtF,KAAAjK,KAAMyK,KACDC,MAAQ,CACZ8E,UAAU,EACVC,GAAI,GACJC,QAAS,WACT9C,SAAS,GAEVjF,EAAK7F,KAAO2I,EAAM3I,KAClB6F,EAAK7F,KAAK6N,oBAAVlM,OAAA0I,EAAA,EAAA1I,QAAA0I,EAAA,EAAA1I,CAAAkE,IAAoC,SAACS,GACpCT,EAAK4E,SAAS,CACbqD,SAAU7J,KAAKoJ,MAAO/G,EAAM,IAA0B,GAAtBT,EAAK7F,KAAK2E,aAAiB,KAAK,QAXhDkB,wEAiBlB,IAAI1F,EAAKjC,KAAK8B,KAAKG,IAAM,GACzBjC,KAAKuM,SAAS,CACbiD,UAAU,EACVC,GAAI,WAAaxN,0CAIL,IAAA+L,EAAAhO,KACTA,KAAK0K,MAAMkC,SACd5M,KAAKuM,SAAS,CAAEmD,QAAS,WAAY9C,SAAS,IAC9C5M,KAAK8B,KAAKwL,UAELtN,KAAK8B,KAAKiF,QACduC,EAAU1G,QAAQ5C,KAAK8B,KAAKG,GAAI,eAC9B1B,KAAK,SAACgE,GACN,OAAO1F,KAAKC,MAAMyF,KAElBhE,KAAK,SAAC6M,GACNY,EAAKlM,KAAKqL,KAAKC,GACfY,EAAKlM,KAAKqC,UAEV3D,MAAM,IAITR,KAAKuM,SAAS,CAAEmD,QAAS,YAAa9C,SAAS,IAC/C5M,KAAK8B,KAAKyL,yCAGH,IAAAsC,EAAA7P,KACR,OAAIA,KAAK0K,MAAM8E,SACPpF,EAAAC,EAAAC,cAACwF,EAAA,EAAD,CAAUL,GAAIzP,KAAK0K,MAAM+E,KAGhCrF,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,cAAckE,MAAO,CAACC,WAAY,cAChD5F,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,UAAQwB,QAAS,kBAAM+D,EAAKI,eAAepE,UAAW,8BAAgC7L,KAAK0K,MAAMgF,UACjGtF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,cAAc7L,KAAK8B,KAAKN,OAExC4I,EAAAC,EAAAC,cAAA,WACEhB,EAAUjG,kBAAoBiG,EAAUjG,iBAAiBhC,WAAarB,KAAK8B,KAAKT,UACjF+I,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,qBACdzB,EAAAC,EAAAC,cAAA,UAAQwB,QAAS,kBAAK+D,EAAKK,UAAUrE,UAAU,iBAAgBzB,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,kBAC5EzB,EAAAC,EAAAC,cAAA,UAAQuB,UAAU,iBAAgBzB,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,kBAGhDzB,EAAAC,EAAAC,cAAA,KAAG6F,KAAMC,EAAU5R,UAAU,WAAWwB,KAAK8B,KAAKT,SAAUwK,UAAU,eACrEzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,QAAQ7L,KAAK8B,KAAK8E,QACjCwD,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,YAAf,IAA4B7L,KAAK8B,KAAKT,YAGxC+I,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,gBAAgBkE,MAAO,CAACM,MAAOrQ,KAAK0K,MAAMkF,aAE1DxF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,aACdzB,EAAAC,EAAAC,cAACgG,EAAD,CAAYxO,KAAM9B,KAAK8B,KAAMkN,WAAY1F,EAAUlG,aAAcyB,MAAO7E,KAAK8B,KAAK+E,QAAU7G,KAAK8B,KAAK+E,QAAQiI,QAAU,IACxH1E,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,cACdzB,EAAAC,EAAAC,cAAA,QAAMuB,UAAU,sBAAhB,WAA8C7L,KAAK8B,KAAKyO,sBACxDnG,EAAAC,EAAAC,cAAA,QAAMuB,UAAU,oBACf7L,KAAK8B,KAAK0O,iBAAmB,WAAaxQ,KAAK8B,KAAK2O,qBAAuB,cA7EzDlG,aCqDVmG,cArDd,SAAAA,EAAYjG,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAA0Q,IAClB/I,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAAiN,GAAAzG,KAAAjK,KAAMyK,KACDkG,MAAQ,GACbhJ,EAAK+C,MAAQ,CACZkG,SAAS,GAEVjJ,EAAKkJ,WANalJ,0EAQR,IAAAqG,EAAAhO,KACNA,KAAK0K,MAAMkG,UAEf5Q,KAAKuM,SAAS,CAACqE,SAAS,IACxBtH,EAAUjH,SAASrC,KAAKyK,MAAMtI,OAAQnC,KAAKyK,MAAMnI,QAAStC,KAAKuC,aAAe,MAC5EhC,KAAK,SAAAoQ,GAEL,IAAK,IAAMlM,KADXuJ,EAAKzL,YAAc,KACHoO,EAAO,CACtB,IAAMG,EAAWH,EAAMlM,GACnBqM,EAASC,eAAe,eAC3B/C,EAAKzL,YAAcuO,EAASvO,YAE5ByL,EAAK2C,MAAM7L,KAAKsF,EAAAC,EAAAC,cAAC0G,EAAD,CAAYlP,KAAM,IAAIuE,EAAKyK,MAG7C9C,EAAKzB,SAAS,CAACqE,SAAS,EAAO7J,QAAQ,MAEvCvG,MAAM,SAAAC,wCAKR,OACC2J,EAAAC,EAAAC,cAAA,WACwB,IAAtBtK,KAAK2Q,MAAMtR,QAAgBW,KAAK0K,MAAM3D,OACtCqD,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,eAAb,+CAEAzB,EAAAC,EAAAC,cAAA,MAAIuB,UAAU,aACZ7L,KAAK2Q,QAGN3Q,KAAK0K,MAAMkG,SAAW5Q,KAAKuC,cAC7B6H,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,oBACZ7L,KAAKuC,YAGN6H,EAAAC,EAAAC,cAAA,UAAQuB,UAAU,8BAA8BoF,SAAUjR,KAAK0K,MAAMkG,QAAS9E,QAAS9L,KAAK6Q,SAAS1H,KAAKnJ,OAAQA,KAAK0K,MAAMkG,QAAU,aAAe,aAFtJxG,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,WAAf,uBA3CiBtB,aCwER2G,cAvEd,SAAAA,EAAYzG,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAAkR,IAClBvJ,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAAyN,GAAAjH,KAAAjK,KAAMyK,KACD0G,OAAS,CACbC,gBAAiB,OAAS7S,EAASC,UAAY,sBAEhDmJ,EAAK0J,OAAS,CACbD,gBAAiB,OAAS7S,EAASC,UAAY,sBAEhDmJ,EAAK2J,OAAS,CACbF,gBAAiB,OAAS7S,EAASC,UAAY,sBAT9BmJ,wEAclB,OACCyC,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,cACCF,EAAAC,EAAAC,cAAA,OAAKrI,GAAG,4BAA4B4J,UAAU,iBAAiB0F,YAAU,YACxEnH,EAAAC,EAAAC,cAAA,MAAIuB,UAAU,uBACbzB,EAAAC,EAAAC,cAAA,MAAIkH,cAAY,6BAA6BC,gBAAc,IAAI5F,UAAU,WACzEzB,EAAAC,EAAAC,cAAA,MAAIkH,cAAY,6BAA6BC,gBAAc,MAC3DrH,EAAAC,EAAAC,cAAA,MAAIkH,cAAY,6BAA6BC,gBAAc,OAE5DrH,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,iBAAiB6F,KAAK,WACpCtH,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,uBAAuBkE,MAAO/P,KAAKmR,QACjD/G,EAAAC,EAAAC,cAAA,OAAKU,MAAM,SACVZ,EAAAC,EAAAC,cAAA,MAAIU,MAAM,aAAV,sCACAZ,EAAAC,EAAAC,cAAA,UAAQvF,KAAK,SAAS8G,UAAU,iCAAhC,uBAGFzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,gBAAgBkE,MAAO/P,KAAKqR,QAC1CjH,EAAAC,EAAAC,cAAA,OAAKU,MAAM,SACVZ,EAAAC,EAAAC,cAAA,MAAIU,MAAM,aAAV,iCACAZ,EAAAC,EAAAC,cAAA,UAAQvF,KAAK,SAAS8G,UAAU,iCAAhC,6BAGFzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,gBAAgBkE,MAAO/P,KAAKsR,QAC1ClH,EAAAC,EAAAC,cAAA,OAAKU,MAAM,SACVZ,EAAAC,EAAAC,cAAA,MAAIU,MAAM,aAAV,6CACAZ,EAAAC,EAAAC,cAAA,UAAQvF,KAAK,SAAS8G,UAAU,iCAAhC,wBAIHzB,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,wBAAwBsE,KAAK,6BAA6BuB,KAAK,SAASC,aAAW,QAC/FvH,EAAAC,EAAAC,cAAA,QAAMuB,UAAU,6BAA6B+F,cAAY,SACzDxH,EAAAC,EAAAC,cAAA,QAAMuB,UAAU,WAAhB,aAEDzB,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,wBAAwBsE,KAAK,6BAA6BuB,KAAK,SAASC,aAAW,QAC/FvH,EAAAC,EAAAC,cAAA,QAAMuB,UAAU,6BAA6B+F,cAAY,SACzDxH,EAAAC,EAAAC,cAAA,QAAMuB,UAAU,WAAhB,WAIHzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,qBACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,qBACdzB,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAACuH,EAAD,CAAUvP,SAAS,KAEpB8H,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,qBACdzB,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,8FAAqFF,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,wBAAR,WAArF,iCAA6J/F,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,0BAAR,WAA7J,wBACA/F,EAAAC,EAAAC,cAAA,sKAhEYC,qBC4FJuH,cA1Fd,SAAAA,EAAYrH,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAA8R,IAClBnK,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAAqO,GAAA7H,KAAAjK,KAAMyK,KACDC,MAAQ,CACZqH,YAAa,GACblF,MAAO,KACP2C,SAAU,MALO7H,wEAQViD,GAER,GADAA,EAAM6C,iBACkC,IAApCzN,KAAKgS,KAAK3Q,SAASwD,MAAMxF,QAAoD,IAApCW,KAAKgS,KAAK1Q,SAASuD,MAAMxF,OAAtE,CAUA,IAAMa,EAAUoJ,EAAUpI,MAAMlB,KAAKgS,KAAK3Q,SAASwD,MAAO7E,KAAKgS,KAAK1Q,SAASuD,OAC7E,OAAQ3E,EAAQD,QACf,KAAK,IACJD,KAAKuM,SAAS,CACbiD,SAAUY,EAAU5R,UAAU,WAAWwB,KAAKgS,KAAK3Q,SAASwD,MAAMpD,gBAEnE,MACD,KAAK,IACJ,IAAIsQ,EAAc,KAClB,IACCA,EAAclT,KAAKC,MAAMoB,EAAQnB,UAAUgT,YAC1C,MAAOzO,IACTtD,KAAKuM,SAAS,CACbM,MAAO,KACPkF,YAAaA,IAEd,MACD,QACC,IAAIE,EAAU,0BACd,IACCA,EAAUpT,KAAKC,MAAMoB,EAAQnB,UAAUkT,QACtC,MAAO3O,IACTtD,KAAKuM,SAAS,CACbM,MAAOoF,EAAQC,OAAO,GAAGC,cAAcF,EAAQG,UAAU,GAAG,IAC5DL,YAAa,WAjCf/R,KAAKuM,SAAS,CACb8F,OAAQ,KACRN,YAAa,CACZ1Q,SAA8C,IAApCrB,KAAKgS,KAAK3Q,SAASwD,MAAMxF,OAAe,0BAA4B,KAC9EiC,SAA8C,IAApCtB,KAAKgS,KAAK1Q,SAASuD,MAAMxF,OAAe,0BAA4B,0CAiCxEiT,GACT,IAAMP,EAAc/R,KAAK0K,MAAMqH,mBACxBA,EAAYO,GACnBtS,KAAKuM,SAAS,CACbwF,YAAaA,qCAGN,IAAA/D,EAAAhO,KACR,OAAOA,KAAK0K,MAAM8E,SAAWpF,EAAAC,EAAAC,cAACwF,EAAA,EAAD,CAAUL,GAAIzP,KAAK0K,MAAM8E,WAErDpF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,aACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,6DACdzB,EAAAC,EAAAC,cAAA,QAAM6D,SAAU,SAACX,GAAD,OAASQ,EAAKG,SAASX,IAAM3B,UAAU,cACtDzB,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,cACdzB,EAAAC,EAAAC,cAAA,SAAOiI,IAAI,WAAWrE,SAAU,kBAAMF,EAAKtD,MAAMqH,YAAY1Q,SAAW2M,EAAKwE,UAAU,YAAc,IAAIzN,KAAK,OAAO8G,UAAW,gBAAgB7L,KAAK0K,MAAMqH,YAAY1Q,SAAW,cAAgB,IAAKiN,YAAY,aACnNlE,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,oBAAoB7L,KAAK0K,MAAMqH,YAAY1Q,UAAY,KAEvE+I,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,cACdzB,EAAAC,EAAAC,cAAA,SAAOiI,IAAI,WAAWrE,SAAU,kBAAMF,EAAKtD,MAAMqH,YAAYzQ,SAAW0M,EAAKwE,UAAU,YAAc,IAAIzN,KAAK,WAAW8G,UAAW,gBAAgB7L,KAAK0K,MAAMqH,YAAYzQ,SAAW,cAAgB,IAAKgN,YAAY,aACvNlE,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,oBAAoB7L,KAAK0K,MAAMqH,YAAYzQ,UAAY,KAEvE8I,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,cACb7L,KAAK0K,MAAMmC,OACZzC,EAAAC,EAAAC,cAAA,OAAKyF,MAAO,CAAC0C,OAAU,gBAAgBrI,EAAAC,EAAAC,cAAA,SAAOuB,UAAU,gBAAgB7L,KAAK0K,MAAMmC,QAEnFzC,EAAAC,EAAAC,cAAA,UAAQuB,UAAU,kBAAkB9G,KAAK,UAAzC,WAGFqF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,mBACdzB,EAAAC,EAAAC,cAAA,oCACAF,EAAAC,EAAAC,cAACoI,EAAA,EAAD,CAAMjD,GAAG,aAAT,4BAlFalF,aCWLoI,qLAZb,OAAO3S,KAAKgS,KAAKM,MAAMzN,uCAEf,IAAA8C,EAAA3H,KACR,OACCoK,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,cACdzB,EAAAC,EAAAC,cAAA,SAAOiI,IAAI,QAAQ/Q,KAAMxB,KAAKyK,MAAMjJ,KAAM0M,SAAU,kBAAMvG,EAAK8C,MAAMsH,YAAYpK,EAAK8C,MAAMjJ,MAAQmG,EAAK8C,MAAM+H,UAAU7K,EAAK8C,MAAMjJ,MAAQ,IAAIuD,KAAM/E,KAAKyK,MAAM1F,MAAQ,OAAQ8G,UAAW,gBAAgB7L,KAAKyK,MAAMsH,YAAY/R,KAAKyK,MAAMjJ,MAAQ,cAAgB,IAAK8M,YAAatO,KAAKyK,MAAM6D,aAAe,KAClTlE,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,oBAAoB7L,KAAKyK,MAAMsH,YAAY/R,KAAKyK,MAAMjJ,OAAS,YAR1D+I,aC0HTqI,cArHd,SAAAA,EAAYnI,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAA4S,IAClBjL,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAAmP,GAAA3I,KAAAjK,KAAMyK,KACDC,MAAQ,CACZqH,YAAa,GACblF,MAAO,KACP2C,SAAU,KACV1O,QAAS,MAEVwI,EAAUhJ,aACRC,KAAK,SAACxB,GACN4I,EAAK/G,WAAa7B,EAAS+B,QAAQE,IAEnC2G,EAAK4E,SAAS,CACbzL,QAASsJ,EAAAC,EAAAC,cAAA,OAAKuI,wBAAyB,CAACC,OAAQ/T,EAAS+B,QAAQiS,aAGlEvS,MAAM,WACNmH,EAAK4E,SAAS,CACbzL,QAAS,sBAlBM6G,wEAsBViD,GAER,GADAA,EAAM6C,mBACFzN,KAAKgT,uBAAyBvP,OAAOqF,KAAK9I,KAAK0K,MAAMqH,aAAa1S,OAAS,GAA/E,CAEA,IAAMsB,EAAY,CACjBa,KAAMxB,KAAKgS,KAAKxQ,KAAKyR,WACrB5R,SAAUrB,KAAKgS,KAAK3Q,SAAS4R,WAC7B3R,SAAUtB,KAAKgS,KAAK1Q,SAAS2R,WAC7BnS,QAASd,KAAKgS,KAAKlR,QAAQmS,YAExBC,GAAc,EAClB,IAAK,IAAMlS,KAAOL,EACa,IAA1BA,EAAUK,GAAK3B,SAClBW,KAAK0K,MAAMqH,YAAY/Q,GAAO,0BAC9BhB,KAAK+K,cACLmI,GAAc,GAQhB,GALIlT,KAAKgS,KAAK,mBAAmBiB,aAAejT,KAAKgS,KAAK1Q,SAAS2R,aAClEjT,KAAK0K,MAAMqH,YAAY,mBAAqB,0BAC5C/R,KAAK+K,cACLmI,GAAc,IAEXA,EAAJ,CAEA,IAAMhT,EAAUoJ,EAAU5I,SAASC,EAAWX,KAAKY,YACnD,OAAQV,EAAQD,QACf,KAAK,IACJ,IAAMkT,EAAe7J,EAAUpI,MAAMP,EAAUU,SAAUV,EAAUW,UACnEtB,KAAKuM,SAAS,CACbiD,SAAkC,MAAxB2D,EAAalT,OAAiBmQ,EAAU5R,UAAU,WAAWmC,EAAUU,SAASI,cAAgB2O,EAAU5R,UAAU,UAE/H,MACD,KAAK,IACJ,IAAIuT,EAAc,KAClB,IACC,IAAMqB,EAAOvU,KAAKC,MAAMoB,EAAQnB,UAChCgT,EAAcqB,EAAKrB,aAAe,GAC9BqB,EAAKC,eACRtB,EAAYjR,QAAUsS,EAAKC,cAC3B,MAAO/P,IACTtD,KAAKuM,SAAS,CACbM,MAAO,KACPkF,YAAaA,IAEd/R,KAAKgT,uBAAwB,EAC7B,MACD,QACC,IAAIf,EAAU,0BACd,IACCA,EAAUpT,KAAKC,MAAMoB,EAAQnB,UAAUkT,QACtC,MAAO3O,IACTtD,KAAKuM,SAAS,CACbM,MAAOoF,EAAQC,OAAO,GAAGC,cAAcF,EAAQG,UAAU,GAAG,IAC5DL,YAAa,0CAIPO,GACT,IAAMP,EAAc/R,KAAK0K,MAAMqH,mBACxBA,EAAYO,GACnBtS,KAAKuM,SAAS,CACbwF,YAAaA,qCAGN,IAAA/D,EAAAhO,KACR,OAAOA,KAAK0K,MAAM8E,SAAWpF,EAAAC,EAAAC,cAACwF,EAAA,EAAD,CAAUL,GAAIzP,KAAK0K,MAAM8E,WAErDpF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,aACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,6DACdzB,EAAAC,EAAAC,cAAA,QAAM6D,SAAU,SAACX,GAAD,OAASQ,EAAKG,SAASX,IAAM3B,UAAU,cACtDzB,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAACgJ,EAAD,CAAWf,IAAI,OAAO/Q,KAAK,OAAO8M,YAAY,OAAOyD,YAAa/R,KAAK0K,MAAMqH,YAAaS,UAAWxS,KAAKwS,UAAUrJ,KAAKnJ,QACzHoK,EAAAC,EAAAC,cAACgJ,EAAD,CAAWf,IAAI,WAAW/Q,KAAK,WAAW8M,YAAY,WAAWyD,YAAa/R,KAAK0K,MAAMqH,YAAaS,UAAWxS,KAAKwS,UAAUrJ,KAAKnJ,QACrIoK,EAAAC,EAAAC,cAACgJ,EAAD,CAAWf,IAAI,WAAW/Q,KAAK,WAAWuD,KAAK,WAAWuJ,YAAY,WAAWyD,YAAa/R,KAAK0K,MAAMqH,YAAaS,UAAWxS,KAAKwS,UAAUrJ,KAAKnJ,QACrJoK,EAAAC,EAAAC,cAACgJ,EAAD,CAAWf,IAAI,kBAAkB/Q,KAAK,kBAAkBuD,KAAK,WAAWuJ,YAAY,kBAAkByD,YAAa/R,KAAK0K,MAAMqH,YAAaS,UAAWxS,KAAKwS,UAAUrJ,KAAKnJ,QAC1KoK,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,iBACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,qBAAqB7L,KAAK0K,MAAM5J,SAAW,sBAC1DsJ,EAAAC,EAAAC,cAACgJ,EAAD,CAAWf,IAAI,UAAU/Q,KAAK,UAAU8M,YAAY,iBAAiByD,YAAa/R,KAAK0K,MAAMqH,YAAaS,UAAWxS,KAAKwS,UAAUrJ,KAAKnJ,SAE1IoK,EAAAC,EAAAC,cAAA,UAAQuB,UAAU,kBAAkB9G,KAAK,UAAzC,aAEDqF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,mBACdzB,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAACoI,EAAA,EAAD,CAAMjD,GAAG,UAAT,yBA7GgBlF,aC4DRgJ,cA7Dd,SAAAA,EAAY9I,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAAuT,IAClB5L,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAA8P,GAAAtJ,KAAAjK,KAAMyK,KACDC,MAAQ,CACZkG,SAAS,GAENjJ,EAAK8C,MAAMyC,OAASvF,EAAK8C,MAAMyC,MAAM1K,QAAUmF,EAAK8C,MAAMyC,MAAM1K,OAAOnB,SAC1EiI,EAAUnG,UAAUwE,EAAK8C,MAAMyC,MAAM1K,OAAOnB,UAC1Cd,KAAK,SAAAY,GACLwG,EAAK4E,SAAS,CACbqE,SAAS,EACTzP,KAAMA,MAGPX,MAAM,SAAAC,GACa,MAAfA,EAAIR,QACP0H,EAAK4E,SAAS,CACbqE,SAAS,EACTzP,KAAM,UAOVwG,EAAK+C,MAAMkG,SAAU,EACrBjJ,EAAK+C,MAAMvJ,KAAO,MAzBDwG,wEA6BlB,OAAI3H,KAAK0K,MAAMkG,QAEbxG,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,YACdzB,EAAAC,EAAAC,cAAA,wBAKDF,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,aACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,+BACZ7L,KAAK0K,MAAMvJ,KAMZiJ,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,MAAIuB,UAAU,gBAAgB7L,KAAK0K,MAAMvJ,KAAKK,MAC9C4I,EAAAC,EAAAC,cAAA,QAAMuB,UAAU,oBAAhB,IAAqC7L,KAAK0K,MAAMvJ,KAAKE,UACrD+I,EAAAC,EAAAC,cAACuH,EAAD,CAAU1P,OAAQnC,KAAK0K,MAAMvJ,KAAKc,MARnCmI,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,YACdzB,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,0DA7CYC,aCyCPiJ,mLAzCb,OACCpJ,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,YAAYkE,MAAO,CAAC0C,OAAQ,mBAC1CrI,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,UACdzB,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,wQACAF,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,8NACAF,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,wBAEDF,EAAAC,EAAAC,cAAA,qLACAF,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,yBAEDF,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,8NACAF,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,wBAEDF,EAAAC,EAAAC,cAAA,qLACAF,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,yBAEDF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,2BAA2BtE,UAAU,0BAA7C,sCAnCuBtB,aCkBdkJ,mLAhBb,OACCrJ,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,YAAYkE,MAAO,CAAC0C,OAAQ,mBAC1CrI,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,UACdzB,EAAAC,EAAAC,cAAA,sBAEAF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,8NACAF,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,IAAItE,UAAU,0BAAtB,gCAVqBtB,aCcZmJ,mLAZb,OACCtJ,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,YAAYkE,MAAO,CAAC0C,OAAQ,mBAC1CrI,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,UACdzB,EAAAC,EAAAC,cAAA,kCANuBC,aCgDdoJ,mLA9Cb,OACCvJ,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,YAAYkE,MAAO,CAAC0C,OAAQ,mBAC1CrI,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,UACdzB,EAAAC,EAAAC,cAAA,uCACAF,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGU,MAAM,MACTZ,EAAAC,EAAAC,cAAA,OAAKsJ,IAAI,sEAAsEC,IAAI,UAAU7I,MAAM,gBADnG,kCAE+BZ,EAAAC,EAAAC,cAAA,+BAF/B,qRAIAF,EAAAC,EAAAC,cAAA,eACGF,EAAAC,EAAAC,cAAA,2BADH,wBAC6CF,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,kCAAkCtC,OAAO,UAAjD,yBAD7C,mEAGAzD,EAAAC,EAAAC,cAAA,eACGF,EAAAC,EAAAC,cAAA,kBADH,iGAC6GF,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,yCAAsCF,EAAAC,EAAAC,cAAA,WADzJ,wDACoNF,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,8EAA2EF,EAAAC,EAAAC,cAAA,WADrS,qCAC6UF,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,+CAEnVF,EAAAC,EAAAC,cAAA,wDAC4CF,EAAAC,EAAAC,cAAA,8BAD5C,8CAEAF,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,YAENF,EAAAC,EAAAC,cAAA,kCACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,2EAC+DF,EAAAC,EAAAC,cAAA,6BAD/D,4EAC+JF,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,oCAA2BF,EAAAC,EAAAC,cAAA,oBAAoBF,EAAAC,EAAAC,cAAA,WADpN,6KACoYF,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,0BAE1YF,EAAAC,EAAAC,cAAA,4OAGAF,EAAAC,EAAAC,cAAA,OAAKsJ,IAAI,4BAA4BC,IAAI,qBAAqB7I,MAAM,YACpEZ,EAAAC,EAAAC,cAAA,SACAF,EAAAC,EAAAC,cAAA,WADA,2KAGAF,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,uBAAuBtE,UAAU,0BAAzC,kCAxCyBtB,+BC6EhBuJ,oLA1Eb,OACC1J,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,YAAYkE,MAAO,CAAC0C,OAAQ,mBAC1CrI,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,UACdzB,EAAAC,EAAAC,cAAA,uBAGFF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,yCACdzB,EAAAC,EAAAC,cAAA,OAAKsJ,IAAI,4DACTxJ,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,6BAA6B4D,MAAM,kBAA3C,sBACA3J,EAAAC,EAAAC,cAAC0J,GAAA3J,EAAD,CAAY4J,YAAY,EAAOC,MAAO,IACrC9J,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,8DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,gEAIHF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,yCACdzB,EAAAC,EAAAC,cAAA,OAAKsJ,IAAI,2DACTxJ,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,4BAA4B4D,MAAM,kBAA1C,qBACA3J,EAAAC,EAAAC,cAAC0J,GAAA3J,EAAD,CAAY4J,YAAY,EAAOC,MAAO,IACrC9J,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,8DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,gEAIHF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,yCACdzB,EAAAC,EAAAC,cAAA,OAAKsJ,IAAI,4DACTxJ,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,4BAA4B4D,MAAM,kBAA1C,qBACA3J,EAAAC,EAAAC,cAAC0J,GAAA3J,EAAD,CAAY4J,YAAY,EAAOC,MAAO,IACrC9J,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,8DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,gEAIHF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,yCACdzB,EAAAC,EAAAC,cAAA,OAAKsJ,IAAI,oCACTxJ,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,IAAI4D,MAAM,kBAAlB,gBACA3J,EAAAC,EAAAC,cAAC0J,GAAA3J,EAAD,CAAY4J,YAAY,EAAOC,MAAO,IACrC9J,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,8DACAF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,yEAlEkBC,aCiBX4J,oLAfb,OACC/J,EAAAC,EAAAC,cAAA,MAAIuB,UAAU,WAAWC,QAAS9L,KAAKoU,YACtChK,EAAAC,EAAAC,cAAA,KAAG6F,KAAK,IAAItE,UAAW,2BAA4BwI,cAAY,YAC7DrU,KAAKyK,MAAM6J,KAAKP,OAElB3J,EAAAC,EAAAC,cAAA,OAAKuB,UAAW,iBACd7L,KAAKyK,MAAM6J,KAAKC,MAAM9K,IAAI,SAAC+K,GAC3B,OAAOpK,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,gBAAgBsE,KAAM5R,EAASC,UAAUgW,EAASC,MAAOD,EAAST,kBATjExJ,aCSZmK,oLAJb,OADApL,EAAU1H,SACHwI,EAAAC,EAAAC,cAACwF,EAAA,EAAD,CAAUL,GAAIW,EAAU5R,mBAHZ+L,aC+FNoK,eAjFd,SAAAA,EAAYlK,GAAO,IAAA9C,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAzD,KAAA2U,IAClBhN,EAAAlE,OAAAsG,EAAA,EAAAtG,CAAAzD,KAAAyD,OAAAuG,EAAA,EAAAvG,CAAAkR,GAAA1K,KAAAjK,KAAMyK,KACDtJ,KAAOmI,EAAUjG,iBACtBsE,EAAKiN,KAAO,CACX,CAAEb,MAAO,SAAUU,KAAM,cACzB,CAAEV,MAAO,WAAYU,KAAM,YAAY9M,EAAKxG,KAAOwG,EAAKxG,KAAKE,SAAW,IAAKwT,UAAU,GACvF,CAAEd,MAAO,aAAcU,KAAM,aAAcF,MAAO,CAChD,CAAER,MAAO,aAAcU,KAAM,yBAC7B,CAAEV,MAAO,eAAgBU,KAAM,2BAC/B,CAAEV,MAAO,WAAYU,KAAM,uBAC3B,CAAEV,MAAO,aAAcU,KAAM,2BAE/B,CAAEV,MAAO,UAAWU,KAAM,YAZT9M,wEAgBV,IAAAqG,EAAAhO,KACJ8U,EAAc9U,KAAK4U,KAAKnL,IAAI,SAACsL,GAChC,IAAIA,EAASF,UAAa7G,EAAK7M,KAI5B,OAFC4T,EAASN,OACZM,EAASN,KAAOlW,EAASC,UAAUuW,EAASN,MACnCM,EAASR,MAAQnK,EAAAC,EAAAC,cAAC0K,GAAD,CAAcV,KAAMS,IAAe3K,EAAAC,EAAAC,cAAA,MAAIuB,UAAW,YAAYkJ,EAASR,MAAQ,YAAc,KACpHnK,EAAAC,EAAAC,cAAA,KAAG6F,KAAM4E,EAASN,MAAQ,IAAK5I,UAAW,aAAaoJ,OAAOC,SAASC,WAAaJ,EAASN,KAAO,SAAW,KAC7GM,EAAShB,UAoBhB,OACC3J,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,OACdzB,EAAAC,EAAAC,cAAC8K,EAAA,EAAD,CAAQC,SAAU9W,EAASC,WACvB4L,EAAAC,EAAAC,cAAA,WACFF,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,yDACdzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,aACdzB,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,eAAesE,KAAM5R,EAASC,WAA3C,cACA4L,EAAAC,EAAAC,cAAA,UAAQuB,UAAU,iBAAiB9G,KAAK,SAASsP,cAAY,WAAW7C,cAAY,oBAAoB8D,gBAAc,mBAAmBC,gBAAc,QAAQC,aAAW,qBACzKpL,EAAAC,EAAAC,cAAA,QAAMuB,UAAU,yBAEjBzB,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,2BAA2B5J,GAAG,oBAC5CmI,EAAAC,EAAAC,cAAA,MAAIuB,UAAU,sBACZiJ,GAEF1K,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,IAAIiB,UA9BN,WACb,IAAMvU,EAAOmI,EAAUjG,iBACvB,OAAO+G,EAAAC,EAAAC,cAAA,MAAIuB,UAAU,sBACtB1K,EAGDiJ,EAAAC,EAAAC,cAAA,MAAIuB,UAAU,qBACdzB,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,2BAA2BsE,KAAK,IAAIlO,GAAG,iBAAiByP,KAAK,SAAS2C,cAAY,WAAWsB,gBAAc,OAAOJ,gBAAc,SAA7I,iBACgBpU,EAAKK,MAErB4I,EAAAC,EAAAC,cAAA,OAAKuB,UAAU,gBAAgB+J,kBAAgB,kBAC9CxL,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,gBAAgBsE,KAAM5R,EAASC,UAAY,UAAxD,aAPD4L,EAAAC,EAAAC,cAAA,KAAGuB,UAAU,WAAWsE,KAAM5R,EAASC,UAAY,SAAnD,4BA8BE4L,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,IAAIoB,OAAK,EAACH,UAAWxE,IACjC9G,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,UAAUiB,UAAW/I,IACjCvC,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,cAAciB,UAAW/I,IACrCvC,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,SAASiB,UAAW5D,IAChC1H,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,YAAYiB,UAAW9C,IACnCxI,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,sBAAsBiB,UAAWnC,IAC1CnJ,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,yBAAyBiB,UAAWlC,IAChDpJ,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,2BAA2BiB,UAAW/B,IAClDvJ,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,uBAAuBiB,UAAWjC,IAC9CrJ,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,yBAAyBiB,UAAWhC,IAChDtJ,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,WAAWiB,UAAW5B,KAClC1J,EAAAC,EAAAC,cAACmL,EAAA,EAAD,CAAOhB,KAAK,UAAUiB,UAAWhB,eA3ExBnK,aCLEuL,QACW,cAA7Bb,OAAOC,SAASa,UAEe,UAA7Bd,OAAOC,SAASa,UAEhBd,OAAOC,SAASa,SAAS7I,MACvB,2DCZN8I,IAASC,OAAO7L,EAAAC,EAAAC,cAAC4L,GAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAActJ,MAAMzM,KAAK,SAAAgW,GACjCA,EAAaC","file":"static/js/main.f09938bf.chunk.js","sourcesContent":["const constant = {\r\n    ROOT_PATH: \"/\" \r\n}\r\n\r\nexport default constant;\r\n","import * as Cookies from 'js-cookie';\r\nimport constant from './constants.js';\r\n\r\nconst in30Minutes = 1/48;\r\n\r\nconst getResponse = (xhr) => {\r\n\tconst contentType = xhr.getResponseHeader(\"Content-Type\");\r\n\tif (contentType.includes(\"application/json\")) {\r\n\t\treturn JSON.parse(xhr.response);\r\n\t} else {\r\n\t\treturn xhr.response;\r\n\t}\r\n};\r\nconst makeApiRequest = (method, route, body = null) => {\r\n\treturn new Promise(function (resolve, reject) {\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.open(method, constant.ROOT_PATH + \"api/\" + route);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\txhr.setRequestHeader(\"Authorization\", token);\r\n\t\txhr.onload = function () {\r\n\t\t\tif (this.status >= 200 && this.status < 300) {\r\n\t\t\t\tresolve(xhr);\r\n\t\t\t} else {\r\n\t\t\t\treject({\r\n\t\t\t\t\tstatus: this.status,\r\n\t\t\t\t\trequest: xhr\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.onerror = function () {\r\n\t\t\treject({\r\n\t\t\t\tstatus: this.status,\r\n\t\t\t\trequest: xhr\r\n\t\t\t});\r\n\t\t};\r\n\t\tif (body != null && typeof body !== 'undefined') {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\txhr.send(body);\r\n\t\t} else\r\n\t\t\txhr.send();\r\n\t});\r\n};\r\nconst serializeParams = function(params) {\r\n\tlet str = \"\";\r\n\tfor (const key in params) {\r\n\t\tif (str !== \"\")\r\n\t\t\tstr += \"&\";\r\n\t\tstr += key + \"=\" + encodeURIComponent(params[key]);\r\n\t}\r\n\treturn str.length > 0 ? '?'+str : '';\r\n};\r\n\r\nconst apiHelper = {\r\n\tgetCaptcha: function() {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'user/register')\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tregister: function(inputData, captchaKey) {\r\n\t\tconst req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/register\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\tif (inputData.captcha) {\r\n\t\t\tinputData.captcha = {\r\n\t\t\t\tanswer: inputData.captcha,\r\n\t\t\t\tkey: captchaKey\r\n\t\t\t}\r\n\t\t}\r\n\t\treq.send(JSON.stringify(inputData));\r\n\t\treturn req;\r\n\t},\r\n\tlogin: function(user, pass) {\r\n\t\tconst req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/login\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\treq.send(JSON.stringify({\r\n\t\t\tusername: user,\r\n\t\t\tpassword: pass\r\n\t\t}));\r\n\t\tif (req.status === 200) {\r\n\t\t\tvar res = JSON.parse(req.response);\r\n\t\t\tCookies.set('user', JSON.stringify({name: res.name, username: user.toLowerCase()}) || \"unknown\", {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('token', res.token, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('secret', res.refreshSecret, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn req;\r\n\t},\r\n\tlogout: function() {\r\n\t\tCookies.remove('user');\r\n\t\tCookies.remove('token');\r\n\t\tCookies.remove('secret');\r\n\t},\r\n\tcreateSong: function(song) {\r\n\t\tvar token = Cookies.get('token');\r\n\t\tif(!(token === undefined)) {\r\n\t\t\tvar req = new XMLHttpRequest();\r\n\t\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/songs/create\", false);\r\n\t\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\t\treq.send(JSON.stringify(song));\r\n\t\t\tconsole.log(req.response);\r\n\t\t\tif (req.status === 200) {\r\n\t\t\t\treturn req.response.id;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(\"not logged in!\");\r\n\t\t}\r\n\t},\r\n\tgetSongsDirty: function(userId) {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\tvar url;\r\n\t\tif(userId === undefined) {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs\";\r\n\t\t} else {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs/get?userId=\" + userId;\r\n\t\t}\r\n\t\treq.open(\"GET\", url, false);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\treq.send();\r\n\t\tif (req.status === 200) {\r\n\t\t\treturn JSON.parse(req.response);\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t},\r\n\tgetSongs: function(userId = null, popular = false, delimiterId = null) {\r\n\t\tconst params = {};\r\n\t\tif (userId) params.userId = userId;\r\n\t\tif (popular) params.popular = 1;\r\n\t\tif (delimiterId) params.delimiterId = delimiterId;\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'songs'+serializeParams(params))\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tgetSong: function(id, format = \"full\") {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\treq.open(\"GET\", constant.ROOT_PATH + \"api/songs/\" + id + \"/\" + format, true);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token && format === \"full\")\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\tvar songPromise = new Promise((resolve, reject) => {\r\n\t\t\treq.onreadystatechange = () => {\r\n\t\t\t\t// Done\r\n\t\t\t\tif (req.readyState === 4) {\r\n\t\t\t\t\t// Success\r\n\t\t\t\t\tif (req.status === 200) {\r\n\t\t\t\t\t\tresolve(req.response);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(req.response);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treq.send();\r\n\t\treturn songPromise;\r\n\t},\r\n\trateSong: function(id, rating = null) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('POST', 'songs/rate/'+id+(rating ? '/'+rating : ''))\r\n\t\t\t\t.then(() => resolve(true))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tfetchUser: function(username) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'user/fetch/'+username)\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tisLoggedIn: function() {\r\n\t\treturn !!Cookies.get('token');\r\n\t},\r\n\tgetCurrentUser: function() {\r\n\t\tif (!Cookies.get('token') || !Cookies.get('user')) return null;\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(Cookies.get('user'));\r\n\t\t} catch (e) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default apiHelper;\r\n","class Track {\r\n    constructor(track) {\r\n\tif (!track === undefined) {\r\n\t    this.track = track;\r\n\t} else {\r\n\t    this.track = {\r\n\t\tblocks: [\r\n\t\t    1\r\n\t\t],\r\n\t\tsettings: {\r\n\t\t    typeId: 1,\r\n\t\t    metadata: \"123ab\"\r\n\t\t}\r\n\t    }\r\n\t}\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","const types = ['off', 'on', 'start', 'end', 'mid'];\r\nconst dataValues = {\r\n    'off': 0, 'on': 1, 'start': 2, 'end': 3, 'mid': 4\r\n}\r\n\r\n// convert block from integer data\r\nvar convertFromData = (data, block) => {\r\n    for (let i = 0; i < data.length; i++)\r\n    {\r\n\tlet dataLine = data[i];\r\n\tlet line = [];\r\n\tfor (let j = 0; j < dataLine.length; j++)\r\n\t{\r\n\t    let value = dataLine[j];\r\n\t    line.push({\r\n\t\ttype: types[value],\r\n\t\tclickF: function() {\r\n\t\t    if(this.type === 'off')\r\n\t\t    {\r\n\t\t\tthis.type = 'on';\r\n\t\t    }\r\n\t\t    else\r\n\t\t    {\r\n\t\t\tthis.type = 'off';\r\n\t\t    }\r\n\t\t},\r\n\t\tstartF: function() {\r\n\t\t    this.type = 'start';\r\n\t\t},\r\n\t\tendF: function() {\r\n\t\t    this.type = 'end';\r\n\t\t},\r\n\t\tmidF: function() {\r\n\t\t    this.type = 'mid';\r\n\t\t}\t\r\n\t    });\r\n\t}\r\n\tblock.push(line);\r\n    }\r\n};\r\n\r\n// playable / editable block\r\nclass Block {\r\n    constructor(storedBlock) {\r\n\tthis.block = [];\r\n\tif (!(storedBlock === undefined)) {\r\n\t    // load block from data\r\n\t    convertFromData(storedBlock.data, this.block);\r\n\t} else {\r\n\t    // create blank block\r\n\t    for (let i = 0; i < 12; i++) {\r\n\t\tlet line = [];\r\n\t\tfor(let j = 0; j < 16; j++) {\r\n\t\t    line.push({\r\n\t\t\ttype: 'off',\r\n\t\t\tclickF: function() {\r\n\t\t\t    if(this.type === 'off')\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'on';\r\n\t\t\t    }\r\n\t\t\t    else\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'off';\r\n\t\t\t    }\r\n\t\t\t},\r\n\t\t\tstartF: function() {\r\n\t\t\t    this.type = 'start';\r\n\t\t\t},\r\n\t\t\tendF: function() {\r\n\t\t\t    this.type = 'end';\r\n\t\t\t},\r\n\t\t\tmidF: function() {\r\n\t\t\t    this.type = 'mid';\r\n\t\t\t}\r\n\t\t    });\r\n\t\t}\r\n\t\tthis.block.push(line);\r\n\t    }\r\n\t}\r\n    }\r\n\r\n    convertToData() {\r\n\tlet data = [];\r\n\tfor (let i = 0; i < this.block.length; i++) {\r\n\t    let line = this.block[i];\r\n\t    let dataLine = [];\r\n\t    for (let j = 0; j < line.length; j++) {\r\n\t\tlet value = line[j].type;\r\n\t\tdataLine.push(dataValues[value]);\r\n\t    }\r\n\t    data.push(dataLine);\r\n\t}\r\n\treturn data;\r\n    }\r\n}\r\n\r\nexport default Block;\r\n","import Tone from 'tone';\r\nimport APIHelper from '../../apiHelper.js'\r\nimport Track from './Track.js';\r\nimport Block from './Block.js';\r\n\r\nclass Song {\r\n\t// User: opening song, id of song\r\n\tconstructor(songMeta) {\r\n\t\tthis.blocks = [];\r\n\t\tthis.tracks = [];\r\n\t\tif (!(songMeta === undefined)) {\r\n\t\t\t// Song exist: Load meta\r\n\t\t\tthis.name = songMeta.name;\r\n\t\t\tthis.bpm = songMeta.bpm;\r\n\t\t\tthis.blockLength = songMeta.blockLength;\r\n\r\n\t\t\tthis.createDate = new Date(songMeta.createDate);\r\n\t\t\tthis.updateDate = songMeta.updateDate ? new Date(songMeta.updateDate) : null;\r\n\t\t\tthis.author = songMeta.user.name;\r\n\t\t\tthis.username = songMeta.user.username;\r\n\t\t\tthis.ratings = songMeta.ratings;\r\n\r\n\t\t\tthis.id = songMeta.id;\r\n\t\t} else {\r\n\t\t\t// Empty meta\r\n\t\t\tthis.name = \"awesome song\";\r\n\t\t\tthis.bpm = 120;\r\n\t\t\tthis.blockLength = 1;\r\n\t\t}\r\n\t\tthis.setKey();\r\n\t\tthis.loaded = false;\r\n\t\tthis.progressListeners = [];\r\n\t}\r\n\r\n\tsetKey(freq, type) {\r\n\t\tthis.freq = freq || \"C\";\r\n\t\tthis.keyType = type || \"Maj\";\r\n\t\tthis.key = [];\r\n\t\tthis.key[11] = (this.freq + \"3\");\r\n\t\tvar step = (type === \"Maj\") ?\r\n\t\t\t[2, 2, 1, 2, 2, 2, 1, 2, 2, 1, 2] :\r\n\t\t\t[2, 1, 2, 2, 1, 2, 2, 2, 1, 2, 2];\r\n\t\tfor (let i = 10, j = 0; i >= 0; i--, j++) {\r\n\t\t\tthis.key[i] = Tone.Frequency(this.key[i+1]).transpose(step[j]);\r\n\t\t}\r\n\t\tif (this.synth) this.synth.releaseAll();\r\n\t}\r\n\r\n\tload(songMeta) {\r\n\t\tthis.blocks.push(null);\r\n\t\tif(this.id === undefined || songMeta === undefined)\r\n\t\t{\r\n\t\t\t// Load empty song\r\n\t\t\tthis.blocks.push(new Block());\r\n\t\t\tthis.tracks.push(new Track());\r\n\t\t} else {\r\n\t\t\t// Load song from composition data\r\n\t\t\tfor (let i = 0; i < songMeta.instruments.length; i++) {\r\n\t\t\t\tthis.tracks.push(new Track(songMeta.instruments[i]));\r\n\t\t\t}\r\n\t\t\tfor (let i = 1; i <= this.blockLength; i++) {\r\n\t\t\t\tlet block = new Block(songMeta.blocks[i]);\r\n\t\t\t\tthis.blocks.push(block);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.activeBlock = this.blocks[1].block;\r\n\t\tthis.loaded = true;\r\n\t}\r\n\r\n\tstart() {\r\n\t\tTone.Transport.cancel();\r\n\t\tthis.synth = new Tone.PolySynth(6, Tone.Synth).toMaster();\r\n\t\tthis.synth.triggerAttackRelease('C4', '4n');\r\n\t\tTone.Transport.loopEnd = this.blockLength + \"m\";\r\n\t\tTone.Transport.loop = true;\r\n\t\tTone.Transport.bpm.value = this.bpm;\r\n\t\tthis.count = 0;\r\n\t\tthis.loop = new Tone.Loop((time) => {\r\n\t\t\tfor (let i = 0; i < 12; i++) {\r\n\t\t\t\tswitch(this.activeBlock[i][this.count].type) {\r\n\t\t\t\t\tcase 'on':\r\n\t\t\t\t\t\tthis.synth.triggerAttackRelease(this.key[i], '16n', time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'start':\r\n\t\t\t\t\t\tthis.synth.triggerAttack(this.key[i], time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'end':\r\n\t\t\t\t\t\tthis.synth.triggerRelease(this.key[i], time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.count >= 15) {\r\n\t\t\t\tthis.count = 0;\r\n\t\t\t} else {\r\n\t\t\t\tthis.count++;\r\n\t\t\t}\r\n\t\t\tfor (const key of this.progressListeners.keys())\r\n\t\t\t\tthis.progressListeners[key].bind(this, this.count)();\r\n\t\t}, '16n').start();\r\n\t}\r\n\r\n\tplay() {\r\n\t\tTone.Transport.start();\r\n\t}\r\n\r\n\tpause() {\r\n\t\tTone.Transport.stop();\r\n\t\tthis.synth.releaseAll();\r\n\t}\r\n\r\n\tsave() {\r\n\t\tif(this.id === undefined) {\r\n\t\t\t// create new song and get id\r\n\t\t\tvar id = APIHelper.createSong(this.getSendableSong());\r\n\t\t} else {\r\n\t\t\t// update song\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tgetSendableSong()\r\n\t{\r\n\t\tvar sendableSong = {\r\n\t\t\tname: this.name,\r\n\t\t\tbpm: this.bpm,\r\n\t\t\tblockLength: this.blockLength,\r\n\t\t\tinstruments: this.tracks.map((track) => {\r\n\t\t\t\treturn track.track;\r\n\t\t\t}),\r\n\t\t\tblocks: {}\r\n\t\t};\r\n\t\tfor(let i = 1; i <= (this.blocks.length - 1); i++) {\r\n\t\t\tsendableSong.blocks[i] = {\r\n\t\t\t\tdata: this.blocks[i].convertToData()\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn sendableSong;\r\n\t}\r\n\r\n\tgetFormattedCreate() {\r\n\t\treturn getFormattedDate(this.createDate);\r\n\t}\r\n\r\n\tgetFormattedUpdate() {\r\n\t\treturn getFormattedDate(this.updateDate);\r\n\t}\r\n\r\n\thasBeenUpdated() {\r\n\t\treturn this.updateDate && Math.abs(this.createDate - this.updateDate) >= 50;\r\n\t}\r\n\taddProgressListener(context, listener) {\r\n\t\tthis.progressListeners.push(listener.bind(context));\r\n\t}\r\n}\r\n\r\nconst months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\r\nfunction getFormattedDate(date) {\r\n\tvar currentDate = new Date();\r\n\t// same day\r\n\tif(currentDate.getDate() === date.getDate()\r\n\t\t&& currentDate.getMonth() === date.getMonth()\r\n\t\t&& currentDate.getFullYear() === date.getFullYear())\r\n\t{\r\n\t\tlet totMin = Math.floor((currentDate - date) / 60000);\r\n\t\tlet hours = Math.floor(totMin / 60);\r\n\t\tlet minutes = totMin % 60;\r\n\t\tlet hourString = \"hour\";\r\n\t\tif(hours > 1) hourString += \"s\";\r\n\t\tif(minutes === 0)\r\n\t\t{\r\n\t\t\treturn hours + \" \" + hourString + \"  ago\";\r\n\t\t}\r\n\t\tlet minuteString = \"minute\";\r\n\t\tif(minutes > 1) minuteString += \"s\";\r\n\t\tif(hours === 0)\r\n\t\t{\r\n\t\t\treturn minutes + \" \" + minuteString + \" ago\";\r\n\t\t}\r\n\t\treturn hours + \" \" + hourString + \" and \" + minutes + \" \" + minuteString + \" ago\";\r\n\t}\r\n\treturn months[date.getMonth()] + \" \" + date.getDate() + \", \" + date.getFullYear();\r\n}\r\n\r\nexport default Song;\r\n","import Tone from 'tone';\r\nimport Song from './Song.js';\r\n\r\nclass EditableSong extends Song {\r\n    constructor(songMeta) {\r\n\tsuper(songMeta);\r\n\tthis.selectedTrack = 0;\r\n    }\r\n\r\n    addTrack() {\r\n\t\r\n    }\r\n\r\n    setName(name) {\r\n\tthis.name = name;\r\n    }\r\n\r\n    setBPM(bpm) {\r\n\tthis.bpm = bpm;\r\n\tTone.Transport.bpm.value = this.bpm;\r\n    }\r\n}\r\n\r\nexport default EditableSong;\r\n","import React, { Component }  from 'react';\r\n\r\nclass InstrEdit extends Component {\r\n    render(params) {\r\n\treturn (\r\n\t    <div id='instrEdit'>\r\n\t\t<span>Instrument </span>\r\n\t\t<select>\r\n\t\t    <option>Instrument 1</option>\r\n\t\t    <option>Instrument 2</option>\r\n\t\t    <option>Instrument 3</option>\r\n\t\t</select>\r\n\t\t<br />\r\n\t\t<span>Drive </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 2 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 3 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default InstrEdit;\r\n","import React, { Component } from 'react';\r\n\r\nclass Tile extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.state = props.tile;\r\n    }\r\n\r\n    onMouseMove(event) {\r\n    }\r\n\r\n    onMouseDown(event) {\r\n\tthis.props.dragger.active = this.props.line;\r\n\tthis.props.dragger.start = this;\r\n\t//this.state.startF();\r\n\t//this.forceUpdate();\r\n    }\r\n\r\n    onMouseUp(event) {\r\n\tif(this.props.line === this.props.dragger.active)\r\n\t{\r\n\t    if(this.props.dragger.start === this)\r\n\t    {\r\n\t\tthis.state.clickF();\r\n\t    }\r\n\t    else\r\n\t    {\r\n\t\tthis.props.dragger.start.state.startF();\r\n\t\tthis.props.dragger.start.forceUpdate();\r\n\t\tthis.state.endF();\r\n\t    }\r\n\t    this.forceUpdate();\r\n\t}\r\n\tthis.props.dragger.active = null;\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div\r\n\t\tclass={\"tile \" + (this.state.type)}\r\n\t\tonMouseDown={this.onMouseDown.bind(this)}\r\n\t\tonMouseUp={this.onMouseUp.bind(this)}\r\n\t\tonMouseMove={this.onMouseMove.bind(this)}\r\n\t\t>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Tile;\r\n","import React, { Component } from 'react';\r\nimport Tile from './Tile.js';\r\n\r\nclass Line extends Component {\r\n    render() {\r\n\tlet tiles = [];\r\n\tfor(let i = 0; i < 16; i++)\r\n\t{\r\n\t    tiles.push(<Tile tile={this.props.line[i]} line={this.props.lineNum} dragger={this.props.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div class='line'>\r\n\t\t{tiles}\t\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Line;\r\n","import React, { Component } from 'react';\r\n\r\nimport Line from './Line.js';\r\n\r\nclass BlockEdit extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.dragger = {\r\n\t    active: -1,\r\n\t    start: null\r\n\t}\r\n    }\r\n    \r\n    render() {\r\n\tlet lines = [];\r\n\tfor(let i = 0; i < 12; i ++)\r\n\t{\r\n\t    lines.push(<Line line={this.props.block[i]} lineNum={i} dragger={this.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div id='blockEdit'>\r\n\t\t{lines}\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default BlockEdit;\r\n","import React, { Component } from 'react';\r\n\r\nclass Template extends Component {\r\n    render() {\r\n\treturn (\r\n\t    <div>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Template;\r\n","import React, { Component } from 'react';\r\nimport Block from './Block.js';\r\n\r\nclass Track extends Component {\r\n\r\n\r\n    remove() {\r\n\tthis.props.remove(this);\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div className=\"track\">\r\n\t\t<h1 onClick={this.remove.bind(this)}>{this.props.id}</h1>\r\n\t\t<Block />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","import React, { Component } from 'react';\r\nimport Track from './Track.js';\r\n\r\nclass Time extends Component {\r\n    constructor(props)\r\n    {\r\n\tsuper(props);\r\n\tthis.id = 1;\r\n\tthis.state = {\r\n\t    tracks: [<Track id='0' remove={this.removeTrack.bind(this)} />]\r\n\t}\r\n\tthis.offset = 0;\r\n    }\r\n\r\n    addTrack()\r\n    {\r\n\tvar copy = this.state.tracks.slice(0);\r\n\tcopy.push(<Track id={this.id} remove={this.removeTrack.bind(this)}/>);\r\n\tthis.setState(state => ({\r\n\t    tracks: copy\r\n\t}));\r\n\tthis.id++;\r\n    }\r\n\r\n    removeTrack(me)\r\n    {\r\n\tthis.setState(state => ({\r\n\t    tracks: state.tracks.filter(function(value) {\r\n\t\treturn !(me.props.id === value.props.id);\r\n\t    })\r\n\t}));\r\n    }\r\n\r\n    render()\r\n    {\r\n\treturn (\r\n\t    <div>\r\n\t\t{this.state.tracks}\r\n\t\t<h1 onClick={this.addTrack.bind(this)}>Create track</h1>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Time;\r\n","import React, { Component } from 'react';\r\nimport Tone from 'tone';\r\nimport './editor.css';\r\nimport './awesome.css';\r\nimport APIHelper from '../apiHelper.js';\r\nimport Song from './song/EditableSong.js';\r\nimport InstrEdit from './InstrEdit.js';\r\nimport BlockEdit from './blockEdit/BlockEdit.js';\r\nimport Time from './time/Time.js';\r\n\r\nclass Editor extends Component {  \r\n    constructor(props)\r\n    {\r\n\tsuper(props);\r\n\tthis.state = {\r\n\t    playing: false,\r\n\t    error: false,\r\n\t    name: \"\",\r\n\t    bpm: 120,\r\n\t    key: \"\",\r\n\t    keyType: \"\"\r\n\t};\r\n\tthis.keysArray = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"];\r\n\tthis.keyOptions = this.keysArray.map((key) => {\r\n\t    return (<option>{key}</option>);\r\n\t});\r\n\tthis.ready = false;\r\n\tthis.songId = props.match.params.id;\r\n\tif (this.songId === \"new\") {\r\n\t    this.song = new Song();\r\n\t    this.song.load();\r\n\t    this.song.start();\r\n\t    this.ready = true;\r\n\t} else if (!(this.songId === undefined)) {\r\n\t    APIHelper.getSong(this.songId)\r\n\t    .then((res) => {\r\n\t\treturn JSON.parse(res);\r\n\t    })\r\n\t    .then((parsed) => {\r\n\t\tthis.song = new Song(parsed);\r\n\t\tthis.song.load(parsed);\r\n\t\tthis.song.start();\r\n\t\tthis.ready = true;\r\n\t\tthis.setState({ \r\n\t\t    name: this.song.name,\r\n\t\t    bpm: this.song.bpm,\r\n\t\t    key: this.song.freq,\r\n\t\t    keyType: this.song.keyType\r\n\t\t});\r\n\t\tthis.forceUpdate();\r\n\t    })\r\n\t    .catch((err) => {\r\n\t\tthis.state.error = true;\r\n\t\tthis.state.errComp = <h1> Could not load song: {err} </h1>;\r\n\t    });\r\n\t}\r\n    }\r\n    \r\n    componentDidMount() {\r\n\tif(false && this.song && !this.ready)\r\n\t{\r\n\t    this.song.load(this.songMeta);\r\n\t    this.song.start();\r\n\t    this.ready = true;\r\n\t    this.forceUpdate();\r\n\t}\r\n    }\r\n   \r\n    handleToggle() {\r\n\tthis.setState(state => ({\r\n\t    playing: !state.playing\r\n\t}));\r\n\tif(this.state.playing) {\r\n\t    this.song.pause();\r\n\t}\r\n\telse {\r\n\t    this.song.play();\r\n\t}\r\n    }\r\n\r\n    onSave(evt) {\r\n\tevt.preventDefault();\r\n\tthis.song.save();\r\n    }\r\n\r\n    onChange(evt) {\r\n\tlet newState = {};\r\n\tlet val = evt.target.value;\r\n\tswitch (evt.target.id) {\r\n\t    case \"name\":\r\n\t\tthis.song.setName(val);\r\n\t\tbreak;\r\n\t    case \"bpm\":\r\n\t\tif (val != \"\") {\r\n\t\t    if (val < 1) {\r\n\t\t\tval = 1;\r\n\t\t    } else if (val > 500) {\r\n\t\t\tval = 500;\r\n\t\t    }\r\n\t\t    this.song.setBPM(val);\r\n\t\t}\r\n\t\tbreak;\r\n\t    case \"keyType\":\r\n\t\tthis.song.setKey(this.state.key, val);\r\n\t\tbreak;\r\n\t    case \"key\":\r\n\t\tthis.song.setKey(val, this.state.keyType);\r\n\t}\t\r\n\tnewState[evt.target.id] = val;\r\n\tthis.setState(newState);\r\n    }\r\n\r\n    render() {\r\n\tif(this.state.error) {\r\n\t    return this.state.errComp;\r\n\t}\r\n\tif(!this.song || !this.ready) {\r\n\t    return ( <div> </div> );\r\n\t}\r\n\r\n\treturn (\r\n\t    <div class=\"editor\">\r\n\t\t<div class=\"editor-header\">\r\n\t\t    <span class=\"header-left\">\r\n\t\t    <i onClick={this.handleToggle.bind(this)} class={\"fa \" + (this.state.playing ? \"fa-stop\" : \"fa-play\")}></i>\r\n\t\t    <div class=\"header-controls\">\r\n\t\t        <span>BPM </span>\r\n\t\t        <input value={this.state.bpm} id='bpm' onChange={evt => this.onChange(evt)} type=\"number\" />\r\n\t\t        <span>Key </span>\r\n\t\t        <select id=\"key\" value={this.state.key} onChange={evt => this.onChange(evt)}>\r\n\t\t\t    {this.keyOptions}\r\n\t\t        </select>\r\n\t\t        <select onChange={evt => this.onChange(evt)} id=\"keyType\" value={this.state.keyType}>\r\n\t\t\t    <option>Maj</option>\r\n\t\t\t    <option>min</option>\r\n\t\t        </select>\r\n\t\t    </div>\r\n\t\t    </span>\r\n\t\t    <div class=\"song-name\">\r\n\t\t\t<form onSubmit={(evt) => this.onSave(evt)}>\r\n\t\t\t    <input required onChange={evt => this.onChange(evt)} value={this.state.name} id='name' type='text' placeholder='untitled' class=\"name-input\" />\r\n\t\t\t    <input type='submit' value=\"Save\" className='btn btn-success' />\r\n\t\t\t</form>\r\n\t\t    </div>\r\n\t\t</div>\r\n\t\t<div class=\"row\">\r\n\t\t    <InstrEdit />\r\n\t\t    <BlockEdit block={this.song.activeBlock} />\r\n\t\t</div>\r\n\t\t<Time />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Editor;\r\n","import { Component } from 'react';\r\nimport React from \"react\";\r\nimport apiHelper from \"./apiHelper\";\r\n\r\nclass SongRating extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: undefined,\r\n\t\t\tuserValue: this.props.song.ratings ? this.props.song.ratings.currentUserRating : null\r\n\t\t};\r\n\t\tthis.value = this.props.song.ratings ? this.props.song.ratings.average : 0;\r\n\t}\r\n\tonMouseEnter(pos) {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: pos\r\n\t\t});\r\n\t}\r\n\tonMouseLeave() {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: undefined\r\n\t\t});\r\n\t}\r\n\tsetRating(rating) {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\trating = rating === this.state.userValue ? null : rating;\r\n\t\tapiHelper.rateSong(this.props.song.id, rating)\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tuserValue: rating\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\t// TODO implement properly\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst stars = [];\r\n\t\tfor (let i = 1; i <= 5; i++) {\r\n\t\t\tlet classes = \"star\";\r\n\t\t\tif (Math.ceil(this.props.value) >= i) {\r\n\t\t\t\tif (this.props.value < i) {\r\n\t\t\t\t\tclasses += \" half\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclasses += \" full\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.state.userValue && this.state.userValue >= i) {\r\n\t\t\t\tclasses += \" active\";\r\n\t\t\t}\r\n\t\t\tif (this.state.hover && this.state.hover >= i) {\r\n\t\t\t\tclasses += \" hover\";\r\n\t\t\t}\r\n\t\t\tstars.push(<div\r\n\t\t\t\tclassName={classes}\r\n\t\t\t\tonMouseEnter={this.onMouseEnter.bind(this, i)}\r\n\t\t\t\tonMouseLeave={this.onMouseLeave.bind(this)}\r\n\t\t\t\tonClick={this.setRating.bind(this, i)}>\r\n\t\t\t</div>);\r\n\t\t}\r\n\t\tlet classes = \"song-rating\"+(this.props.changeable ? \" changeable\" : \"\");\r\n\t\treturn (\r\n\t\t\t<div className={classes}>{stars}</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongRating;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongRating from './SongRating.js';\r\nimport constants from \"./constants\";\r\n\r\nclass SongPlayer extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect: false,\r\n\t\t\tto: \"\",\r\n\t\t\tplayBtn: \"play-btn\",\r\n\t\t\tplaying: false\r\n\t\t};\r\n\t\tthis.song = props.song;\r\n\t\tthis.song.addProgressListener(this, (count) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tprogress: Math.ceil(((count+1)/(this.song.blockLength*16))*100)+'%'\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tonEdit() {\r\n\t\tlet id = this.song.id || \"\";\r\n\t\tthis.setState({\r\n\t\t\tredirect: true,\r\n\t\t\tto: \"/editor/\" + id\r\n\t\t});\r\n\t}\r\n\r\n\tonPlayPause() {\r\n\t\tif (this.state.playing) {\r\n\t\t\tthis.setState({ playBtn: \"play-btn\", playing: false });\r\n\t\t\tthis.song.pause();\r\n\t\t} else {\r\n\t\t\tif (!this.song.loaded) {\r\n\t\t\t\tAPIHelper.getSong(this.song.id, 'composition')\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\treturn JSON.parse(data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((parsed) => {\r\n\t\t\t\t\t\tthis.song.load(parsed);\r\n\t\t\t\t\t\tthis.song.start();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch({\r\n\t\t\t\t\t\t// Could not play error\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.setState({ playBtn: \"pause-btn\", playing: true });\r\n\t\t\tthis.song.play();\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.redirect) {\r\n\t\t\treturn <Redirect to={this.state.to} />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<li>\r\n\t\t\t\t<div className=\"song-header\" style={{background: '#007eff45'}}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button onClick={() => this.onPlayPause()} className={\"btn btn-light playback-btn \" + this.state.playBtn}></button>\r\n\t\t\t\t\t\t<div className=\"song-title\">{this.song.name}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{APIHelper.getCurrentUser() && APIHelper.getCurrentUser().username === this.song.username &&\r\n\t\t\t\t\t\t<div className=\"buttons-container\">\r\n\t\t\t\t\t\t\t<button onClick={()=> this.onEdit()} className=\"btn btn-light\"><i className=\"fa fa-pencil\"></i></button>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-light\"><i className=\"fa fa-trash\"></i></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<a href={constants.ROOT_PATH+'profile/'+this.song.username} className=\"song-artist\">\r\n\t\t\t\t\t\t\t<div className=\"name\">{this.song.author}</div>\r\n\t\t\t\t\t\t\t<div className=\"username\">@{this.song.username}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"play-progress\" style={{width: this.state.progress}}></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"song-body\">\r\n\t\t\t\t\t<SongRating song={this.song} changeable={APIHelper.isLoggedIn()} value={this.song.ratings ? this.song.ratings.average : 0} />\r\n\t\t\t\t\t<div className=\"song-dates\">\r\n\t\t\t\t\t\t<span className=\"song-creation-date\">Created {this.song.getFormattedCreate()}</span>\r\n\t\t\t\t\t\t<span className=\"song-update-date\">{\r\n\t\t\t\t\t\t\tthis.song.hasBeenUpdated() ? \"Updated \" + this.song.getFormattedUpdate() : \"\"\r\n\t\t\t\t\t\t}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongPlayer;\r\n","import React, { Component } from 'react';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongPlayer from './SongPlayer.js';\r\nimport Song from './editor/song/Song.js';\r\n\r\nclass SongList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.songs = [];\r\n\t\tthis.state = {\r\n\t\t\tloading: false\r\n\t\t};\r\n\t\tthis.loadMore();\r\n\t}\r\n\tloadMore() {\r\n\t\tif (this.state.loading)\r\n\t\t\treturn;\r\n\t\tthis.setState({loading: true});\r\n\t\tAPIHelper.getSongs(this.props.userId, this.props.popular, this.delimiterId || null)\r\n\t\t\t.then(songs => {\r\n\t\t\t\tthis.delimiterId = null;\r\n\t\t\t\tfor (const i in songs) {\r\n\t\t\t\t\tconst songData = songs[i];\r\n\t\t\t\t\tif (songData.hasOwnProperty('delimiterId')) {\r\n\t\t\t\t\t\tthis.delimiterId = songData.delimiterId;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.songs.push(<SongPlayer song={new Song(songData)} />);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({loading: false, loaded: true});\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\t// TODO\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.songs.length === 0 && this.state.loaded ?\r\n\t\t\t\t\t<p className=\"text-center\">Looks like there are no songs to display :(</p>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<ul className='song-list'>\r\n\t\t\t\t\t\t{this.songs}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t}\r\n\t\t\t\t{(this.state.loading || this.delimiterId) &&\r\n\t\t\t\t<div className=\"song-list-footer\">\r\n\t\t\t\t\t{!this.delimiterId ?\r\n\t\t\t\t\t\t<div className=\"loading\">Loading...</div>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<button className=\"btn btn-light load-more-btn\" disabled={this.state.loading} onClick={this.loadMore.bind(this)}>{this.state.loading ? 'Loading...' : 'Load More'}</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongList;\r\n","import React, { Component } from 'react';\r\nimport constant from './constants.js';\r\nimport SongList from \"./SongList\";\r\n\r\nclass Home extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.slide1 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide1.png)'\r\n\t\t};\r\n\t\tthis.slide2 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide2.png)'\r\n\t\t};\r\n\t\tthis.slide3 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide3.png)'\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div id=\"carouselExampleIndicators\" className=\"carousel slide\" data-ride=\"carousel\">\r\n\t\t\t\t\t\t<ol className=\"carousel-indicators\">\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" className=\"active\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>\r\n\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t\t<div className=\"carousel-inner\" role=\"listbox\">\r\n\t\t\t\t\t\t\t<div className=\"carousel-item active\" style={this.slide1}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Create 8-Bit Music in Just Minutes</h1>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light carousel-button\">View The Tutorial</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide2}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Perfect For Retro-Style Games</h1>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light carousel-button\">Listen To Example Songs</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide3}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Get Started With Our Free Chiptune Editor</h1>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light carousel-button\">Create a New Song</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<a className=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Previous</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<a className=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Next</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div className=\"container content\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-lg-9 col-md-8\">\r\n\t\t\t\t\t\t\t<h3>Popular Songs</h3>\r\n\t\t\t\t\t\t\t<SongList popular={true} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-lg-3 col-md-4\">\r\n\t\t\t\t\t\t\t<h3>About</h3>\r\n\t\t\t\t\t\t\t<p>Chip Share is a chiptune song editor right on your browser! It is developed using <a href=\"https://reactjs.org/\">ReactJS</a> as a front-end framework and <a href=\"https://expressjs.com/\">Express</a> back-end framework.</p>\r\n\t\t\t\t\t\t\t<p>The project is the result of a school project collectively developed by Jake, Carson, Mishel, and Alex at Ryerson University, Toronto, Canada.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport constants from \"./constants\";\r\n\r\nclass Login extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfieldErrors: {},\r\n\t\t\terror: null,\r\n\t\t\tredirect: null\r\n\t\t};\r\n\t}\r\n\tonSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.refs.username.value.length === 0 || this.refs.password.value.length === 0) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: null,\r\n\t\t\t\tfieldErrors: {\r\n\t\t\t\t\tusername: this.refs.username.value.length === 0 ? 'This field is required.' : null,\r\n\t\t\t\t\tpassword: this.refs.password.value.length === 0 ? 'This field is required.' : null\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst request = APIHelper.login(this.refs.username.value, this.refs.password.value);\r\n\t\tswitch (request.status) {\r\n\t\t\tcase 200:\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tredirect: constants.ROOT_PATH+'profile/'+this.refs.username.value.toLowerCase()\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 400:\r\n\t\t\t\tlet fieldErrors = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfieldErrors = JSON.parse(request.response).fieldErrors;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: null,\r\n\t\t\t\t\tfieldErrors: fieldErrors\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlet message = \"Unknown error occurred.\";\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmessage = JSON.parse(request.response).message;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: message.charAt(0).toUpperCase()+message.substring(1)+'.',\r\n\t\t\t\t\tfieldErrors: {}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\thideError(input) {\r\n\t\tconst fieldErrors = this.state.fieldErrors;\r\n\t\tdelete fieldErrors[input];\r\n\t\tthis.setState({\r\n\t\t\tfieldErrors: fieldErrors\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn this.state.redirect ? <Redirect to={this.state.redirect} /> :\r\n\t\t(\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-4 offset-lg-4 col-sm-6 offset-sm-3 col-10 offset-1\">\r\n\t\t\t\t\t\t<form onSubmit={(evt) => this.onSubmit(evt)} className=\"form-login\">\r\n\t\t\t\t\t\t\t<h1>Login</h1>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<input ref=\"username\" onChange={() => this.state.fieldErrors.username ? this.hideError('username') : {}} type=\"text\" className={'form-control'+(this.state.fieldErrors.username ? ' is-invalid' : '')} placeholder=\"Username\" />\r\n\t\t\t\t\t\t\t\t<div className=\"invalid-feedback\">{this.state.fieldErrors.username || ''}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<input ref=\"password\" onChange={() => this.state.fieldErrors.password ? this.hideError('password') : {}} type=\"password\" className={'form-control'+(this.state.fieldErrors.password ? ' is-invalid' : '')} placeholder=\"Password\" />\r\n\t\t\t\t\t\t\t\t<div className=\"invalid-feedback\">{this.state.fieldErrors.password || ''}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t{this.state.error &&\r\n\t\t\t\t\t\t\t\t<div style={{'margin': '-10px 0 5px'}}><small className=\"text-warning\">{this.state.error}</small></div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Login</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"register-prompt\">\r\n\t\t\t\t\t\t\t<h2>Don't have an account?</h2>\r\n\t\t\t\t\t\t\t<Link to=\"/register\">Register Here</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Login;\r\n","import React, { Component } from 'react';\r\n\r\nclass TextInput extends Component {\r\n\tgetValue() {\r\n\t\treturn this.refs.input.value;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<input ref=\"input\" name={this.props.name} onChange={() => this.props.fieldErrors[this.props.name] ? this.props.hideError(this.props.name) : {}} type={this.props.type || 'text'} className={'form-control'+(this.props.fieldErrors[this.props.name] ? ' is-invalid' : '')} placeholder={this.props.placeholder || ''} />\r\n\t\t\t\t<div className=\"invalid-feedback\">{this.props.fieldErrors[this.props.name] || ''}</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TextInput;","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport TextInput from \"./layout/TextInput\";\r\nimport constants from \"./constants\";\r\n\r\nclass Register extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfieldErrors: {},\r\n\t\t\terror: null,\r\n\t\t\tredirect: null,\r\n\t\t\tcaptcha: null\r\n\t\t};\r\n\t\tAPIHelper.getCaptcha()\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.captchaKey = response.captcha.key;\r\n\t\t\t\t//const captcha = new DOMParser().parseFromString(parsed.captcha.image, \"text/xml\").firstChild;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcaptcha: <div dangerouslySetInnerHTML={{__html: response.captcha.image}}></div>\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcaptcha: 'Failed to load!'\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t}\r\n\tonSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.ensureErrorCorrection && Object.keys(this.state.fieldErrors).length > 0)\r\n\t\t\treturn;\r\n\t\tconst inputData = {\r\n\t\t\tname: this.refs.name.getValue(),\r\n\t\t\tusername: this.refs.username.getValue(),\r\n\t\t\tpassword: this.refs.password.getValue(),\r\n\t\t\tcaptcha: this.refs.captcha.getValue()\r\n\t\t};\r\n\t\tlet clientError = false;\r\n\t\tfor (const key in inputData) {\r\n\t\t\tif (inputData[key].length === 0) {\r\n\t\t\t\tthis.state.fieldErrors[key] = 'This field is required.';\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t\tclientError = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.refs['repeat-password'].getValue() !== this.refs.password.getValue()) {\r\n\t\t\tthis.state.fieldErrors['repeat-password'] = 'Passwords do not match.';\r\n\t\t\tthis.forceUpdate();\r\n\t\t\tclientError = true;\r\n\t\t}\r\n\t\tif (clientError)\r\n\t\t\treturn;\r\n\t\tconst request = APIHelper.register(inputData, this.captchaKey);\r\n\t\tswitch (request.status) {\r\n\t\t\tcase 201:\r\n\t\t\t\tconst loginRequest = APIHelper.login(inputData.username, inputData.password);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tredirect: loginRequest.status === 200 ? constants.ROOT_PATH+'profile/'+inputData.username.toLowerCase() : constants.ROOT_PATH+'login'\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 400:\r\n\t\t\t\tlet fieldErrors = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst json = JSON.parse(request.response);\r\n\t\t\t\t\tfieldErrors = json.fieldErrors || {};\r\n\t\t\t\t\tif (json.captchaError)\r\n\t\t\t\t\t\tfieldErrors.captcha = json.captchaError\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: null,\r\n\t\t\t\t\tfieldErrors: fieldErrors\r\n\t\t\t\t});\r\n\t\t\t\tthis.ensureErrorCorrection = true;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlet message = \"Unknown error occurred.\";\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmessage = JSON.parse(request.response).message;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: message.charAt(0).toUpperCase()+message.substring(1)+'.',\r\n\t\t\t\t\tfieldErrors: {}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\thideError(input) {\r\n\t\tconst fieldErrors = this.state.fieldErrors;\r\n\t\tdelete fieldErrors[input];\r\n\t\tthis.setState({\r\n\t\t\tfieldErrors: fieldErrors\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn this.state.redirect ? <Redirect to={this.state.redirect} /> :\r\n\t\t(\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-4 offset-lg-4 col-sm-6 offset-sm-3 col-10 offset-1\">\r\n\t\t\t\t\t\t<form onSubmit={(evt) => this.onSubmit(evt)} className=\"form-login\">\r\n\t\t\t\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t\t\t\t<TextInput ref=\"name\" name=\"name\" placeholder=\"Name\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"username\" name=\"username\" placeholder=\"Username\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"password\" name=\"password\" type=\"password\" placeholder=\"Password\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"repeat-password\" name=\"repeat-password\" type=\"password\" placeholder=\"Repeat Password\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<div className=\"captcha-group\">\r\n\t\t\t\t\t\t\t\t<div className=\"captcha-container\">{this.state.captcha || 'Loading captcha...'}</div>\r\n\t\t\t\t\t\t\t\t<TextInput ref=\"captcha\" name=\"captcha\" placeholder=\"Captcha Answer\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Register</button>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"register-prompt\">\r\n\t\t\t\t\t\t\t<h2>Already have an account?</h2>\r\n\t\t\t\t\t\t\t<Link to=\"/login\">Login Here</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Register;\r\n","import React, { Component } from 'react';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongList from \"./SongList\";\r\n\r\nclass Profile extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tloading: true\r\n\t\t};\r\n\t\tif (this.props.match && this.props.match.params && this.props.match.params.username) {\r\n\t\t\tAPIHelper.fetchUser(this.props.match.params.username)\r\n\t\t\t\t.then(user => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\tuser: user\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tif (err.status === 404) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\t\tuser: null\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// TODO display error\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.state.loading = false;\r\n\t\t\tthis.state.user = null;\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.loading)\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"info-box\">\r\n\t\t\t\t\t<p>Loading...</p>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\telse\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-12 col-lg-8 offset-lg-2\">\r\n\t\t\t\t\t\t\t\t{!this.state.user ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"info-box\">\r\n\t\t\t\t\t\t\t\t\t\t<h1>User Not Found</h1>\r\n\t\t\t\t\t\t\t\t\t\t<p>This profile page does not exist.</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<h1 className=\"account-name\">{this.state.user.name}</h1>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"account-username\">@{this.state.user.username}</span>\r\n\t\t\t\t\t\t\t\t\t\t<SongList userId={this.state.user.id}/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n\r\nexport default Profile;\r\n","import React, { Component } from 'react';\r\n\r\nclass FrameworksPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Frameworks</h1>\r\n\t\t\t\t\t\t<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Massa tincidunt dui ut ornare. Viverra aliquet eget sit amet tellus. Duis convallis convallis tellus id interdum velit laoreet.</p>\r\n\t\t\t\t\t\t<h2>Express</h2>\r\n\t\t\t\t\t\t<p>Risus feugiat in ante metus dictum. Semper feugiat nibh sed pulvinar. Cras semper auctor neque vitae tempus quam. Cras semper auctor neque vitae tempus quam pellentesque. Viverra justo nec ultrices dui sapien.</p>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>Benefit 1</li>\r\n\t\t\t\t\t\t\t<li>Benefit 2</li>\r\n\t\t\t\t\t\t\t<li>Benefit 3</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<p>Tristique magna sit amet purus gravida quis blandit. Odio tempor orci dapibus ultrices in iaculis nunc. Tempor commodo ullamcorper a lacus vestibulum sed arcu non odio.</p>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>Drawback 1</li>\r\n\t\t\t\t\t\t\t<li>Drawback 2</li>\r\n\t\t\t\t\t\t\t<li>Drawback 3</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<h2>React</h2>\r\n\t\t\t\t\t\t<p>Risus feugiat in ante metus dictum. Semper feugiat nibh sed pulvinar. Cras semper auctor neque vitae tempus quam. Cras semper auctor neque vitae tempus quam pellentesque. Viverra justo nec ultrices dui sapien.</p>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>Benefit 1</li>\r\n\t\t\t\t\t\t\t<li>Benefit 2</li>\r\n\t\t\t\t\t\t\t<li>Benefit 3</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<p>Tristique magna sit amet purus gravida quis blandit. Odio tempor orci dapibus ultrices in iaculis nunc. Tempor commodo ullamcorper a lacus vestibulum sed arcu non odio.</p>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>Drawback 1</li>\r\n\t\t\t\t\t\t\t<li>Drawback 2</li>\r\n\t\t\t\t\t\t\t<li>Drawback 3</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<a href=\"/assignment/installation\" className=\"btn btn-lg btn-primary\">Continue to Installation</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FrameworksPage;","import React, { Component } from 'react';\r\n\r\nclass TutorialPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Tutorial</h1>\r\n\r\n\t\t\t\t\t\t<h2>Chip Share</h2>\r\n\t\t\t\t\t\t<p>For our demo website, we have created an online chiptune song sharing website. You can create new songs, adapt from the songs of other users, or simply browser the site and rate the previously submitted songs.</p>\r\n\t\t\t\t\t\t<a href=\"/\" className=\"btn btn-lg btn-success\">ChipShare Homepage</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TutorialPage;","import React, { Component } from 'react';\r\n\r\nclass ConclusionPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Conclusion</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ConclusionPage;","import React, { Component } from 'react';\r\n\r\nclass InstallationPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Installing the Frameworks</h1>\r\n\t\t\t\t\t\t<h2>React</h2>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<h4>Node.js and npm</h4>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<p class=\"ao\">\r\n\t\t\t\t\t\t<img src=\"https://nodejs.org/static/images/logos/nodejs-new-pantone-white.png\" alt=\"Node.js\" class=\"right-float\" />\r\n\t\t\t\t\t\tNode.js is a free, open source <b>server environment</b> that can run JavaScript code on various operating systems. Since React is a JavaScript framework, its installation is required for server code execution. Node.js can create dynamic page content, modify files on a server, collect form data and modify data in your database.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tOn <b>Windows or Mac</b>, you can access the <a href=\"https://nodejs.org/en/download/\" target=\"_blank\">Node.js download page</a> and download the correct version of Node.js for your computer.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tOn <b>Linux</b> operating systems, first install a tool called curl if it is not already installed by typing:<br /><code>sudo apt-get install curl</code><br />then use curl to add Node.js to your repository list:<br /><code>curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -</code><br />Finally install Node.js by typing:<br /><code>sudo apt-get install -y nodejs</code>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tInstalling Node.js will also install npm, a <b>Software Registry</b> that installs code packages such as React.\r\n\t\t\t\t\t\t<br /><br />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<h4>Creating a React App</h4>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tThe easiest way to install React is by using  a command called <b>create-react-app</b>. Open a command prompt, and install create-react-app with npm by typing:<br /><code>npx create-react-app <b>my-app</b></code><br />In which you may replace my-app with your app name. This will create a project folder containing the required React files. You may then start your local server by typing:<br /><code>npm start</code>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\tA webpage should open at the default port 3000. if it does not open, open a web browser and go to localhost:3000, or replace the number with the port number used to run the local server. The default webpage looks like this: \r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<img src=\"/assets/Installation1.png\" alt=\"React Default Page\" class=\"ins-img\"/>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<br />Congratulations! You have now created a dynamic webpage and hosted it on a local server. You may now edit the App.js template to turn your site into anything you want.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<h2>Express</h2>\r\n\t\t\t\t\t\t<p>Google it.</p>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<a href=\"/assignment/tutorial\" className=\"btn btn-lg btn-primary\">Continue to Tutorial</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default InstallationPage;\r\n","import React, { Component } from 'react';\r\nimport ScrollArea from 'react-scrollbar';\r\n\r\nclass CreditsPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\" style={{margin: '30px auto 50px'}}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<h1>Credits</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars2.githubusercontent.com/u/44684541?s=400\" />\r\n\t\t\t\t\t\t<h3>Alexander</h3>\r\n\t\t\t\t\t\t<a href=\"https://github.com/alxyaro\" title=\"Github Account\">github.com/alxyaro</a>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent hash</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars3.githubusercontent.com/u/6993228?s=400\" />\r\n\t\t\t\t\t\t<h3>Carson</h3>\r\n\t\t\t\t\t\t<a href=\"https://github.com/versox\" title=\"Github Account\">github.com/versox</a>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent hash</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://avatars2.githubusercontent.com/u/44612512?s=400\" />\r\n\t\t\t\t\t\t<h3>Jake</h3>\r\n\t\t\t\t\t\t<a href=\"https://github.com/briltz\" title=\"Github Account\">github.com/briltz</a>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent hash</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-3 col-sm-6 col-8 credits-block\">\r\n\t\t\t\t\t\t<img src=\"https://via.placeholder.com/400\" />\r\n\t\t\t\t\t\t<h3>Mishel</h3>\r\n\t\t\t\t\t\t<a href=\"#\" title=\"Github Account\">github.com/?</a>\r\n\t\t\t\t\t\t<ScrollArea horizontal={false} speed={0.8}>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent hash</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t\t<li>Lorem ipsum dolor sit amet, ex movet putent has</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</ScrollArea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CreditsPage;","import React, { Component } from 'react';\r\nimport constant from \"./constants\";\r\n\r\nclass MenuDropdown extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<li className='dropdown' onClick={this.toggleOpen}>\r\n\t\t\t\t<a href='#' className={'nav-link dropdown-toggle'} data-toggle=\"dropdown\">\r\n\t\t\t\t\t{this.props.item.title}\r\n\t\t\t\t</a>\r\n\t\t\t\t<div className={'dropdown-menu'}>\r\n\t\t\t\t\t{this.props.item.items.map((listItem) => {\r\n\t\t\t\t\t\treturn <a className=\"dropdown-item\" href={constant.ROOT_PATH+listItem.path}>{listItem.title}</a>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MenuDropdown;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport APIHelper from \"./apiHelper\";\r\nimport constants from \"./constants\";\r\n\r\nclass Logout extends Component {\r\n\trender() {\r\n\t\tAPIHelper.logout();\r\n\t\treturn <Redirect to={constants.ROOT_PATH} />\r\n\t}\r\n}\r\n\r\nexport default Logout;","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport Editor from './editor/Editor.js';\r\nimport Home from './Home.js';\r\nimport Login from './Login.js';\r\nimport Register from './Register.js';\r\nimport Profile from './Profile.js';\r\nimport constant from './constants.js';\r\nimport FrameworksPage from \"./assignment_pages/FrameworksPage\";\r\nimport TutorialPage from \"./assignment_pages/TutorialPage\";\r\nimport ConclusionPage from \"./assignment_pages/ConclusionPage\";\r\nimport InstallationPage from \"./assignment_pages/InstallationPage\";\r\nimport CreditsPage from \"./assignment_pages/CreditsPage\";\r\nimport MenuDropdown from \"./MenuDropdown\";\r\nimport APIHelper from './apiHelper';\r\nimport Logout from \"./Logout\";\r\n\r\nclass App extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.user = APIHelper.getCurrentUser();\r\n\t\tthis.menu = [\r\n\t\t\t{ title: \"Create\", path: \"editor/new\" },\r\n\t\t\t{ title: \"My Songs\", path: \"profile/\"+(this.user ? this.user.username : ''), userOnly: true },\r\n\t\t\t{ title: \"Assignment\", path: \"assignment\", items: [\r\n\t\t\t\t\t{ title: \"Frameworks\", path: \"assignment/frameworks\" },\r\n\t\t\t\t\t{ title: \"Installation\", path: \"assignment/installation\" },\r\n\t\t\t\t\t{ title: \"Tutorial\", path: \"assignment/tutorial\" },\r\n\t\t\t\t\t{ title: \"Conclusion\", path: \"assignment/conclusion\" }\r\n\t\t\t\t] },\r\n\t\t\t{ title: \"Credits\", path: \"credits\" }\r\n\t\t]\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet navBarItems = this.menu.map((menuItem) => {\r\n\t\t\tif (menuItem.userOnly && !this.user)\r\n\t\t\t\treturn;\r\n\t\t\tif (menuItem.path)\r\n\t\t\t\tmenuItem.path = constant.ROOT_PATH+menuItem.path;\r\n\t\t    return menuItem.items ? <MenuDropdown item={menuItem} /> : <li className={'nav-item'+(menuItem.items ? ' dropdown' : '')}>\r\n\t\t\t    <a href={menuItem.path || '#'} className={\"nav-link \"+(window.location.pathname === menuItem.path ? \"active\" : \"\")}>\r\n\t\t\t\t    {menuItem.title}\r\n\t\t\t    </a>\r\n\t\t    </li>;\r\n\t\t});\r\n\t\tconst UserMenu = () => {\r\n\t\t    const user = APIHelper.getCurrentUser();\r\n\t\t    return <ul className=\"navbar-nav ml-auto\">\r\n\t\t\t{!user ?\r\n\t\t\t(<a className=\"nav-link\" href={constant.ROOT_PATH + \"login\"}>Log In / Register</a>)\r\n\t\t\t    :\r\n\t\t\t(<li className=\"nav-item dropdown\">\r\n\t\t\t\t<a className=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\tLogged in as: {user.name}\r\n\t\t\t\t</a>\r\n\t\t\t\t<div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n\t\t\t\t\t<a className=\"dropdown-item\" href={constant.ROOT_PATH + \"logout\"}>Log Out</a>\r\n\t\t\t\t</div>\r\n\t\t\t</li>)}\r\n\t\t\t</ul>;\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Router basename={constant.ROOT_PATH}>\r\n\t\t\t\t    <div>\r\n\t\t\t\t\t\t<nav className=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\r\n\t\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t\t<a className=\"navbar-brand\" href={constant.ROOT_PATH}>Chip Share</a>\r\n\t\t\t\t\t\t\t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarResponsive\">\r\n\t\t\t\t\t\t\t\t\t<ul className=\"navbar-nav mr-auto\">\r\n\t\t\t\t\t\t\t\t\t\t{navBarItems}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t<Route path=\"/\" component={UserMenu} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t<Route path=\"/\" exact component={Home} />\r\n\t\t\t\t\t\t<Route path=\"/editor\" component={Editor} />\r\n\t\t\t\t\t\t<Route path=\"/editor/:id\" component={Editor} />\r\n\t\t\t\t\t\t<Route path=\"/login\" component={Login} />\r\n\t\t\t\t\t\t<Route path=\"/register\" component={Register} />\r\n\t\t\t\t\t\t<Route path=\"/profile/:username?\" component={Profile} />\r\n\t\t\t\t\t    <Route path=\"/assignment/frameworks\" component={FrameworksPage} />\r\n\t\t\t\t\t    <Route path=\"/assignment/installation\" component={InstallationPage} />\r\n\t\t\t\t\t    <Route path=\"/assignment/tutorial\" component={TutorialPage} />\r\n\t\t\t\t\t    <Route path=\"/assignment/conclusion\" component={ConclusionPage} />\r\n\t\t\t\t\t    <Route path=\"/credits\" component={CreditsPage} />\r\n\t\t\t\t\t    <Route path=\"/logout\" component={Logout} />\r\n\t\t\t\t    </div>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}